"use strict";(self.webpackChunkjupyterlab_ws_chat=self.webpackChunkjupyterlab_ws_chat||[]).push([[765],{9765:(e,t,n)=>{n.r(t),n.d(t,{AutocompletionRegistry:()=>c,ChatModel:()=>o,ChatWidget:()=>ce,IAutocompletionRegistry:()=>l,buildChatSidebar:()=>le,buildErrorWidget:()=>E,chatIcon:()=>a,readIcon:()=>i});var s=n(3858);const a=new s.LabIcon({name:"jupyter-chat::chat",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 24 24" width="16">\n  <g class="jp-icon3" fill="#616161">\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M15 4v7H5.17L4 12.17V4h11m1-2H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm5 4h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z"/>\n  </g>\n</svg>\n'}),i=new s.LabIcon({name:"jupyter-chat::read",svgstr:'<svg height="24px" viewBox="0 0 24 24" width="24px" xmlns="http://www.w3.org/2000/svg">\n  <g>\n    <path\n       style="display:inline;fill:none;fill-opacity:1;stroke:#545454;stroke-width:1.54693;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:1.5;stroke-dasharray:none;stroke-opacity:1;paint-order:normal"\n       d="M 2.2734634,9 V 20.226537 H 21.726536 V 9" />\n    <path\n       style="display:inline;fill:none;stroke:#545454;stroke-width:1.54528;stroke-linecap:square;stroke-miterlimit:10"\n       transform="matrix(0.81805878,0.57513462,-0.81805878,0.57513462,0,0)"\n       d="M 9.5141659,-5.1535239 H 20.802967 V 6.1352773 H 9.5141659 Z" />\n  </g>\n</svg>\n'});var r=n(4602);class o{constructor(e={}){var t;this._messages=[],this._unreadMessages=[],this._messagesInViewport=[],this._name="",this._isDisposed=!1,this._notificationId=null,this._messagesUpdated=new r.Signal(this),this._unreadChanged=new r.Signal(this),this._viewportChanged=new r.Signal(this);const n=null!==(t=e.config)&&void 0!==t?t:{};this._config={stackMessages:!0,...n},this._commands=e.commands}get messages(){return this._messages}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get lastRead(){var e;return void 0===this._id?0:null!==(e=JSON.parse(localStorage.getItem(`@jupyter/chat:${this._id}`)||"{}").lastRead)&&void 0!==e?e:0}set lastRead(e){if(void 0===this._id)return;const t=JSON.parse(localStorage.getItem(`@jupyter/chat:${this._id}`)||"{}");t.lastRead=e,localStorage.setItem(`@jupyter/chat:${this._id}`,JSON.stringify(t))}get config(){return this._config}set config(e){const t="stackMessages"in e&&this._config.stackMessages!==e.stackMessages,n="unreadNotifications"in e&&this._config.unreadNotifications!==e.unreadNotifications;this._config={...this._config,...e},t&&(this._config.stackMessages?this._messages.slice(1).forEach(((e,t)=>{const n=this._messages[t].sender.username;e.stacked=n===e.sender.username})):this._messages.forEach((e=>{delete e.stacked})),this._messagesUpdated.emit()),n&&!this._config.unreadNotifications&&this._notify(0)}get unreadMessages(){return this._unreadMessages}set unreadMessages(e){var t;const n=this._unreadMessages.filter((t=>!e.includes(t))),s=e.length-this._unreadMessages.length;if(this._unreadMessages=e,this._unreadChanged.emit(this._unreadMessages),this._notify(e.length,s>0),void 0!==this._id&&n.length){let e=!1,s=null!==(t=this.lastRead)&&void 0!==t?t:this.messages[n[0]].time;n.forEach((t=>{this.messages[t].time>s&&(s=this.messages[t].time,e=!0)})),e&&(this.lastRead=s)}}get messagesInViewport(){return this._messagesInViewport}set messagesInViewport(e){this._messagesInViewport=e,this._viewportChanged.emit(e)}get messagesUpdated(){return this._messagesUpdated}get unreadChanged(){return this._unreadChanged}get viewportChanged(){return this._viewportChanged}addMessage(e){}dispose(){this.isDisposed||(this._isDisposed=!0)}get isDisposed(){return this._isDisposed}formatChatMessage(e){return e}messageAdded(e){const t=this._messages.findIndex((t=>t.id===e.id));t>-1&&this._messages.splice(t,1);let n=this._messages.findIndex((t=>t.time>e.time));-1===n&&(n=this._messages.length),this.messagesInserted(n,[e])}messagesInserted(e,t){var n;const s=[],a=[],i=null!==(n=this.lastRead)&&void 0!==n?n:0;if(t.forEach(((t,n)=>{s.push(this.formatChatMessage(t)),t.time>i&&a.push(e+n)})),this._messages.splice(e,0,...s),this._config.stackMessages){const t=e+s.length-1,n=0===e?1:e,a=this._messages.length>t+1?t+1:t;for(let e=n;e<=a;e++){const t=this._messages[e],n=this._messages[e-1].sender.username;t.stacked=n===t.sender.username}}this._addUnreadMessages(a),this._messagesUpdated.emit()}messagesDeleted(e,t){this._messages.splice(e,t),this._messagesUpdated.emit()}_addUnreadMessages(e){const t=new Set(this._unreadMessages);e.forEach((e=>t.add(e))),this.unreadMessages=Array.from(t.values())}_notify(e,t=!1){this._commands&&(e&&this._config.unreadNotifications?this._commands.execute("apputils:update-notification",{id:this._notificationId,message:`${e} incoming message(s) ${this._name?"in "+this._name:""}`}).then((n=>{!n&&t&&this._commands.execute("apputils:notify",{type:"info",message:`${e} incoming message(s) in ${this._name}`}).then((e=>{this._notificationId=e}))})):this._notificationId&&(this._commands.execute("apputils:dismiss-notification",{id:this._notificationId}),this._notificationId=null))}}const l=new(n(7262).Token)("@jupyter/chat:IAutocompleteRegistry");class c{constructor(){this._default=null,this._autocompletions=new Map}get default(){return this._default}set default(e){null===e||this._autocompletions.has(e)?this._default=e:console.warn(`There is no registered completer with the name '${e}'`)}getDefaultCompletion(){if(null!==this._default)return this._autocompletions.get(this._default)}get(e){return this._autocompletions.get(e)}add(e,t,n=!1){return this._autocompletions.has(e)?(console.warn(`A completer with the name '${e}' is already registered`),!1):(this._autocompletions.set(e,t),(1===this._autocompletions.size||n)&&(this.default=e),!0)}remove(e){return this._autocompletions.delete(e)}removeAll(){this._autocompletions.clear()}}var d=n(6110),u=n(3251),m=n(9276),h=n(3345),g=n.n(h),p=n(2276),f=n(3325);function v(e){return getComputedStyle(document.body).getPropertyValue(e).trim()}function y(e){const[t,n]=(0,h.useState)((0,p.A)());return(0,h.useEffect)((()=>{var t;async function s(){n(await async function(){await async function(){for(;!document.body.hasAttribute("data-jp-theme-light");)await new Promise((e=>setTimeout(e,100)))}();const e=document.body.getAttribute("data-jp-theme-light");return(0,p.A)({spacing:4,components:{MuiButton:{defaultProps:{size:"small"}},MuiFilledInput:{defaultProps:{margin:"dense"}},MuiFormControl:{defaultProps:{margin:"dense",size:"small"}},MuiFormHelperText:{defaultProps:{margin:"dense"}},MuiIconButton:{defaultProps:{size:"small"}},MuiInputBase:{defaultProps:{margin:"dense",size:"small"}},MuiInputLabel:{defaultProps:{margin:"dense"}},MuiListItem:{defaultProps:{dense:!0}},MuiOutlinedInput:{defaultProps:{margin:"dense"}},MuiFab:{defaultProps:{size:"small"}},MuiTable:{defaultProps:{size:"small"}},MuiTextField:{defaultProps:{margin:"dense",size:"small"}},MuiToolbar:{defaultProps:{variant:"dense"}}},palette:{background:{paper:v("--jp-layout-color1"),default:v("--jp-layout-color1")},mode:"true"===e?"light":"dark",primary:{main:v("--jp-brand-color1"),light:v("--jp-brand-color2"),dark:v("--jp-brand-color0")},error:{main:v("--jp-error-color1"),light:v("--jp-error-color2"),dark:v("--jp-error-color0")},warning:{main:v("--jp-warn-color1"),light:v("--jp-warn-color2"),dark:v("--jp-warn-color0")},success:{main:v("--jp-success-color1"),light:v("--jp-success-color2"),dark:v("--jp-success-color0")},text:{primary:v("--jp-ui-font-color1"),secondary:v("--jp-ui-font-color2"),disabled:v("--jp-ui-font-color3")}},shape:{borderRadius:2},typography:{fontFamily:v("--jp-ui-font-family"),fontSize:12,htmlFontSize:16,button:{textTransform:"capitalize"}}})}())}s(),null===(t=e.themeManager)||void 0===t||t.themeChanged.connect(s)}),[]),g().createElement(f.A,{theme:t},e.children)}function E(e){const t=d.ReactWidget.create(g().createElement(y,{themeManager:e},g().createElement(u.A,{sx:{width:"100%",height:"100%",boxSizing:"border-box",background:"var(--jp-layout-color0)",display:"flex",flexDirection:"column"}},g().createElement(u.A,{sx:{padding:4}},g().createElement(m.A,{severity:"error"},"There seems to be a problem with the Chat backend, please look at the JupyterLab server logs or contact your administrator to correct this problem.")))));return t.id="jupyter-chat::chat",t.title.icon=a,t.title.caption="Jupyter Chat",t}var _=n(7446),w=n(4087),x=n(6309),b=n(4079),M=n(5358),C=n(9578),S=n(3099),j=n(4838),A=n(4599),k=n(684),I=n(2753),R=n(9260),N=n(1656);const V="jp-chat-input-container",P="jp-chat-send-button",T="jp-chat-cancel-button";function z(e){var t;const{autocompletionName:n,autocompletionRegistry:s,sendWithShiftEnter:a}=e,i=(0,h.useRef)(),[r,o]=(0,h.useState)(e.value||""),[l,c]=(0,h.useState)([]),[d,m]=(0,h.useState)(!1),[p,f]=(0,h.useState)(!1);function v(e){"Enter"===e.key&&(d||"Enter"===e.key&&(a&&e.shiftKey||!a&&!e.shiftKey)&&(y(),e.stopPropagation(),e.preventDefault()))}function y(){o(""),e.onSend(r)}function E(){o(e.value||""),e.onCancel()}(0,h.useEffect)((()=>{void 0!==s&&(i.current=n?s.get(n):s.getDefaultCompletion(),void 0!==i.current&&(Array.isArray(i.current.commands)?c(i.current.commands):"function"==typeof i.current.commands&&i.current.commands().then((e=>{c(e)}))))}),[]),(0,h.useEffect)((()=>{var e,t;(null===(e=i.current)||void 0===e?void 0:e.opener)&&(r!==(null===(t=i.current)||void 0===t?void 0:t.opener)?""!==r||f(!1):f(!0))}),[r]);const _=e.sendWithShiftEnter?g().createElement("span",null,"Press ",g().createElement("b",null,"Shift"),"+",g().createElement("b",null,"Enter")," to send message"):g().createElement("span",null,"Press ",g().createElement("b",null,"Shift"),"+",g().createElement("b",null,"Enter")," to add a new line");return g().createElement(u.A,{sx:e.sx,className:(0,j.A)(V)},g().createElement(A.A,{options:l,value:e.value,open:p,autoHighlight:!0,freeSolo:!0,componentsProps:{popper:{placement:"top"},paper:{sx:{border:"1px solid lightgray"}}},ListboxProps:{sx:{"& .MuiAutocomplete-option":{padding:2}}},renderInput:t=>g().createElement(k.A,{...t,fullWidth:!0,variant:"outlined",multiline:!0,onKeyDown:v,placeholder:"Start chatting",InputProps:{...t.InputProps,endAdornment:g().createElement(I.A,{position:"end"},e.onCancel&&g().createElement(x.A,{size:"small",color:"primary",onClick:E,title:"Cancel edition",className:(0,j.A)(T)},g().createElement(R.A,null)),g().createElement(x.A,{size:"small",color:"primary",onClick:y,disabled:e.onCancel?r===e.value:!r.trim().length,title:"Send message "+(a?"(SHIFT+ENTER)":"(ENTER)"),className:(0,j.A)(P)},g().createElement(N.A,null)))},FormHelperTextProps:{sx:{marginLeft:"auto",marginRight:0}},helperText:r.length>2?_:" "}),...null===(t=i.current)||void 0===t?void 0:t.props,inputValue:r,onInputChange:(e,t)=>{o(t)},onHighlightChange:(e,t)=>{m(!!t)},onClose:()=>{m(!1),f(!1)},disableClearable:!0}))}var D,$=n(7628),F=n.n($),H=n(4057);!function(e){e[e.None=0]="None",e[e.Copied=1]="Copied"}(D||(D={}));const W={[D.None]:"Copy to Clipboard",[D.Copied]:"Copied!"};function B(e){const[t,n]=(0,h.useState)(D.None),s=(0,h.useCallback)((async()=>{try{await navigator.clipboard.writeText(e.value)}catch(e){return console.error("Failed to copy text: ",e),void n(D.None)}n(D.Copied),setTimeout((()=>n(D.None)),1e3)}),[e.value]);return g().createElement(u.A,{sx:{display:"flex",flexDirection:"column"}},g().createElement(H.A,{onClick:s,disabled:t!==D.None,"aria-label":"Copy To Clipboard",sx:{alignSelf:"flex-end",textTransform:"none"}},W[t]))}function L(e){const t=[];if(void 0!==e.edit){const n=(0,s.ToolbarButtonComponent)({icon:s.editIcon,onClick:e.edit,tooltip:"Edit"});t.push(n)}if(void 0!==e.delete){const n=(0,s.ToolbarButtonComponent)({icon:s.deleteIcon,onClick:e.delete,tooltip:"Delete"});t.push(n)}return g().createElement("div",{className:"jp-chat-toolbar"},t.map((e=>e)))}const U="text/markdown",O=g().memo((function(e){const t=e.appendContent||!1,[n,s]=(0,h.useState)(null),a=(0,h.useRef)(null);return(0,h.useEffect)((()=>{(async()=>{var t;const n=e.markdownStr.replace("\\(","\\\\(").replace("\\)","\\\\)").replace("\\[","\\\\[").replace("\\]","\\\\]"),i=e.rmRegistry.createModel({data:{[U]:n}}),r=e.rmRegistry.createRenderer(U);await r.renderModel(i),null===(t=e.rmRegistry.latexTypesetter)||void 0===t||t.typeset(r.node),a.current&&r.node&&r.node.querySelectorAll("pre").forEach((e=>{var t;const n=document.createElement("div");null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e.nextSibling),F().render(g().createElement(B,{value:e.textContent||""}),n)})),s(r.node)})()}),[e.markdownStr,e.rmRegistry]),g().createElement("div",{ref:a,className:"jp-chat-rendermime-markdown"},n&&(t?g().createElement("div",{ref:e=>e&&e.appendChild(n)}):g().createElement("div",{ref:e=>e&&e.replaceChildren(n)})),g().createElement(L,{edit:e.edit,delete:e.delete}))}));function J(e){const t=(0,h.useMemo)((()=>"jupyter-chat-scroll-container-"+Date.now().toString()),[]);return g().createElement(u.A,{id:t,sx:{overflowY:"scroll","& *":{overflowAnchor:"none"},...e.sx}},g().createElement(u.A,{sx:{minHeight:"100.01%"}},e.children),g().createElement(u.A,{sx:{overflowAnchor:"auto",height:"1px"}}))}const G="jp-chat-messages-container",K="jp-chat-message",Y="jp-chat-message-stacked",q="jp-chat-message-header",Z="jp-chat-message-time",Q="jp-chat-navigation",X="jp-chat-navigation-unread",ee="jp-chat-navigation-top",te="jp-chat-navigation-bottom";function ne(e){const{model:t}=e,[n,s]=(0,h.useState)(t.messages),a=(0,h.useRef)(null),i=(0,h.useRef)([]),r=(0,h.useRef)(new IntersectionObserver((function(n){const s=[...t.unreadMessages];let a=!1;return n.forEach((e=>{var t;const n=parseInt(null!==(t=e.target.getAttribute("data-index"))&&void 0!==t?t:"");if(!isNaN(n)){if(s.length){const t=s.indexOf(n);-1!==t&&e.isIntersecting&&(s.splice(t,1),a=!0)}const t=i.current.indexOf(n);e.isIntersecting||-1===t?e.isIntersecting&&-1===t&&i.current.push(n):i.current.splice(t,1)}})),e.model.messagesInViewport=i.current,a&&(e.model.unreadMessages=s),()=>{var e;null===(e=r.current)||void 0===e||e.disconnect()}})));return(0,h.useEffect)((()=>{!async function(){t.getHistory&&t.getHistory().then((e=>s(e.messages))).catch((e=>console.error(e)))}()}),[t]),(0,h.useEffect)((()=>{function e(e){s([...t.messages])}return t.messagesUpdated.connect(e),function(){t.messagesUpdated.disconnect(e)}}),[t]),g().createElement(g().Fragment,null,g().createElement(J,{sx:{flexGrow:1}},g().createElement(u.A,{ref:a,className:(0,j.A)(G)},n.map(((t,n)=>g().createElement(u.A,{key:n,className:(0,j.A)(K,t.stacked?Y:"")},g().createElement(se,{message:t}),g().createElement(ae,{...e,message:t,observer:r.current,index:n})))))),g().createElement(ie,{...e,refMsgBox:a}))}function se(e){var t,n;const[s,a]=(0,h.useState)({}),i={height:"24px",width:"24px"},r=e.message,o=r.sender;(0,h.useEffect)((()=>{if(!s[r.time]){const e={};let t;const n=new Date,s=e=>e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate(),i=new Date(1e3*r.time);t=s(i)?i.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):i.toLocaleString([],{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),e[r.time]=t,a(e)}}));const l=o.color,c=r.stacked?null:o.avatar_url?g().createElement(C.A,{sx:{...i,...l&&{bgcolor:l}},src:o.avatar_url}):o.initials?g().createElement(C.A,{sx:{...i,...l&&{bgcolor:l}}},g().createElement(S.A,{sx:{fontSize:"var(--jp-ui-font-size1)",color:"var(--jp-ui-inverse-font-color1)"}},o.initials)):null,d=null!==(n=null!==(t=o.display_name)&&void 0!==t?t:o.name)&&void 0!==n?n:o.username||"User undefined";return g().createElement(u.A,{className:q,sx:{display:"flex",alignItems:"center","& > :not(:last-child)":{marginRight:3},marginBottom:r.stacked?"0px":"12px",...e.sx}},c,g().createElement(u.A,{sx:{display:"flex",flexGrow:1,flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"}},g().createElement(u.A,{sx:{display:"flex",alignItems:"center"}},!r.stacked&&g().createElement(S.A,{sx:{fontWeight:700,color:"var(--jp-ui-font-color1)",paddingRight:"0.5em"}},d),(r.deleted||r.edited)&&g().createElement(S.A,{sx:{fontStyle:"italic",fontSize:"var(--jp-content-font-size0)"}},r.deleted?"(message deleted)":"(edited)")),g().createElement(S.A,{className:Z,sx:{fontSize:"0.8em",color:"var(--jp-ui-font-color2)",fontWeight:300},title:r.raw_time?"Unverified time":""},`${s[r.time]}${r.raw_time?"*":""}`)))}function ae(e){var t;const{message:n,model:s,rmRegistry:a}=e,i=(0,h.useRef)(null),[r,o]=(0,h.useState)(!1),[l,c]=(0,h.useState)(!1),[d,u]=(0,h.useState)(!1),[m,p]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{var t;if(null!==i.current)return null===(t=e.observer)||void 0===t||t.observe(i.current),()=>{var t;null!==i.current&&(null===(t=e.observer)||void 0===t||t.unobserve(i.current))}}),[s]),(0,h.useEffect)((()=>{var e;c(null!==(e=n.deleted)&&void 0!==e&&e),void 0===s.user||n.deleted?(u(!1),p(!1)):s.user.username===n.sender.username&&(u(void 0!==s.updateMessage),p(void 0!==s.deleteMessage))}),[s,n]),l?g().createElement("div",{ref:i,"data-index":e.index}):g().createElement("div",{ref:i,"data-index":e.index},r&&d?g().createElement(z,{value:n.body,onSend:e=>((e,t)=>{if(!d)return;const a={...n};a.body=t,s.updateMessage(e,a),o(!1)})(n.id,e),onCancel:()=>{o(!1)},sendWithShiftEnter:null!==(t=s.config.sendWithShiftEnter)&&void 0!==t&&t}):g().createElement(O,{rmRegistry:a,markdownStr:n.body,edit:d?()=>o(!0):void 0,delete:m?()=>{return e=n.id,void(m&&s.deleteMessage(e));var e}:void 0}))}function ie(e){const{model:t}=e,[n,a]=(0,h.useState)(!0),[i,r]=(0,h.useState)(null),[o,l]=(0,h.useState)(null),c=t=>{var n,s;null===(s=null===(n=e.refMsgBox.current)||void 0===n?void 0:n.children.item(t))||void 0===s||s.scrollIntoView()};return(0,h.useEffect)((()=>{var e;const n=(e,t)=>{const n=e.messagesInViewport;if(!n)return;let s=null!==i&&t.includes(i)&&i<Math.min(...n)?i:null,a=null!==o&&t.includes(o)&&o>Math.max(...n)?o:null;t.forEach((t=>{(null==n?void 0:n.includes(t))||(t<(null!=s?s:Math.min(...n))?s=t:t>Math.max(...n)&&t<(null!=a?a:e.messages.length)&&(a=t))})),r(s),l(a)};return null===(e=t.unreadChanged)||void 0===e||e.connect(n),n(t,t.unreadMessages),t.unreadMessages.length?c(Math.min(...t.unreadMessages)):c(t.messages.length-1),()=>{var e;null===(e=t.unreadChanged)||void 0===e||e.disconnect(n)}}),[t]),(0,h.useEffect)((()=>{var e,n;const s=(e,t)=>{a(t.includes(e.messages.length-1))};return null===(e=t.viewportChanged)||void 0===e||e.connect(s),s(t,null!==(n=t.messagesInViewport)&&void 0!==n?n:[]),()=>{var e;null===(e=t.viewportChanged)||void 0===e||e.disconnect(s)}}),[t]),g().createElement(g().Fragment,null,null!==i&&g().createElement(M.Button,{className:`${Q} ${X} ${ee}`,onClick:()=>c(i),title:"Go to unread messages"},g().createElement(s.LabIcon.resolveReact,{display:"flex",icon:s.caretDownEmptyIcon,iconClass:(0,s.classes)("jp-Icon")})),(null!==o||!n)&&g().createElement(M.Button,{className:`${Q} ${null!==o?X:""} ${te}`,onClick:()=>c(null!==o?o:t.messages.length-1),title:null!==o?"Go to unread messages":"Go to last message"},g().createElement(s.LabIcon.resolveReact,{display:"flex",icon:s.caretDownEmptyIcon,iconClass:(0,s.classes)("jp-Icon")})))}function re(e){var t;const{model:n,rmRegistry:s,autocompletionRegistry:a}=e;return g().createElement(g().Fragment,null,g().createElement(ne,{rmRegistry:s,model:n}),g().createElement(z,{onSend:async e=>{n.addMessage({body:e})},sx:{paddingLeft:4,paddingRight:4,paddingTop:3.5,paddingBottom:0,borderTop:"1px solid var(--jp-border-color1)"},sendWithShiftEnter:null!==(t=n.config.sendWithShiftEnter)&&void 0!==t&&t,autocompletionRegistry:a}))}function oe(e){var t;const[n,s]=(0,h.useState)(e.chatView||oe.View.chat);return g().createElement(y,{themeManager:null!==(t=e.themeManager)&&void 0!==t?t:null},g().createElement(b.A,{sx:{width:"100%",height:"100%",boxSizing:"border-box",background:"var(--jp-layout-color0)",display:"flex",flexDirection:"column"}},g().createElement(b.A,{sx:{display:"flex",justifyContent:"space-between"}},n!==oe.View.chat?g().createElement(x.A,{onClick:()=>s(oe.View.chat)},g().createElement(_.A,null)):g().createElement(b.A,null),n!==oe.View.settings&&e.settingsPanel?g().createElement(x.A,{onClick:()=>s(oe.View.settings)},g().createElement(w.A,null)):g().createElement(b.A,null)),n===oe.View.chat&&g().createElement(re,{model:e.model,rmRegistry:e.rmRegistry,autocompletionRegistry:e.autocompletionRegistry}),n===oe.View.settings&&e.settingsPanel&&g().createElement(e.settingsPanel,null)))}function le(e){const t=d.ReactWidget.create(g().createElement(oe,{...e}));return t.id="jupyter-chat::side-panel",t.title.icon=a,t.title.caption="Jupyter Chat",t}!function(e){let t;!function(e){e[e.chat=0]="chat",e[e.settings=1]="settings"}(t=e.View||(e.View={}))}(oe||(oe={}));class ce extends d.ReactWidget{constructor(e){super(),this.id="jupyter-chat::widget",this.title.icon=a,this.title.caption="Jupyter Chat",this._chatOptions=e}get model(){return this._chatOptions.model}render(){return g().createElement(oe,{...this._chatOptions,model:this._chatOptions.model})}}}}]);