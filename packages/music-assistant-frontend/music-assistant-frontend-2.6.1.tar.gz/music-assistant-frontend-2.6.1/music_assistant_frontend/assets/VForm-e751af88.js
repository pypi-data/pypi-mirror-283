import{m as me,V as $}from"./VTextField-bd94c9e9.js";import{K as Y,L as E,l as _,ay as ve,D as pe,m as G,J as he,r as B,A as j,z as x,aK as z,f as r,F as O,E as R,aR as ye,X as Ve,aS as ge,T as be,aT as W}from"./index-2cc203e3.js";import{j as ke,e as we,a as Pe,k as Ce,l as xe}from"./VCheckboxBtn-682ecc08.js";import{h as Se,V as De,f as Q}from"./VMenu-d17aeffc.js";import{m as Fe,b as Te,a as Re}from"./VList-443b6a64.js";import{N as Ae,c as Z,V as J,B as Ie,w as X,K as Be,m as Le}from"./VListItem-0e8aff4c.js";import{V as Ke}from"./VVirtualScroll-c8cd8ef4.js";function Oe(e,A){const n=Y(!1);let b;function c(i){cancelAnimationFrame(b),n.value=!0,b=requestAnimationFrame(()=>{b=requestAnimationFrame(()=>{n.value=!1})})}async function k(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(n.value){const l=E(n,()=>{l(),i()})}else i()})}async function w(i){var p,S;if(i.key==="Tab"&&((p=A.value)==null||p.focus()),!["PageDown","PageUp","Home","End"].includes(i.key))return;const l=(S=e.value)==null?void 0:S.$el;if(!l)return;(i.key==="Home"||i.key==="End")&&l.scrollTo({top:i.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await k();const d=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const o=l.getBoundingClientRect().top;for(const V of d)if(V.getBoundingClientRect().top>=o){V.focus();break}}else{const o=l.getBoundingClientRect().bottom;for(const V of[...d].reverse())if(V.getBoundingClientRect().bottom<=o){V.focus();break}}}return{onListScroll:c,onListKeydown:w}}const Ee=_({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ve,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Fe({itemChildren:!1})},"Select"),_e=_({...Ee(),...pe(me({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ae({transition:{component:Se}})},"VSelect"),We=G()({name:"VSelect",props:_e(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,A){let{slots:n}=A;const{t:b}=he(),c=B(),k=B(),w=B(),i=j(e,"menu"),l=x({get:()=>i.value,set:t=>{var a;i.value&&!t&&((a=k.value)!=null&&a.Î¨openChildren)||(i.value=t)}}),{items:d,transformIn:p,transformOut:S}=Te(e),o=j(e,"modelValue",[],t=>p(t===null?[null]:ge(t)),t=>{const a=S(t);return e.multiple?a:a[0]??null}),V=x(()=>typeof e.counterValue=="function"?e.counterValue(o.value):typeof e.counterValue=="number"?e.counterValue:o.value.length),D=ke(),ee=x(()=>o.value.map(t=>t.value)),P=Y(!1),H=x(()=>l.value?e.closeText:e.openText);let K="",M;const F=x(()=>e.hideSelected?d.value.filter(t=>!o.value.some(a=>e.valueComparator(a,t))):d.value),N=x(()=>e.hideNoData&&!F.value.length||e.readonly||(D==null?void 0:D.isReadonly.value)),te=x(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),I=B(),{onListScroll:ne,onListKeydown:le}=Oe(I,c);function ae(t){e.openOnClear&&(l.value=!0)}function oe(){N.value||(l.value=!l.value)}function ue(t){var u,h;if(!t.key||e.readonly||D!=null&&D.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(l.value=!0),["Escape","Tab"].includes(t.key)&&(l.value=!1),t.key==="Home"?(u=I.value)==null||u.focus("first"):t.key==="End"&&((h=I.value)==null||h.focus("last"));const a=1e3;function f(s){const y=s.key.length===1,m=!s.ctrlKey&&!s.metaKey&&!s.altKey;return y&&m}if(e.multiple||!f(t))return;const C=performance.now();C-M>a&&(K=""),K+=t.key.toLowerCase(),M=C;const g=d.value.find(s=>s.title.toLowerCase().startsWith(K));if(g!==void 0){o.value=[g];const s=F.value.indexOf(g);z&&window.requestAnimationFrame(()=>{var y;s>=0&&((y=w.value)==null||y.scrollToIndex(s))})}}function L(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const f=o.value.findIndex(g=>e.valueComparator(g.value,t.value)),C=a??!~f;if(~f){const g=C?[...o.value,t]:[...o.value];g.splice(f,1),o.value=g}else C&&(o.value=[...o.value,t])}else{const f=a!==!1;o.value=f?[t]:[],be(()=>{l.value=!1})}}function ie(t){var a;(a=I.value)!=null&&a.$el.contains(t.relatedTarget)||(l.value=!1)}function se(){var t;P.value&&((t=c.value)==null||t.focus())}function re(t){P.value=!0}function ce(t){if(t==null)o.value=[];else if(W(c.value,":autofill")||W(c.value,":-webkit-autofill")){const a=d.value.find(f=>f.title===t);a&&L(a)}else c.value&&(c.value.value="")}return E(l,()=>{if(!e.hideSelected&&l.value&&o.value.length){const t=F.value.findIndex(a=>o.value.some(f=>e.valueComparator(f.value,a.value)));z&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=w.value)==null||a.scrollToIndex(t))})}}),E(()=>e.items,(t,a)=>{l.value||P.value&&!a.length&&t.length&&(l.value=!0)}),Z(()=>{const t=!!(e.chips||n.chip),a=!!(!e.hideNoData||F.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),f=o.value.length>0,C=$.filterProps(e),g=f||!P.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return r($,R({ref:c},C,{modelValue:o.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":ce,focused:P.value,"onUpdate:focused":u=>P.value=u,validationValue:o.externalValue,counterValue:V.value,dirty:f,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":o.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:g,"onClick:clear":ae,"onMousedown:control":oe,onBlur:ie,onKeydown:ue,"aria-label":b(H.value),title:b(H.value)}),{...n,default:()=>r(O,null,[r(De,R({ref:k,modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,activator:"parent",contentClass:"v-select__content",disabled:N.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:se},te.value),{default:()=>[a&&r(Re,R({ref:I,selected:ee.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:le,onFocusin:re,onScrollPassive:ne,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var u,h,s;return[(u=n["prepend-item"])==null?void 0:u.call(n),!F.value.length&&!e.hideNoData&&(((h=n["no-data"])==null?void 0:h.call(n))??r(J,{title:b(e.noDataText)},null)),r(Ke,{ref:w,renderless:!0,items:F.value},{default:y=>{var U;let{item:m,index:T,itemRef:v}=y;const q=R(m.props,{ref:v,key:T,onClick:()=>L(m,null)});return((U=n.item)==null?void 0:U.call(n,{item:m,index:T,props:q}))??r(J,R(q,{role:"option"}),{prepend:de=>{let{isSelected:fe}=de;return r(O,null,[e.multiple&&!e.hideSelected?r(we,{key:m.value,modelValue:fe,ripple:!1,tabindex:"-1"},null):void 0,m.props.prependAvatar&&r(Ie,{image:m.props.prependAvatar},null),m.props.prependIcon&&r(X,{icon:m.props.prependIcon},null)])}})}}),(s=n["append-item"])==null?void 0:s.call(n)]}})]}),o.value.map((u,h)=>{function s(v){v.stopPropagation(),v.preventDefault(),L(u,!1)}const y={"onClick:close":s,onKeydown(v){v.key!=="Enter"&&v.key!==" "||(v.preventDefault(),v.stopPropagation(),s(v))},onMousedown(v){v.preventDefault(),v.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},m=t?!!n.chip:!!n.selection,T=m?ye(t?n.chip({item:u,index:h,props:y}):n.selection({item:u,index:h})):void 0;if(!(m&&!T))return r("div",{key:u.value,class:"v-select__selection"},[t?n.chip?r(Be,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>[T]}):r(Pe,R({key:"chip",closable:e.closableChips,size:"small",text:u.title,disabled:u.props.disabled},y),null):T??r("span",{class:"v-select__selection-text"},[u.title,e.multiple&&h<o.value.length-1&&r("span",{class:"v-select__selection-comma"},[Ve(",")])])])})]),"append-inner":function(){var y;for(var u=arguments.length,h=new Array(u),s=0;s<u;s++)h[s]=arguments[s];return r(O,null,[(y=n["append-inner"])==null?void 0:y.call(n,...h),e.menuIcon?r(X,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Q({isFocused:P,menu:l,select:L},c)}}),He=_({...Le(),...Ce()},"VForm"),Je=G()({name:"VForm",props:He(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,A){let{slots:n,emit:b}=A;const c=xe(e),k=B();function w(l){l.preventDefault(),c.reset()}function i(l){const d=l,p=c.validate();d.then=p.then.bind(p),d.catch=p.catch.bind(p),d.finally=p.finally.bind(p),b("submit",d),d.defaultPrevented||p.then(S=>{var V;let{valid:o}=S;o&&((V=k.value)==null||V.submit())}),d.preventDefault()}return Z(()=>{var l;return r("form",{ref:k,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:w,onSubmit:i},[(l=n.default)==null?void 0:l.call(n,c)])}),Q(c,k)}});export{Je as V,We as a};
