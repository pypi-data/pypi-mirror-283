import{d as T,as as Y,r as F,b as n,a8 as I,a as U,z as G,P as y,L as z,c as i,g as u,f as r,w as o,X as P,t as c,e as l,E as D,F as C,h,j as k,u as m,i as V}from"./index-9299e1c1.js";import{_ as E,e as O}from"./eventbus-fb52ce0b.js";import{B as M}from"./Button-784539f4.js";import{L as S}from"./ListItem-50af6ebb.js";import{C as X}from"./Container-ff473259.js";import{s as j,V as x,w}from"./VListItem-748fc7af.js";import{V as W}from"./VCard-6d87d169.js";import{V as q}from"./VMenu-02b91385.js";import{V as H}from"./VToolbar-2949cae0.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css              */import"./VCardText-7bb4efb6.js";const J={style:{"margin-bottom":"10px"}},K={class:"line-clamp-1"},Q={class:"line-clamp-1"},ue=T({__name:"Players",setup(Z){const _=Y(),d=F([]),A=n.subscribe_multi([I.PLAYER_CONFIG_UPDATED],()=>{b()});U(A);const f=G(()=>Object.values(n.providers).filter(e=>e.available&&e.supported_features.includes(y.PLAYER_GROUP_CREATE)||e.supported_features.includes(y.SYNC_PLAYERS)).sort((e,t)=>(e.name||n.providerManifests[e.domain].name).toUpperCase()>(t.name||n.providerManifests[t.domain].name).toUpperCase()?1:-1)),b=async function(){d.value=(await n.getPlayerConfigs()).sort((e,t)=>p(e).localeCompare(p(t)))},L=function(e){n.removePlayerConfig(e),d.value=d.value.filter(t=>t.player_id!=e)},g=function(e){e in n.players&&_.push(`/settings/editplayer/${e}`)},$=function(e){_.push(`/settings/addgroup/${e}`)},B=function(e){e.enabled=!e.enabled,n.savePlayerConfig(e.player_id,{enabled:e.enabled})},p=function(e){var t;return e.name||((t=n.players[e.player_id])==null?void 0:t.display_name)||e.default_name||e.player_id},N=function(e){window.open(e,"_blank")},R=function(e,t){var s;const a=[{label:"settings.configure",labelArgs:[],action:()=>{g(t.player_id)},icon:"mdi-cog",disabled:!n.getProvider(t.provider)},{label:t.enabled?"settings.disable":"settings.enable",labelArgs:[],action:()=>{B(t)},icon:"mdi-cancel",disabled:!n.getProvider(t.provider)},{label:"settings.documentation",labelArgs:[],action:()=>{var v;N(((v=n.getProviderManifest(t.provider))==null?void 0:v.documentation)||"")},icon:"mdi-bookshelf",disabled:!((s=n.getProviderManifest(t.provider))!=null&&s.documentation)},{label:"settings.delete",labelArgs:[],action:()=>{L(t.player_id)},icon:"mdi-delete"}];O.emit("contextmenu",{items:a,posX:e.clientX,posY:e.clientY})};return z(()=>n.players,e=>{e&&b()},{immediate:!0}),(e,t)=>(i(),u("div",J,[r(H,{density:"compact",class:"titlebar",color:"transparent",style:{height:"55px"}},{title:o(()=>[P(c(e.$t("settings.players")),1)]),append:o(()=>[f.value.length?(i(),l(q,{key:0,scrim:""},{activator:o(({props:a})=>[r(j,D(a,{color:"accent",variant:"outlined"}),{default:o(()=>[P(c(e.$t("settings.add_group_player")),1)]),_:2},1040)]),default:o(()=>[r(W,null,{default:o(()=>[(i(!0),u(C,null,h(f.value,a=>(i(),l(x,{key:a.instance_id,style:{"padding-top":"0","padding-bottom":"0","margin-bottom":"0"},title:a.name,onClick:s=>$(a.instance_id)},{prepend:o(()=>[r(E,{domain:a.domain,size:26,class:"media-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})):k("",!0)]),_:1}),r(X,null,{default:o(()=>[(i(!0),u(C,null,h(d.value,a=>(i(),l(S,{key:a.player_id,"show-menu-btn":"",link:"",onMenu:s=>R(s,a),onClick:s=>g(a.player_id)},{prepend:o(()=>{var s;return[r(E,{domain:((s=m(n).getProviderManifest(a.provider))==null?void 0:s.domain)||"",size:40,class:"listitem-media-thumb"},null,8,["domain"])]}),title:o(()=>[V("div",K,c(p(a)),1)]),subtitle:o(()=>{var s;return[V("div",Q,c(((s=m(n).getProviderManifest(a.provider))==null?void 0:s.name)||a.provider),1)]}),append:o(()=>{var s;return[a.enabled?(s=m(n).players[a.player_id])!=null&&s.available?k("",!0):(i(),l(M,{key:1,icon:"",title:e.$t("settings.player_not_available")},{default:o(()=>[r(w,{icon:"mdi-timer-sand"})]),_:1},8,["title"])):(i(),l(M,{key:0,icon:"",title:e.$t("settings.player_disabled")},{default:o(()=>[r(w,{icon:"mdi-cancel"})]),_:1},8,["title"]))]}),_:2},1032,["onMenu","onClick"]))),128))]),_:1})]))}});export{ue as default};
