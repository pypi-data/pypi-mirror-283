"use strict";(self.webpackChunkephemeral_notebooks=self.webpackChunkephemeral_notebooks||[]).push([[509],{509:(o,e,t)=>{t.r(e),t.d(e,{default:()=>d});var n=t(212),a=t(751),c=t(262),r=t(902),s=t(110),l=t(811);let i=null;const d={id:"urlify-nb",autoStart:!0,requires:[l.IFileBrowserFactory,a.IRouter,r.INotebookTracker],activate:async(o,e,t,a)=>{try{console.log("Activating ephemeral-notebooks extension"),t.register({command:"notebook:start-nav",pattern:/(tempNotebook=1)/,rank:20}),function(o,e){const t=new s.ToolbarButton({label:"Save to URL",onClick:()=>{const o=e.currentWidget;o&&function(o){const e=JSON.stringify(o.context.model.toJSON()),t=n.compressToEncodedURIComponent(e),a=new URL(window.location.href);a.pathname.includes("retro/notebooks/index.html")&&(a.pathname=a.pathname.replace("retro/notebooks/index.html","lab/index.html")),a.hash=`notebook=${t}`,a.searchParams.set("tempNotebook","1"),a.searchParams.set("path","temp.ipynb"),console.log("new url",a,a.toString());const c=a.toString();s.Clipboard.copyToSystem(c)}(o)},tooltip:"Save notebook content to URL and copy to clipboard"});e.widgetAdded.connect(((o,e)=>{e.toolbar.insertItem(10,"saveToUrl",t)}))}(0,a),function(){const o=new URLSearchParams(window.location.hash.slice(1));i=o,console.log("Saved URL parameters:",i.toString())}(),await function(o,e,t){if(t){function a(o){const e=new URL(window.location.href),t=window.location.href.match(/(.*\/)lab\/index\.html/);let n=(t?t[1]:"")+`notebooks/index.html?path=${o}&${o}&${e.search}&${e.hash}`;window.location.href=n}o.commands.addCommand("notebook:start-nav",{label:"Open Temp Notebook from URL",execute:async e=>{const{request:n}=e,a=new URL(`http://example.com${n}`).searchParams.get("tempNotebook"),c=async()=>{t.routed.disconnect(c),a&&"1"==a&&await o.commands.execute("notebook:open-temp",{})};t.routed.connect(c)}}),o.commands.addCommand("notebook:open-temp",{label:"Open Temporary Notebook",execute:async t=>{var r,s;const l=null!==(r=null==e?void 0:e.tracker.currentWidget)&&void 0!==r?r:e.defaultBrowser,d=t.cwd||(null!==(s=null==l?void 0:l.model.path)&&void 0!==s?s:""),m=t.kernelId||"",p=t.kernelName||"",u=await(async(e,t,r)=>{const s=await o.commands.execute("docmanager:new-untitled",{path:e,type:"notebook"});if(console.log("created model",s),void 0!==s){const e=await o.commands.execute("docmanager:open",{path:s.path,factory:"Notebook",kernel:{id:t,name:r}});e.isUntitled=!0;const l=`temp-notebook-${c.UUID.uuid4()}`;await e.context.rename(l+".ipynb");const d=function(){if(i){const o=i.get("notebook");if(o){const e=n.decompressFromEncodedURIComponent(o),t=JSON.parse(e);return console.log("decompressedContent",t),t}}return null}();if(d){const o=e.context.model;console.log("model",o),o.fromJSON(d),await e.context.save(),console.log("Notebook content saved.")}return a(e.context.path),e}})(d,m,p);console.log("created model",u,d,"kernel",m,"kernelName",p)}})}}(o,e,t),console.log("ephemeral-notebooks extension activated successfully")}catch(o){console.error("Error activating ephemeral-notebooks extension:",o)}}}}}]);