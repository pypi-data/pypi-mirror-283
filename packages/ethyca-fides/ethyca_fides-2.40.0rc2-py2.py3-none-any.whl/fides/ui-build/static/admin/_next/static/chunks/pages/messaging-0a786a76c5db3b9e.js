(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2815],{68512:function(e,t,n){"use strict";var r=n(90849),i=n(28841),s=n(88038),a=n.n(s),o=(n(27378),n(24246));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.children,n=e.title,r=e.mainProps;return(0,o.jsxs)(i.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 200px)",children:[(0,o.jsxs)(a(),{children:[(0,o.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,o.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)(i.kCb,u(u({pt:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0},r),{},{children:t}))]})}},28171:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(90849),i=n(90089),s=n(28841),a=n(98784),o=n(27378),c=n(79894),u=n.n(c),l=n(24246),p=function(e){var t=e.breadcrumbs;return(0,l.jsx)(s.aGc,{separator:"->",fontSize:"2xl",fontWeight:"semibold","data-testid":"breadcrumbs",children:t.map((function(e,n){var r=n+1===t.length,i=!!e.link||!!e.onClick;return(0,l.jsx)(s.gN6,{color:r||e.isOpaque?"black":"gray.500",children:i?(0,l.jsx)(s.Atw,{as:u(),href:e.link,isCurrentPage:r,children:e.title}):(0,l.jsx)(s.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:r,children:e.title})},e.title)}))})},d=["breadcrumbs","isSticky","children"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=e.breadcrumbs,n=e.isSticky,r=void 0===n||n,c=e.children,u=(0,i.Z)(e,d);return(0,l.jsxs)(s.xuv,m(m(m({bgColor:"white",paddingY:5},r?{position:"sticky",top:0,left:0,zIndex:10}:{}),u),{},{children:[(0,a.isArray)(t)&&(0,l.jsx)(s.xuv,{marginBottom:c?4:0,children:(0,l.jsx)(p,{breadcrumbs:t})}),(0,o.isValidElement)(t)&&t,c]}))}},6887:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r,i,s=n(90849);!function(e){e.PRIVACY_REQUEST_REVIEW_APPROVE="privacy_request_review_approve",e.PRIVACY_REQUEST_REVIEW_DENY="privacy_request_review_deny",e.PRIVACY_REQUEST_RECEIPT="privacy_request_receipt",e.PRIVACY_REQUEST_COMPLETE_ACCESS="privacy_request_complete_access",e.PRIVACY_REQUEST_COMPLETE_DELETION="privacy_request_complete_deletion",e.SUBJECT_IDENTITY_VERIFICATION="subject_identity_verification"}(r||(r={}));var a=(i={},(0,s.Z)(i,r.PRIVACY_REQUEST_COMPLETE_ACCESS,"Access request completed"),(0,s.Z)(i,r.PRIVACY_REQUEST_COMPLETE_DELETION,"Erasure request completed"),(0,s.Z)(i,r.PRIVACY_REQUEST_RECEIPT,"Privacy request received"),(0,s.Z)(i,r.PRIVACY_REQUEST_REVIEW_APPROVE,"Privacy request approved"),(0,s.Z)(i,r.PRIVACY_REQUEST_REVIEW_DENY,"Privacy request denied"),(0,s.Z)(i,r.SUBJECT_IDENTITY_VERIFICATION,"Subject identity verification"),i)},16436:function(e,t,n){"use strict";n.d(t,{KC:function(){return u},Vw:function(){return l},ew:function(){return p},gQ:function(){return o},jM:function(){return i},lE:function(){return s},ms:function(){return a},pS:function(){return c},vm:function(){return d}});var r=n(28703).u.injectEndpoints({endpoints:function(e){return{getMessagingTemplates:e.query({query:function(){return{url:"messaging/templates"}},providesTags:function(){return["Messaging Templates"]}}),getSummaryMessagingTemplates:e.query({query:function(e){return{method:"GET",url:"messaging/templates/summary",params:e}},providesTags:function(){return["Property-Specific Messaging Templates"]}}),updateMessagingTemplates:e.mutation({query:function(e){return{url:"messaging/templates",method:"PUT",body:e}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),getMessagingTemplateById:e.query({query:function(e){return{url:"/messaging/templates/".concat(e)}},providesTags:function(){return["Property-Specific Messaging Templates"]}}),putMessagingTemplateById:e.mutation({query:function(e){var t=e.templateId,n=e.template;return{url:"/messaging/templates/".concat(t),method:"PUT",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),patchMessagingTemplateById:e.mutation({query:function(e){var t=e.templateId,n=e.template;return{url:"/messaging/templates/".concat(t),method:"PATCH",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),getMessagingTemplateDefault:e.query({query:function(e){return{url:"/messaging/templates/default/".concat(e)}}}),createMessagingTemplateByType:e.mutation({query:function(e){var t=e.templateType,n=e.template;return{url:"/messaging/templates/".concat(t),method:"POST",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),deleteMessagingTemplateById:e.mutation({query:function(e){return{url:"/messaging/templates/".concat(e),method:"DELETE"}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}})}}}),i=r.useGetMessagingTemplatesQuery,s=r.useUpdateMessagingTemplatesMutation,a=r.useGetSummaryMessagingTemplatesQuery,o=r.useGetMessagingTemplateByIdQuery,c=r.usePutMessagingTemplateByIdMutation,u=r.useGetMessagingTemplateDefaultQuery,l=r.useCreateMessagingTemplateByTypeMutation,p=r.useDeleteMessagingTemplateByIdMutation,d=r.usePatchMessagingTemplateByIdMutation},34519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(55732),i=n(90849),s=n(34707),a=n.n(s),o=n(92222),c=n(59003),u=n(28841),l=n(98784),p=n(86677),d=n(27378),g=n(68512),m=n(60709),f=n(28171),y=n(49938),h=n(74385),b=n(58981),v=n(43139),x=n(6887),j=n(24246),P=function(e){var t=e.isOpen,n=e.onClose,r=e.onAccept,i=(0,d.useState)(void 0),s=i[0],a=i[1],o=Object.keys(x.Z).map((function(e){return{value:e,label:x.Z[e]}}));return(0,j.jsxs)(u.u_l,{isOpen:t,onClose:n,size:"2xl",isCentered:!0,children:[(0,j.jsx)(u.ZAr,{}),(0,j.jsxs)(u.hzk,{"data-testid":"add-messaging-template-modal",children:[(0,j.jsx)(u.xBx,{borderBottomWidth:1,fontWeight:"bold",children:"Select message template"}),(0,j.jsxs)(u.fef,{children:[(0,j.jsx)(u.xvT,{color:"gray.700",fontWeight:"medium",fontSize:"sm",marginBottom:3,marginTop:1,children:"Add a new email message by selecting a template below and clicking accept."}),(0,j.jsx)(u.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"medium",marginBottom:2,children:"Choose template:"}),(0,j.jsx)(u.xuv,{"data-testid":"template-type-selector",children:(0,j.jsx)(b.Z,{options:o,size:"sm",chakraStyles:v.hP,onChange:function(e){a(null===e||void 0===e?void 0:e.value)},classNamePrefix:"custom-select"})})]}),(0,j.jsx)(u.mzw,{justifyContent:"flex-start",children:(0,j.jsxs)(u.hE2,{size:"sm",display:"flex",justifyItems:"stretch",w:"full",children:[(0,j.jsx)(u.zxk,{variant:"outline",mr:2,onClick:n,"data-testid":"cancel-btn",size:"md",flex:1,children:"Cancel"}),(0,j.jsx)(u.zxk,{size:"md",colorScheme:"primary",bgColor:"primary.800",onClick:function(){return r(s)},"data-testid":"confirm-btn",disabled:!s,flex:1,children:"Next"})]})})]})]})},E=n(16436),T=n(97865),O=n(78624),_=n(24753),C=n(33167),w=function(){var e=(0,u.pmc)(),t=(0,E.vm)(),n=(0,T.Z)(t,1)[0],i=function(){var t=(0,r.Z)(a().mark((function t(r){var i,s,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.isEnabled,s=r.templateId,t.next=3,n({templateId:s,template:{is_enabled:i}});case 3:if(o=t.sent,!(0,C.isErrorResult)(o)){t.next=7;break}return e((0,_.Vo)((0,O.e$)(o.error))),t.abrupt("return");case 7:e((0,_.t5)("Messaging template ".concat(i?"enabled":"disabled")));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{toggleIsTemplateEnabled:i}};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=(0,o.Cl)(),M={items:[],total:0,page:1,size:50,pages:1},k=function(){return(0,j.jsx)(u.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,j.jsxs)(u.gCW,{children:[(0,j.jsx)(u.xvT,{fontSize:"md",fontWeight:"600",children:"It looks like it\u2019s your first time here!"}),(0,j.jsxs)(u.xvT,{fontSize:"sm",children:["Add new email templates with the ",'"Add message +"'," button.",(0,j.jsx)("br",{})]})]})})},A=function(){var e=(0,p.useRouter)(),t=w().toggleIsTemplateEnabled,n=(0,y.oi)(),i=n.PAGE_SIZES,s=n.pageSize,b=n.setPageSize,v=n.onPreviousPageClick,T=n.isPreviousPageDisabled,O=n.onNextPageClick,_=n.isNextPageDisabled,C=n.startRange,S=n.endRange,A=n.pageIndex,D=n.setTotalPages,q=(0,E.ms)({page:A,size:s}),z=q.data,Z=q.isLoading,V=q.isFetching,N=(0,d.useMemo)((function(){return null!==z&&void 0!==z?z:M}),[z]),B=N.items,U=N.total,Q=N.pages;(0,d.useEffect)((function(){D(Q)}),[Q,D]);var W=(0,d.useState)(!1),Y=W[0],L=W[1],G=(0,d.useMemo)((function(){return[R.accessor((function(e){return e.type}),{id:"message",cell:function(e){return(0,j.jsx)(y.G3,{value:x.Z[e.getValue()]})},header:function(e){return(0,j.jsx)(y.Rr,I({value:"Message"},e))},size:150}),R.accessor((function(e){return(e.properties||[]).map((function(e){return e.name}))}),{id:"properties",cell:function(e){return(0,j.jsx)(y.WP,I({suffix:"properties",value:e.getValue()},e))},header:function(e){return(0,j.jsx)(y.Rr,I({value:"Properties"},e))},meta:{displayText:"Properties",showHeaderMenu:!0},size:250}),R.accessor((function(e){return e.is_enabled}),{id:"is_enabled",cell:function(e){return(0,j.jsx)(u.kCb,{align:"center",justifyContent:"flex-start",w:"full",h:"full",children:(0,j.jsx)(u.rsf,{isChecked:e.getValue(),colorScheme:"complimentary",onChange:function(){var n=(0,r.Z)(a().mark((function n(r){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t({isEnabled:r.target.checked,templateId:e.row.original.id});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})})},header:function(e){return(0,j.jsx)(y.Rr,I({value:"Enable"},e))},size:200,meta:{disableRowClick:!0}})]}),[t]),F=(0,l.sortBy)(B,"id"),H=(0,c.b7)({getCoreRowModel:(0,o.sC)(),getFilteredRowModel:(0,o.vL)(),getSortedRowModel:(0,o.tj)(),columns:G,data:F});return(0,j.jsxs)(g.Z,{title:"Messaging",mainProps:{padding:"0 40px 10px"},children:[(0,j.jsx)(f.Z,{breadcrumbs:[{title:"Messaging"}],children:(0,j.jsx)(u.xvT,{fontWeight:500,color:"gray.700",children:"Configure Fides messaging."})}),(0,j.jsx)(y.Q$,{children:(0,j.jsx)(u.Ugi,{alignItems:"center",spacing:4,marginLeft:"auto",children:(0,j.jsx)(u.zxk,{size:"xs",colorScheme:"primary","data-testid":"add-message-btn",onClick:function(){return L(!0)},children:"Add message +"})})}),Z?(0,j.jsx)(y.I4,{rowHeight:36,numRows:15}):(0,j.jsx)(y.ZK,{tableInstance:H,onRowClick:function(t){e.push({pathname:m.ax,query:{id:t.id}})},emptyTableNotice:(0,j.jsx)(k,{})}),(0,j.jsx)(h.s8,{totalRows:U,pageSizes:i,setPageSize:b,onPreviousPageClick:v,isPreviousPageDisabled:T||V,onNextPageClick:O,isNextPageDisabled:_||V,startRange:C,endRange:S}),(0,j.jsx)(P,{isOpen:Y,onClose:function(){return L(!1)},onAccept:function(t){e.push({pathname:m.sM,query:{templateType:t}})}})]})}},33167:function(e,t,n){"use strict";n.d(t,{isAPIError:function(){return r.Bw},isErrorResult:function(){return r.D4}});var r=n(60041)},24081:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/messaging",function(){return n(34519)}])}},function(e){e.O(0,[8033,146,9938,9774,2888,179],(function(){return t=24081,e(e.s=t);var t}));var t=e.O();_N_E=t}]);