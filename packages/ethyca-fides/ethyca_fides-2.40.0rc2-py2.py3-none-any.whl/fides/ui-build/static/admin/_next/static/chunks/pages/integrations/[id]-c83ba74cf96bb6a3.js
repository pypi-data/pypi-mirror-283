(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1500],{28171:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(90849),o=n(90089),r=n(28841),a=n(98784),s=n(27378),c=n(79894),l=n.n(c),u=n(24246),d=function(e){var t=e.breadcrumbs;return(0,u.jsx)(r.aGc,{separator:"->",fontSize:"2xl",fontWeight:"semibold","data-testid":"breadcrumbs",children:t.map((function(e,n){var i=n+1===t.length,o=!!e.link||!!e.onClick;return(0,u.jsx)(r.gN6,{color:i||e.isOpaque?"black":"gray.500",children:o?(0,u.jsx)(r.Atw,{as:l(),href:e.link,isCurrentPage:i,children:e.title}):(0,u.jsx)(r.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:i,children:e.title})},e.title)}))})},g=["breadcrumbs","isSticky","children"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.breadcrumbs,n=e.isSticky,i=void 0===n||n,c=e.children,l=(0,o.Z)(e,g);return(0,u.jsxs)(r.xuv,p(p(p({bgColor:"white",paddingY:5},i?{position:"sticky",top:0,left:0,zIndex:10}:{}),l),{},{children:[(0,a.isArray)(t)&&(0,u.jsx)(r.xuv,{marginBottom:c?4:0,children:(0,u.jsx)(d,{breadcrumbs:t})}),(0,s.isValidElement)(t)&&t,c]}))}},11993:function(e,t,n){"use strict";n.d(t,{Od:function(){return a},QZ:function(){return r}});var i=n(73679),o=n(27378),r=function(e){var t=e.items,n=e.selected,o=e.onChange,r=t.every((function(e){return n.includes(e.id)}))&&!!t.length,a=t.some((function(e){return n.includes(e.id)}))&&!!t.length;return{allSelected:r,someSelected:a,handleToggleAll:function(){o(r?[]:t.map((function(e){return e.id})))},handleToggleSelection:function(e){n.includes(e)?o(n.filter((function(t){return t!==e}))):o([].concat((0,i.Z)(n),[e]))}}},a=function(e){var t=e.initialAllSelected,n=e.itemCount,r=e.selected,a=e.onChange,s=(0,o.useState)(t||r.length===n),c=s[0],l=s[1],u=!!r.length;return{allSelected:c,someSelected:u,handleToggleAll:function(){a([]),l(!c)},handleToggleSelection:function(e){if(r.includes(e))a(r.filter((function(t){return t!==e})));else{var t=[].concat((0,i.Z)(r),[e]);a(t),t.length===n&&l(!0)}}}}},714:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ae}});var i=n(28841),o=n(86677),r=n(44204),a=n(51471),s=n(60709),c=n(28171),l=n(31669),u=n(90655),d=n(89592),g=n(90849),f=n(92222),p=n(59003),m=n(27378),x=n(67860),b=n(24246),j=(0,i.IUT)({displayName:"MonitorIcon",viewBox:"0 0 12 12",path:(0,b.jsx)("path",{d:"M1.33333 2.21875C1.15 2.21875 1 2.37344 1 2.5625V5.65625H3.66667C3.84167 5.65625 4.00417 5.75078 4.09583 5.90762L4.62708 6.8207L5.88542 4.22324C5.96667 4.05566 6.13125 3.94609 6.3125 3.93965C6.49375 3.9332 6.66667 4.02773 6.76042 4.18887L7.61458 5.65625H8.83333C9.11042 5.65625 9.33333 5.88613 9.33333 6.17188C9.33333 6.45762 9.11042 6.6875 8.83333 6.6875H7.33333C7.15833 6.6875 6.99583 6.59297 6.90417 6.43613L6.37292 5.52305L5.11458 8.12051C5.03333 8.28809 4.86875 8.39766 4.6875 8.4041C4.50625 8.41055 4.33333 8.31602 4.23958 8.15488L3.38542 6.6875H1V9.4375C1 9.62656 1.15 9.78125 1.33333 9.78125H10.6667C10.85 9.78125 11 9.62656 11 9.4375V2.5625C11 2.37344 10.85 2.21875 10.6667 2.21875H1.33333ZM0 2.5625C0 1.8041 0.597917 1.1875 1.33333 1.1875H10.6667C11.4021 1.1875 12 1.8041 12 2.5625V9.4375C12 10.1959 11.4021 10.8125 10.6667 10.8125H1.33333C0.597917 10.8125 0 10.1959 0 9.4375V2.5625Z",fill:"currentColor"})}),v=n(49938),h=n(37522),y=n(55732),O=n(97865),C=n(34707),S=n.n(C),P=n(78624),k=function(e){var t=e.defaultSuccessMsg,n=e.defaultErrorMsg,o=(0,i.pmc)();return{toastResult:function(e){if((0,P.D4)(e)){var i=(0,P.e$)(e.error,n);o({status:"error",description:i})}else o({status:"success",description:t})}}},_=n(30646),w=n(11993),Z=n(38687),z=function(e){var t=e.items,n=e.itemCount,o=e.selected,r=e.allSelected,a=e.someSelected,s=e.handleToggleSelection,c=e.handleToggleAll,l=r?n:o.length;return(0,b.jsxs)(i.kCb,{w:"full",direction:"column",gap:3,children:[(0,b.jsx)(i.XZJ,{fontSize:"md",isChecked:r,size:"md",mr:2,onChange:c,colorScheme:"complimentary","data-testid":"select-all",isIndeterminate:!r&&a,children:"Select all"}),l>0?(0,b.jsxs)(i.Cts,{colorScheme:"purple",variant:"solid",width:"fit-content","data-testid":"num-selected-badge",children:[l," selected"]}):null,(0,b.jsx)(i.kCb,{pl:6,fontSize:"sm",gap:2,direction:"column",children:(0,b.jsx)(i.cOn,{colorScheme:"complimentary",children:t.map((function(e){return(0,b.jsx)(i.XZJ,{isChecked:o.includes(e.id)||r,size:"md",onChange:function(){return s(e.id)},disabled:r,"data-testid":"".concat(e.id,"-checkbox"),children:e.name},e.id)}))})})]})};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={items:[],total:1,page:1,size:50,pages:0},R=function(e){var t,n=e.monitor,o=e.isEditing,r=e.isSubmitting,a=e.integrationKey,s=e.onSubmit,c=e.onClose,l=(0,v.oi)(),u=l.PAGE_SIZES,d=l.pageSize,g=l.setPageSize,f=l.onPreviousPageClick,p=l.isPreviousPageDisabled,j=l.onNextPageClick,y=l.isNextPageDisabled,O=l.startRange,C=l.endRange,S=l.pageIndex,P=l.setTotalPages,k=(0,h.QW)({page:S,size:d,connection_config_key:a}),_=k.data,A=k.isLoading,R=k.isFetching,N=null!==_&&void 0!==_?_:E,T=N.items,q=N.total,M=N.pages;(0,m.useEffect)((function(){P(M)}),[M,P]);var L=(0,m.useState)(null!==(t=n.databases)&&void 0!==t?t:[]),I=L[0],V=L[1],H=(0,w.Od)({selected:I,initialAllSelected:o&&!I.length,itemCount:q,onChange:V}),W=H.allSelected,F=H.someSelected,Y=H.handleToggleSelection,G=H.handleToggleAll;if(A)return(0,b.jsx)(x.Z,{});var K=!W&&0===I.length;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.kCb,{p:4,direction:"column",children:[(0,b.jsxs)(i.kCb,{direction:"row",mb:4,gap:1,align:"center",children:[(0,b.jsx)(i.xvT,{fontSize:"sm",children:"Select projects to monitor"}),(0,b.jsx)(Z.Z,{label:"Select projects to restrict which datasets this monitor can access. If no projects are selected, the monitor will observe all current and future projects."})]}),(0,b.jsx)(z,{items:T.map((function(e){return{name:e,id:e}})),itemCount:q,selected:I,allSelected:W,someSelected:F,handleToggleSelection:Y,handleToggleAll:G})]}),(0,b.jsx)(v.s8,{totalRows:q,pageSizes:u,setPageSize:g,onPreviousPageClick:f,isPreviousPageDisabled:p||R,onNextPageClick:j,isNextPageDisabled:y||R,startRange:O,endRange:C}),(0,b.jsxs)(i.hE2,{size:"sm",w:"full",justifyContent:"space-between",mt:4,children:[(0,b.jsx)(i.zxk,{onClick:c,variant:"outline",children:"Cancel"}),(0,b.jsx)(i.ua7,{label:"Select one or more projects to save",isDisabled:!K,children:(0,b.jsx)(i.zxk,{onClick:function(){var e=D(D({},n),{},{databases:W?[]:I});s(e)},isLoading:r,variant:"primary","data-testid":"save-btn",isDisabled:K,children:"Save"})})]})]})},N=n(73679),T=n(73809),q=n(87941),M=n(34090),L=n(14633),I=n(43139),V=n(4938);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F="Not scheduled",Y=function(e){var t,n,r=e.monitor,a=e.integrationOption,s=e.isSubmitting,c=e.databasesAvailable,l=e.onClose,u=e.onAdvance,d=e.onSubmit,g=!!r,f=(0,o.useRouter)().query,p=Array.isArray(f.id)?f.id[0]:f.id,m=L.Ry().shape({name:L.Z_().required().label("Name"),execution_frequency:L.Z_().nullable().label("Execution frequency"),execution_start_date:L.hT().nullable().label("Execution start date")}),x=null!==r&&void 0!==r&&r.execution_start_date?(0,T.Z)(r.execution_start_date):Date.now(),j={name:null!==(t=null===r||void 0===r?void 0:r.name)&&void 0!==t?t:"",execution_start_date:(0,q.Z)(x,"yyyy-MM-dd'T'HH:mm"),execution_frequency:null!==(n=null===r||void 0===r?void 0:r.execution_frequency)&&void 0!==n?n:F},v=[{label:F,value:F}].concat((0,N.Z)((0,P.MM)(V.hV)));return(0,b.jsx)(M.J9,{initialValues:j,enableReinitialize:!0,onSubmit:function(e){var t=e.execution_frequency!==F?{execution_frequency:e.execution_frequency,execution_start_date:new Date(e.execution_start_date).toISOString()}:{execution_frequency:void 0,execution_start_date:void 0},n=g?W(W(W({},r),t),{},{name:e.name}):W(W({},t),{},{name:e.name,connection_config_key:p,classify_params:{num_samples:25,num_threads:1}});a.identifier===V.Rj.DYNAMODB&&(n.datasource_params={single_dataset:!1}),c?u(n):d(n)},validationSchema:m,children:function(e){var t=e.values,n=e.isValid,o=e.resetForm;return(0,b.jsx)(M.l0,{children:(0,b.jsxs)(i.gCW,{alignItems:"start",spacing:6,mt:4,children:[(0,b.jsx)(I.j0,{name:"name",id:"name",label:"Name",isRequired:!0,variant:"stacked"}),(0,b.jsx)(I.AP,{name:"execution_frequency",id:"execution_frequency",tooltip:"Interval to run the monitor automatically after the start date",options:v,label:"Automatic execution frequency",variant:"stacked"}),(0,b.jsx)(I.YL,{name:"execution_start_date",label:"Automatic execution start time",disabled:t.execution_frequency===F,id:"execution_start_date"}),(0,b.jsxs)(i.hE2,{size:"sm",w:"full",justifyContent:"space-between",children:[(0,b.jsx)(i.zxk,{variant:"outline",onClick:function(){o(),l()},children:"Cancel"}),(0,b.jsx)(i.zxk,{type:"submit",variant:"primary",isDisabled:!n,isLoading:s,"data-testid":"next-btn",children:c?"Next":"Save"})]})]})})}})},G=n(33167),K=function(e){var t=e.isOpen,n=e.onClose,i=e.formStep,o=e.onAdvance,r=e.monitor,a=e.isEditing,s=e.integration,c=e.integrationOption,l=(0,h.Fy)(),u=(0,O.Z)(l,2),d=u[0],g=u[1].isLoading,f=(0,h.QW)({page:1,size:25,connection_config_key:s.key}).data,p=!!f&&!!f.total,m=k({defaultSuccessMsg:"Monitor ".concat(a?"updated":"created"," successfully"),defaultErrorMsg:"A problem occurred while ".concat(a?"updating":"creating"," this monitor")}).toastResult,j=function(){var e=(0,y.Z)(S().mark((function e(t){var i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:i=e.sent,m(i),(0,G.isErrorResult)(i)||n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)(_.Z,{title:null!==r&&void 0!==r&&r.name?"Configure ".concat(r.name):"Configure discovery monitor",isOpen:t,onClose:n,children:[0===i&&(0,b.jsx)(Y,{monitor:r,onClose:n,onAdvance:o,onSubmit:j,isSubmitting:g,databasesAvailable:p,integrationOption:c}),1===i&&(r?(0,b.jsx)(R,{monitor:r,isEditing:a,isSubmitting:g,onSubmit:j,onClose:n,integrationKey:s.key}):(0,b.jsx)(x.Z,{}))]})},Q=function(e){var t=e.onEditClick;return(0,b.jsx)(i.xuv,{children:(0,b.jsx)(i.hU,{onClick:t,icon:(0,b.jsx)(i.dY8,{}),variant:"outline",size:"xs","data-testid":"edit-monitor-btn","aria-label":"Edit monitor"})})};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J={items:[],total:0,page:1,size:50,pages:0},$=(0,f.Cl)(),U=function(e){var t=e.onAddClick;return(0,b.jsx)(i.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",children:(0,b.jsxs)(i.gCW,{children:[(0,b.jsx)(i.xvT,{fontSize:"md",fontWeight:"600",children:"No monitors"}),(0,b.jsx)(i.xvT,{fontSize:"sm",children:'You have not configured any data discovery monitors. Click "Add monitor" to configure data discovery now.'}),(0,b.jsx)(i.zxk,{onClick:t,colorScheme:"primary",children:"Add monitor"})]})})},ee=function(e){var t=e.integration,n=e.integrationOption,o=(0,v.oi)(),r=o.PAGE_SIZES,a=o.pageSize,s=o.setPageSize,c=o.onPreviousPageClick,l=o.isPreviousPageDisabled,u=o.onNextPageClick,d=o.isNextPageDisabled,g=o.startRange,y=o.endRange,O=o.pageIndex,C=o.setTotalPages,S=(0,h.Fu)({page:O,size:a,connection_config_key:t.key}),P=S.isLoading,k=S.isFetching,_=S.data,w=(0,i.qY0)(),Z=(0,m.useState)(void 0),z=Z[0],A=Z[1],D=(0,m.useState)(!1),E=D[0],R=D[1],N=(0,m.useState)(0),T=N[0],q=N[1],M=function(e){A(e),R(!0),w.onOpen()},L=null!==_&&void 0!==_?_:J,I=(0,m.useMemo)((function(){return L}),[L]),V=I.items,H=I.total,W=I.pages;(0,m.useEffect)((function(){C(W)}),[W,C]);var F=(0,m.useMemo)((function(){return[$.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,b.jsx)(v.G3,{value:e.getValue()})},header:function(e){return(0,b.jsx)(v.Rr,B({value:"Name"},e))}}),$.accessor((function(e){return e.databases}),{id:"projects",cell:function(e){return 0===e.getValue().length?(0,b.jsx)(v.G3,{value:"All projects"}):(0,b.jsx)(v.WP,B(B({suffix:"Projects",value:e.getValue()},e),{},{isDisplayAll:!0}))},header:function(e){return(0,b.jsx)(v.Rr,B({value:"Location"},e))}}),$.display({id:"action",cell:function(e){return(0,b.jsx)(Q,{onEditClick:function(){return M(e.row.original)}})},header:"Actions",meta:{disableRowClick:!0},maxSize:50})]}),[]),Y=(0,p.b7)({getCoreRowModel:(0,f.sC)(),getGroupedRowModel:(0,f.qe)(),getExpandedRowModel:(0,f.rV)(),getRowId:function(e){return e.name},manualPagination:!0,data:V,columns:F});return P?(0,b.jsx)(x.Z,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.xvT,{maxW:"720px",mb:6,fontSize:"sm",children:"A data discovery monitor observes configured systems for data model changes to proactively discover and classify data risks. Monitors can observe part or all of a project, dataset, table, or API for changes and each can be assigned to a different data steward."}),(0,b.jsxs)(v.Q$,{children:[(0,b.jsx)(i.LZC,{}),(0,b.jsx)(i.zxk,{onClick:w.onOpen,size:"xs",variant:"outline",rightIcon:(0,b.jsx)(j,{}),"data-testid":"add-monitor-btn",children:"Add monitor"}),(0,b.jsx)(K,{isOpen:w.isOpen,onClose:function(){A(void 0),R(!1),q(0),w.onClose()},formStep:T,onAdvance:function(e){A(e),q(1)},monitor:z,isEditing:E,integration:t,integrationOption:n})]}),(0,b.jsx)(v.ZK,{tableInstance:Y,onRowClick:M,emptyTableNotice:(0,b.jsx)(U,{onAddClick:w.onOpen})}),(0,b.jsx)(v.s8,{totalRows:H,pageSizes:r,setPageSize:s,onPreviousPageClick:c,isPreviousPageDisabled:l||k,onNextPageClick:u,isNextPageDisabled:d||k,startRange:g,endRange:y})]})},te=n(40757),ne=n(47524),ie=function(e){var t=e.isOpen,n=e.onClose,i=e.connection,o=(0,ne.Z)(i.connection_type);return(0,b.jsx)(_.Z,{title:"Manage integration secret",isOpen:t,onClose:n,children:(0,b.jsx)(te.Z,{connection:i,connectionOption:o,onCancel:n})})},oe=n(62025),re=n(91083),ae=function(){var e,t,n=(0,o.useRouter)().query,g=Array.isArray(n.id)?n.id[0]:n.id,f=(0,l.jA)(null!==g&&void 0!==g?g:""),p=f.data,m=f.isLoading,x=(0,ne.Z)(null===p||void 0===p?void 0:p.connection_type),j=(0,u.Z)(p),v=j.testConnection,h=j.isLoading,y=j.testData,O=(0,i.qY0)(),C=O.onOpen,S=O.isOpen,P=O.onClose,k=(0,d.ZP)(null===p||void 0===p?void 0:p.connection_type),_=k.overview,w=k.instructions,Z=(0,o.useRouter)();p&&!d.jq.includes(p.connection_type)&&Z.push(s.KH);var z=[{label:"Connection",content:(0,b.jsxs)(i.xuv,{maxW:"720px",children:[(0,b.jsxs)(i.kCb,{borderRadius:"md",outline:"1px solid",outlineColor:"gray.100",align:"center",p:3,children:[(0,b.jsx)(i.kCb,{flexDirection:"column",children:(0,b.jsx)(oe.Z,{testData:y})}),(0,b.jsx)(i.LZC,{}),(0,b.jsxs)(i.hE2,{size:"sm",variant:"outline",children:[(0,b.jsx)(i.zxk,{onClick:v,isLoading:h,"data-testid":"test-connection-btn",children:"Test connection"}),(0,b.jsx)(i.zxk,{onClick:C,"data-testid":"manage-btn",children:"Manage"})]})]}),(0,b.jsx)(ie,{isOpen:S,onClose:P,connection:p}),_,w]})},{label:"Data discovery",content:(0,b.jsx)(ee,{integration:p,integrationOption:x})}];return(0,b.jsx)(a.Z,{title:"Integrations",children:(0,b.jsxs)(c.Z,{breadcrumbs:[{title:"Integrations",link:s.KH},{title:null!==(e=null!==(t=null===p||void 0===p?void 0:p.name)&&void 0!==t?t:null===p||void 0===p?void 0:p.key)&&void 0!==e?e:""}],children:[(0,b.jsx)(re.Z,{integration:p}),m?(0,b.jsx)(i.$jN,{}):(0,b.jsx)(r.Z,{data:z,isLazy:!0})]})})}},50697:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations/[id]",function(){return n(714)}])}},function(e){e.O(0,[8033,146,1813,9938,9662,9774,2888,179],(function(){return t=50697,e(e.s=t);var t}));var t=e.O();_N_E=t}]);