(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8538],{51471:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(90849),i=r(28841),s=r(88038),a=r.n(s),o=r(86677),c=(r(27378),r(90768)),u=r(51365),l=r(60709),d=r(24246),f=function(){var e=(0,o.useRouter)();return(0,d.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,d.jsxs)(i.xuv,{children:[(0,d.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,d.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,d.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(l.fz)},children:"Configure"})]}),(0,d.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){var t=e.children,r=e.title,n=e.padded,s=void 0===n||n,l=e.mainProps,p=(0,c.hz)(),v=(0,o.useRouter)(),b="/privacy-requests"===v.pathname||"/datastore-connection"===v.pathname,m=!(p.flags.privacyRequestsConfiguration&&b),g=(0,u.JE)(void 0,{skip:m}).data,x=(0,u.PW)(void 0,{skip:m}).data,j=p.flags.privacyRequestsConfiguration&&(!g||!x)&&b;return(0,d.jsxs)(i.kCb,{"data-testid":r,direction:"column",h:"100vh",children:[(0,d.jsxs)(a(),{children:[(0,d.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,d.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)(i.kCb,h(h({as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},l),{},{children:[j?(0,d.jsx)(f,{}):null,t]}))]})}},78624:function(e,t,r){"use strict";r.d(t,{D4:function(){return s.D4},MM:function(){return p},Ot:function(){return u},c6:function(){return d},cj:function(){return v},e$:function(){return o},fn:function(){return c},iC:function(){return h},nU:function(){return f},tB:function(){return l}});var n,i=r(90849),s=r(60041),a="An unexpected error occurred. Please try again.",o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var r,n=null===(r=e.data.detail)||void 0===r?void 0:r[0];return"".concat(null===n||void 0===n?void 0:n.msg,": ").concat(null===n||void 0===n?void 0:n.loc)}if(409===e.status&&(0,s.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function c(e){return"object"===typeof e&&null!=e&&"status"in e}function u(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){var r=e.status;return{status:r,message:o(e,t.message)}}return t},p=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(d||(d={}));var h=(n={},(0,i.Z)(n,d.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,i.Z)(n,d.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,i.Z)(n,d.COMPASS,{label:"",fullName:""}),n),v=function(e){var t=e.split(".")[0];return t===d.AC?d.AC:t===d.GVL?d.GVL:d.COMPASS}},9408:function(e,t,r){"use strict";r.d(t,{HK:function(){return s},VY:function(){return n.V},O3:function(){return o}});var n=r(36653),i=r(78624),s=function(){var e=(0,n.V)().errorAlert;return{handleError:function(t){var r="An unexpected error occurred. Please try again.";(0,i.Ot)(t)?r=t.data.detail:(0,i.tB)(t)&&(r=t.data.detail[0].msg),e(r)}}},a=r(27378),o=function(e){var t=(0,a.useRef)(void 0);return(0,a.useEffect)((function(){var r=function(r){var n;null!==(n=t.current)&&void 0!==n&&n.contains(r.target)||e()};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}}),[t,e]),{ref:t}}},36653:function(e,t,r){"use strict";r.d(t,{V:function(){return c}});var n=r(90849),i=r(28841),s=r(24246);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(){var e=(0,i.pmc)();return{errorAlert:function(t,r,n){var a=o(o({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"error",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[r&&(0,s.jsx)(i.CdC,{children:r}),(0,s.jsx)(i.XaZ,{children:t})]}),(0,s.jsx)(i.PZ7,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,a):e(a)},successAlert:function(t,r,n){var a=o(o({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[r&&(0,s.jsx)(i.CdC,{children:r}),(0,s.jsx)(i.XaZ,{children:t})]}),(0,s.jsx)(i.PZ7,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,a):e(a)}}}},2458:function(e,t,r){"use strict";var n=r(90849),i=r(28841),s=r(24246);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.isOpen,r=e.onClose,n=e.onConfirm,a=e.onCancel,c=e.title,u=e.message,l=e.cancelButtonText,d=e.cancelButtonThemingProps,f=e.continueButtonText,p=e.continueButtonThemingProps,h=e.isLoading,v=e.returnFocusOnClose,b=e.isCentered,m=e.testId,g=void 0===m?"confirmation-modal":m,x=e.icon;return(0,s.jsxs)(i.u_l,{isOpen:t,onClose:r,size:"lg",returnFocusOnClose:null===v||void 0===v||v,isCentered:b,children:[(0,s.jsx)(i.ZAr,{}),(0,s.jsxs)(i.hzk,{textAlign:"center",p:6,"data-testid":g,children:[x?(0,s.jsx)(i.M5Y,{mb:2,children:x}):null,c?(0,s.jsx)(i.xBx,{fontWeight:"medium",pb:0,children:c}):null,u?(0,s.jsx)(i.fef,{children:u}):null,(0,s.jsx)(i.mzw,{children:(0,s.jsxs)(i.MIq,{columns:2,width:"100%",children:[(0,s.jsx)(i.zxk,o(o({variant:"outline",mr:3,onClick:function(){a&&a(),r()},"data-testid":"cancel-btn",isDisabled:h},d),{},{children:l||"Cancel"})),(0,s.jsx)(i.zxk,o(o({colorScheme:"primary",onClick:n,"data-testid":"continue-btn",isLoading:h},p),{},{children:f||"Continue"}))]})})]})]})}},56069:function(e,t,r){"use strict";r.d(t,{R:function(){return p}});var n=r(90849),i=r(90089),s=r(28841),a=r(79894),o=r.n(a),c=r(24246),u=["backPath"],l=["onClick"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.onClick,r=(0,i.Z)(e,l);return(0,c.jsxs)(s.kCb,f(f({alignItems:"center",mt:-4,mb:3,onClick:t,cursor:"pointer"},r),{},{children:[(0,c.jsx)(s.hU,{"aria-label":"Back",icon:(0,c.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,c.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};t.Z=function(e){var t=e.backPath,r=(0,i.Z)(e,u);return(0,c.jsxs)(s.kCb,f(f({alignItems:"center",mb:6},r),{},{children:[(0,c.jsx)(o(),{href:t,passHref:!0,children:(0,c.jsx)(s.hU,{"aria-label":"Back",icon:(0,c.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,c.jsx)(o(),{href:t,passHref:!0,children:(0,c.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},24753:function(e,t,r){"use strict";r.d(t,{MA:function(){return l},Vo:function(){return f},t5:function(){return d}});var n=r(90849),i=r(28841),s=r(24246);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(e){var t=e.children;return(0,s.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",t]})},u=function(e){var t=e.children;return(0,s.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,s.jsx)(c,{children:e});return o(o({},l),{description:t})},f=function(e){var t=(0,s.jsx)(u,{children:e});return o(o({},l),{description:t,status:"error"})}},40695:function(e,t,r){"use strict";var n=r(28841),i=(r(27378),r(24246));t.Z=function(e){var t=e.isEmptyState,r=e.yamlError;return(0,i.jsx)(n.Rg9,{in:!0,children:(0,i.jsxs)(n.xuv,{w:"fit-content",bg:"white",p:3,borderRadius:3,children:[(0,i.jsxs)(n.Ugi,{children:[(0,i.jsx)(n.X6q,{as:"h5",color:"gray.700",size:"xs",children:"YAML"}),(0,i.jsx)(n.Vp9,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,i.jsx)(n.xuv,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,i.jsxs)(n.Ugi,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,i.jsx)(n.f9v,{}),t&&(0,i.jsxs)(n.xuv,{children:[(0,i.jsx)(n.X6q,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,i.jsx)(n.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:"Yaml system is required"})]}),r&&(0,i.jsxs)(n.xuv,{children:[(0,i.jsx)(n.X6q,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,i.jsx)(n.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:r.message}),(0,i.jsx)(n.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:r.reason}),(0,i.jsxs)(n.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:["Ln ",(0,i.jsx)("b",{children:r.mark.line}),", Col"," ",(0,i.jsx)("b",{children:r.mark.column}),", Pos"," ",(0,i.jsx)("b",{children:r.mark.position})]})]})]})})]})})}},16473:function(e,t,r){"use strict";r.d(t,{F:function(){return a},M:function(){return s}});var n=r(76649),i=r(65218),s=r.n(i)()((function(){return r.e(7088).then(r.bind(r,57088)).then((function(e){return e.default}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[57088]}}}),a=function(e){return(0,n.Ln)({name:"string"},e)&&"YAMLException"===e.name}},34129:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var n=r(28841),i=r(27378),s=r(90768),a=r(51471),o=r(56069),c=r(60709),u=r(38687),l=r(90849),d=r(55732),f=r(97865),p=r(34707),h=r.n(p),v=r(34090),b=r(86677),m=r(60245),g=r(14633),x=r(43139),j=r(78624),y=r(2458),O=r(24753),w=r(41609),C=r(44047),k=r(4938),P=r(66334),D=r(24246);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=function(e){return!("system_type"in e)},A={url:"",classify:!1,classifyConfirmed:!1},E=g.Ry().shape({url:g.Z_().required().label("Database URL"),classify:g.O7(),classifyConfirmed:g.O7().when(["url","classify"],{is:function(e,t){return e&&t},then:g.O7().equals([!0])})}),_=function(){var e=(0,P.pR)(),t=(0,f.Z)(e,2),r=t[0],i=t[1].isLoading,a=(0,P.IR)(),o=(0,f.Z)(a,2),c=o[0],u=o[1].isLoading,l=(0,C.Du)(),p=(0,f.Z)(l,2),g=p[0],S=p[1].isLoading,_=i||u||S,L=(0,n.pmc)(),R=(0,b.useRouter)(),T=(0,s.hz)(),V=(0,m.I0)(),M=function(){var e=(0,d.Z)(h().mark((function e(t){var n,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({organization_key:w.Av,generate:{config:{connection_string:t.url},target:k.GC.DB,type:k.j.DATASETS}});case 2:if(!("error"in(i=e.sent))){e.next=5;break}return e.abrupt("return",{error:(0,j.e$)(i.error)});case 5:if((s=(null!==(n=i.data.generate_results)&&void 0!==n?n:[]).filter(Z))&&s.length>0){e.next=8;break}return e.abrupt("return",{error:"Unable to generate a dataset with this connection."});case 8:return e.abrupt("return",{datasets:s});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,d.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:if(!("error"in(r=e.sent))){e.next=5;break}return e.abrupt("return",{error:(0,j.e$)(r.error)});case 5:return e.abrupt("return",{dataset:r.data});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,d.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.values,n=t.datasets,e.next=3,g({dataset_schemas:n.map((function(e){var t=e.name;return{fides_key:e.fides_key,name:t}})),schema_config:{organization_key:w.Av,generate:{config:{connection_string:r.url},target:k.GC.DB,type:k.j.DATASETS}}});case 3:if(!("error"in(i=e.sent))){e.next=6;break}return e.abrupt("return",{error:(0,j.e$)(i.error)});case 6:return e.abrupt("return",{classifyInstances:i.data.classify_instances});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,d.Z)(h().mark((function e(t){var r,n,i,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:if(!("error"in(n=e.sent))){e.next=6;break}return L((0,O.Vo)(n.error)),e.abrupt("return");case 6:return e.next=8,Promise.all(n.datasets.map((function(e){return B(e)})));case 8:if(i=e.sent,!("error"in(s=null!==(r=i.find((function(e){return"error"in e})))&&void 0!==r?r:i[0]))){e.next=13;break}return L((0,O.Vo)(s.error)),e.abrupt("return");case 13:if(t.classify){e.next=17;break}return L((0,O.t5)("Generated ".concat(s.dataset.name," dataset"))),R.push("/dataset/".concat(s.dataset.fides_key)),e.abrupt("return");case 17:return e.next=19,G({values:t,datasets:n.datasets});case 19:if(!("error"in(a=e.sent))){e.next=23;break}return L((0,O.Vo)(a.error)),e.abrupt("return");case 23:L((0,O.t5)("Generate and classify are now in progress")),V((0,P.Zl)(s.dataset.fides_key)),R.push("/dataset");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsx)(v.J9,{initialValues:z(z({},A),{},{classify:T.plus}),validationSchema:E,onSubmit:W,validateOnChange:!1,validateOnBlur:!1,children:function(e){var t=e.isSubmitting,r=e.errors,i=e.values,s=e.submitForm,a=e.resetForm,o=e.setFieldValue;return(0,D.jsxs)(v.l0,{children:[(0,D.jsxs)(n.gCW,{spacing:8,align:"left",children:[(0,D.jsx)(n.xvT,{size:"sm",color:"gray.700",children:"Connect to a database using the connection URL. You may have received this URL from a colleague or your Ethyca developer support engineer."}),(0,D.jsx)(n.xuv,{children:(0,D.jsx)(x.j0,{name:"url",label:"Database URL"})}),T.plus?(0,D.jsx)(x.w8,{name:"classify",label:"Classify dataset",tooltip:"Use Fides Classify to suggest labels based on your data."}):null,(0,D.jsx)(n.xuv,{children:(0,D.jsx)(n.zxk,{size:"sm",colorScheme:"primary",type:"submit",isLoading:t||_,isDisabled:t||_,"data-testid":"create-dataset-btn",children:"Generate dataset"})})]}),(0,D.jsx)(y.Z,{title:"Generate and classify this dataset",message:"You have chosen to generate and classify this dataset. This process may take several minutes. In the meantime you can continue using Fides. You will receive a notification when the process is complete.",isOpen:void 0!==r.classifyConfirmed,onClose:function(){a({values:z(z({},i),{},{classifyConfirmed:!1})})},onConfirm:function(){o("classifyConfirmed",!0),setTimeout((function(){s()}),0)}})]})}})},L=r(66527),R=r(9408),T=r(16473),V=r(40695);function M(e){return"object"===typeof e&&null!=e&&"dataset"in e&&Array.isArray(e.dataset)}var B=function(){var e=(0,P.IR)(),t=(0,f.Z)(e,1)[0],r=(0,i.useState)(!0),s=r[0],a=r[1],o=(0,i.useState)(!1),c=o[0],u=o[1],l=(0,i.useState)(!1),p=l[0],v=l[1],m=(0,i.useRef)(null),g=(0,b.useRouter)(),x=(0,n.pmc)(),y=(0,R.VY)().errorAlert,w=(0,i.useState)(void 0),C=w[0],k=w[1],S=function(){var e=(0,d.Z)(h().mark((function e(r){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(r)?(i=(0,f.Z)(r.dataset,1),n=i[0]):n=r,e.abrupt("return",t(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,d.Z)(h().mark((function e(){var t,r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),t=m.current.getValue(),r=L.ZP.load(t,{json:!0}),e.next=5,S(r);case 5:n=e.sent,(0,j.D4)(n)?x((0,O.Vo)((0,j.e$)(n.error))):"data"in n&&(i=n.data,x((0,O.t5)("Successfully loaded new dataset YAML")),(0,P.Zl)(i.fides_key),g.push("/dataset/".concat(i.fides_key))),u(!1);case 8:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}();return(0,D.jsxs)(n.kCb,{gap:"97px",children:[(0,D.jsxs)(n.xuv,{w:"75%",children:[(0,D.jsx)(n.xuv,{color:"gray.700",fontSize:"14px",mb:4,children:"Get started creating your first dataset by pasting your dataset yaml below! You may have received this yaml from a colleague or your Ethyca developer support engineer."}),(0,D.jsxs)(n.gCW,{align:"stretch",children:[(0,D.jsx)(n.izJ,{color:"gray.100"}),(0,D.jsx)(T.M,{defaultLanguage:"yaml",height:"calc(100vh - 515px)",onChange:function(e){try{v(!0),function(e){L.ZP.load(e,{json:!0}),k(void 0)}(e),a(!(e&&""!==e.trim()))}catch(t){(0,T.F)(t)?k(t):y("Could not parse the supplied YAML")}},onMount:function(e){m.current=e,m.current.focus()},options:{fontFamily:"Menlo",fontSize:13,minimap:{enabled:!0}},theme:"light"}),(0,D.jsx)(n.izJ,{color:"gray.100"}),(0,D.jsx)(n.hE2,{mt:"24px !important",size:"sm",spacing:"8px",variant:"outline",children:(0,D.jsx)(n.zxk,{bg:"primary.800",color:"white",isDisabled:s||!!C||c,isLoading:c,loadingText:"Saving Yaml system",onClick:z,size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_hover:{bg:"primary.400"},children:"Create dataset"})})]})]}),(0,D.jsx)(n.xuv,{children:p&&(s||C)&&(0,D.jsx)(V.Z,{isEmptyState:s,yamlError:C})})]})},G=function(){var e=(0,s.hz)(),t=(0,i.useState)(null),r=t[0],l=t[1];return(0,D.jsxs)(a.Z,{title:"Create New Dataset",children:[(0,D.jsx)(o.Z,{backPath:c.$m}),(0,D.jsx)(n.X6q,{mb:8,fontSize:"2xl",fontWeight:"semibold",children:"Create New Dataset"}),(0,D.jsxs)(n.Kqy,{spacing:8,children:[(0,D.jsxs)(n.xuv,{children:[(0,D.jsx)(n.zxk,{size:"sm",mr:2,variant:"outline",onClick:function(){return l("yaml")},isActive:"yaml"===r,"data-testid":"upload-yaml-btn",children:"Upload a Dataset YAML"}),(0,D.jsx)(n.zxk,{size:"sm",mr:2,variant:"outline",onClick:function(){return l("database")},isActive:"database"===r,isDisabled:e.flags.dataDiscoveryAndDetection,"data-testid":"connect-db-btn",children:"Connect to a database"}),e.flags.dataDiscoveryAndDetection?(0,D.jsx)(u.Z,{label:"Creating a dataset via a database connection is disabled when the 'detection & discovery' beta feature is enabled"}):null]}),"database"===r&&(0,D.jsx)(n.xuv,{w:{base:"100%",lg:"50%"},children:(0,D.jsx)(_,{})}),"yaml"===r&&(0,D.jsx)(n.xuv,{w:{base:"100%"},children:(0,D.jsx)(B,{})})]})]})}},60041:function(e,t,r){"use strict";r.d(t,{Bw:function(){return a},D4:function(){return i},Dy:function(){return c},XD:function(){return u},cz:function(){return l},hE:function(){return o},oK:function(){return s}});var n=r(76649),i=function(e){return"error"in e},s=function(e){return(0,n.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},a=function(e){return(0,n.Ln)({status:"number",data:{}},e)},o=function(e){return(0,n.Ln)({detail:"string"},e)},c=function(e){return(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,n.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},73846:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/new",function(){return r(34129)}])}},function(e){e.O(0,[7923,9774,2888,179],(function(){return t=73846,e(e.s=t);var t}));var t=e.O();_N_E=t}]);