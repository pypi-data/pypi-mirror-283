(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9650],{51471:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var r=t(90849),i=t(28841),s=t(88038),o=t.n(s),c=t(86677),a=(t(27378),t(90768)),l=t(51365),u=t(60709),d=t(24246),f=function(){var e=(0,c.useRouter)();return(0,d.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,d.jsxs)(i.xuv,{children:[(0,d.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,d.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,d.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(u.fz)},children:"Configure"})]}),(0,d.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=function(e){var n=e.children,t=e.title,r=e.padded,s=void 0===r||r,u=e.mainProps,h=(0,a.hz)(),x=(0,c.useRouter)(),g="/privacy-requests"===x.pathname||"/datastore-connection"===x.pathname,j=!(h.flags.privacyRequestsConfiguration&&g),v=(0,l.JE)(void 0,{skip:j}).data,m=(0,l.PW)(void 0,{skip:j}).data,b=h.flags.privacyRequestsConfiguration&&(!v||!m)&&g;return(0,d.jsxs)(i.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,d.jsxs)(o(),{children:[(0,d.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,d.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)(i.kCb,p(p({as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},u),{},{children:[b?(0,d.jsx)(f,{}):null,n]}))]})}},78624:function(e,n,t){"use strict";t.d(n,{D4:function(){return s.D4},MM:function(){return h},Ot:function(){return l},c6:function(){return d},cj:function(){return x},e$:function(){return c},fn:function(){return a},iC:function(){return p},nU:function(){return f},tB:function(){return u}});var r,i=t(90849),s=t(60041),o="An unexpected error occurred. Please try again.",c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var t,r=null===(t=e.data.detail)||void 0===t?void 0:t[0];return"".concat(null===r||void 0===r?void 0:r.msg,": ").concat(null===r||void 0===r?void 0:r.loc)}if(409===e.status&&(0,s.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return n};function a(e){return"object"===typeof e&&null!=e&&"status"in e}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function u(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var d,f=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:o};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){var t=e.status;return{status:t,message:c(e,n.message)}}return n},h=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(d||(d={}));var p=(r={},(0,i.Z)(r,d.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,i.Z)(r,d.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,i.Z)(r,d.COMPASS,{label:"",fullName:""}),r),x=function(e){var n=e.split(".")[0];return n===d.AC?d.AC:n===d.GVL?d.GVL:d.COMPASS}},9408:function(e,n,t){"use strict";t.d(n,{HK:function(){return s},VY:function(){return r.V},O3:function(){return c}});var r=t(36653),i=t(78624),s=function(){var e=(0,r.V)().errorAlert;return{handleError:function(n){var t="An unexpected error occurred. Please try again.";(0,i.Ot)(n)?t=n.data.detail:(0,i.tB)(n)&&(t=n.data.detail[0].msg),e(t)}}},o=t(27378),c=function(e){var n=(0,o.useRef)(void 0);return(0,o.useEffect)((function(){var t=function(t){var r;null!==(r=n.current)&&void 0!==r&&r.contains(t.target)||e()};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[n,e]),{ref:n}}},36653:function(e,n,t){"use strict";t.d(n,{V:function(){return a}});var r=t(90849),i=t(28841),s=t(24246);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var a=function(){var e=(0,i.pmc)();return{errorAlert:function(n,t,r){var o=c(c({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"error",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[t&&(0,s.jsx)(i.CdC,{children:t}),(0,s.jsx)(i.XaZ,{children:n})]}),(0,s.jsx)(i.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,o):e(o)},successAlert:function(n,t,r){var o=c(c({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[t&&(0,s.jsx)(i.CdC,{children:t}),(0,s.jsx)(i.XaZ,{children:n})]}),(0,s.jsx)(i.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,o):e(o)}}}},56069:function(e,n,t){"use strict";t.d(n,{R:function(){return h}});var r=t(90849),i=t(90089),s=t(28841),o=t(79894),c=t.n(o),a=t(24246),l=["backPath"],u=["onClick"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h=function(e){var n=e.onClick,t=(0,i.Z)(e,u);return(0,a.jsxs)(s.kCb,f(f({alignItems:"center",mt:-4,mb:3,onClick:n,cursor:"pointer"},t),{},{children:[(0,a.jsx)(s.hU,{"aria-label":"Back",icon:(0,a.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,a.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};n.Z=function(e){var n=e.backPath,t=(0,i.Z)(e,l);return(0,a.jsxs)(s.kCb,f(f({alignItems:"center",mb:6},t),{},{children:[(0,a.jsx)(c(),{href:n,passHref:!0,children:(0,a.jsx)(s.hU,{"aria-label":"Back",icon:(0,a.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,a.jsx)(c(),{href:n,passHref:!0,children:(0,a.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},61961:function(e,n,t){"use strict";var r=t(97865),i=t(28841),s=t(27378),o=t(24246);n.Z=function(e){var n=e.isOpen,t=e.onClose,c=e.onApproveRequest,a=e.isLoading,l=e.subjectRequest,u=l.identity,d=l.identity_verified_at,f=l.custom_privacy_request_fields,h=(0,s.useCallback)((function(){c().then((function(){t()}))}),[c,t]);return(0,o.jsxs)(i.u_l,{isOpen:n,onClose:t,size:"lg",isCentered:!0,children:[(0,o.jsx)(i.ZAr,{}),(0,o.jsxs)(i.hzk,{children:[(0,o.jsx)(i.xBx,{children:"Privacy request approval"}),(0,o.jsxs)(i.fef,{paddingTop:0,paddingBottom:0,children:[(0,o.jsx)(i.xvT,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,o.jsxs)(i.QI$,{children:[Object.entries(u).filter((function(e){return null!==(0,r.Z)(e,2)[1].value})).map((function(e){var n=(0,r.Z)(e,2),t=n[0],s=n[1],c=s.value,a=s.label;return(0,o.jsx)(i.HCh,{children:(0,o.jsxs)(i.kCb,{alignItems:"flex-start",children:[(0,o.jsxs)(i.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[a,":"]}),(0,o.jsx)(i.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:c}),"(",d?"Verified":"Unverified",")"]},t)},t)})),f&&Object.entries(f).filter((function(e){return(0,r.Z)(e,2)[1].value})).map((function(e){var n=(0,r.Z)(e,2),t=n[0],s=n[1];return(0,o.jsx)(i.HCh,{children:(0,o.jsxs)(i.kCb,{alignItems:"flex-start",children:[(0,o.jsxs)(i.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[s.label,":"]}),(0,o.jsxs)(i.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:[Array.isArray(s.value)?s.value.join(", "):s.value," "]}),"(Unverified)"]},t)},t)}))]})]}),(0,o.jsx)(i.mzw,{children:(0,o.jsxs)(i.MIq,{columns:2,width:"100%",children:[(0,o.jsx)(i.zxk,{variant:"outline",size:"sm",mr:3,"data-testid":"cancel-btn",onClick:t,children:"Cancel"}),(0,o.jsx)(i.zxk,{colorScheme:"primary",variant:"solid",size:"sm","data-testid":"continue-btn",onClick:h,isLoading:a,children:"Confirm"})]})})]})]})}},15759:function(e,n,t){"use strict";var r=t(43139),i=t(28841),s=t(34090),o=t(27378),c=t(14633),a=t(24246),l={denialReason:""};n.Z=function(e){var n=e.isOpen,t=e.onClose,u=e.onDenyRequest,d=(0,o.useCallback)((function(e,n){var r=n.setSubmitting;u(e.denialReason).then((function(){r(!1),t()}))}),[u,t]);return(0,a.jsxs)(i.u_l,{isOpen:n,onClose:t,isCentered:!0,returnFocusOnClose:!1,children:[(0,a.jsx)(i.ZAr,{}),(0,a.jsx)(i.hzk,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,a.jsx)(s.J9,{initialValues:l,validationSchema:c.Ry({denialReason:c.Z_().required().label("Reason for denial")}),onSubmit:d,children:function(e){var n=e.isSubmitting,o=e.dirty,c=e.isValid;return(0,a.jsxs)(s.l0,{children:[(0,a.jsx)(i.xBx,{children:"Privacy request denial"}),(0,a.jsx)(i.fef,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,a.jsx)(i.fef,{children:(0,a.jsx)(r.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,a.jsxs)(i.mzw,{children:[(0,a.jsx)(i.zxk,{variant:"outline",size:"sm",width:"100%",maxWidth:"198px",mr:3,disabled:n,onClick:t,children:"Cancel"}),(0,a.jsx)(i.zxk,{type:"submit",size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",disabled:!o||!c,isLoading:n,"data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})}},30199:function(e,n,t){"use strict";var r=t(90849),i=t(55732),s=t(97865),o=t(34707),c=t.n(o),a=t(28841),l=t(27378),u=t(6848),d=t(78624),f=t(9408),h=t(51365),p=t(24246);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=(0,a.Gpc)((function(e,n){var t=e.buttonProps,r=e.handleBlur,o=e.subjectRequest,x=(0,u.T)(),j=(0,l.useState)(!1),v=j[0],m=j[1],b=(0,f.VY)(),y=b.errorAlert,O=b.successAlert,w=(0,u.C)(h.fe).errorRequests,k=(0,h.JD)(),C=(0,s.Z)(k,1)[0],S=(0,h.Fq)(),P=(0,s.Z)(S,1)[0],z=function(){var e=(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,C(w);case 3:"error"in(n=e.sent)?(x((0,h.uT)({checkAll:!1,errorRequests:[]})),y((0,d.e$)(n.error),"DSR batch automation has failed due to the following:",{duration:null})):(n.data.failed.length>0&&y((0,p.jsxs)(a.xuv,{children:["DSR automation has failed for"," ",(0,p.jsx)(a.xvT,{as:"span",fontWeight:"semibold",children:n.data.failed.length})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null}),n.data.succeeded.length>0&&O("Privacy request(s) are now being reprocessed.")),m(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.next=5,P(o);case 5:"error"in(t=e.sent)?y((0,d.e$)(t.error),"DSR automation has failed for this privacy request due to the following:",{duration:null}):O("Privacy request is now being reprocessed."),m(!1),r&&r(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsx)(a.zxk,g(g({},t),{},{isDisabled:v,isLoading:v,loadingText:"Reprocessing",onClick:o?R:z,ref:n,spinnerPlacement:"end",leftIcon:(0,p.jsx)(a.AyE,{}),variant:"outline",_loading:{opacity:1,div:{opacity:.4}},children:"Reprocess"}))}));n.Z=j},759:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(97865),i=t(51365),s=function(e){var n=e.subjectRequest,t=(0,i.RW)({fixedCacheKey:n.id}),s=(0,r.Z)(t,2),o=s[0],c=s[1],a=(0,i.F1)({fixedCacheKey:n.id}),l=(0,r.Z)(a,2),u=l[0],d=l[1],f=d.isLoading||c.isLoading;return{approveRequest:o,approveRequestResult:c,denyRequest:u,denyRequestResult:d,handleApproveRequest:function(){return o(n)},handleDenyRequest:function(e){return u({id:n.id,reason:e})},isLoading:f}}},26514:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ue}});var r,i=t(28841),s=t(86677),o=t(51471),c=t(56069),a=t(60709),l=t(89403),u=t(27378),d=t(4938),f=t(24246),h=function(e){var n={};return e.forEach((function(e){var t=e.collection_name,r=e.updated_at;(!n[t]||new Date(n[t].updated_at)<new Date(r))&&(n[t]=e)})),Object.values(n).some((function(e){return e.status===d.np.ERROR}))},p=function(e){var n=e.subjectRequest,t=e.setEventDetails,r=n.results,s=r?Object.keys(r):[],o=s.map((function(e,n){return(0,f.jsxs)(i.xuv,{children:[(0,f.jsxs)(i.kCb,{alignItems:"center",height:23,position:"relative",children:[(0,f.jsx)(i.xuv,{zIndex:1,children:h(r[e])?(0,f.jsx)(i.f9v,{}):(0,f.jsx)(i.StI,{})}),n===s.length-1?null:(0,f.jsx)(i.xuv,{width:"2px",height:"63px",backgroundColor:"gray.700",position:"absolute",top:"16px",left:"6px",zIndex:0}),(0,f.jsx)(i.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",ml:2,children:e})]}),(0,f.jsx)(i.xvT,{cursor:"pointer",color:"complimentary.500",fontWeight:"500",fontSize:"sm",ml:6,mb:7,onClick:function(){t({key:e,logs:r[e]})},children:"View Details"})]},e)}));return(0,f.jsxs)(i.xuv,{width:"100%",children:[(0,f.jsx)(i.xvT,{color:"gray.900",fontSize:"md",fontWeight:"500",mb:1,children:"Activity timeline"}),o]})},x=t(56602),g=function(e){var n=e.errorMessage;return(0,f.jsxs)(i.xuv,{height:"100%",id:"outer",children:[(0,f.jsxs)(i.kCb,{alignItems:"center",paddingBottom:"8px",children:[(0,f.jsx)(i.xvT,{size:"sm",color:"gray.700",fontWeight:"medium",marginRight:"8px",lineHeight:"20px",children:"Status"}),(0,f.jsx)(i.Vp9,{size:"sm",height:"20px",backgroundColor:"red.500",color:"white",marginRight:"8px",children:"Error"}),(0,f.jsx)(i.xuv,{padding:"0px",marginBottom:"3px",children:(0,f.jsx)(x.Z,{copyText:n})})]}),(0,f.jsx)(i.izJ,{}),(0,f.jsx)(i.xuv,{id:"errorWrapper",overflow:"auto",height:"100%",children:(0,f.jsx)(i.xvT,{children:n})})]})},j=t(1326);!function(e){e.IN_PROCESSING="in_processing",e.PENDING="pending",e.COMPLETE="complete",e.ERROR="error",e.PAUSED="paused",e.RETRYING="retrying",e.SKIPPED="skipped"}(r||(r={}));var v=function(e){var n=e.eventLogs,t=e.openErrorPanel,s=null===n||void 0===n?void 0:n.map((function(e){return(0,f.jsxs)(i.Tr,{_hover:{backgroundColor:e.status===r.ERROR?"#F7FAFC":"unset"},onClick:function(){e.status===r.ERROR&&t(e.message)},style:{cursor:e.status===r.ERROR?"pointer":"unset"},children:[(0,f.jsx)(i.Td,{children:(0,f.jsx)(i.xvT,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:(0,j.p6)(e.updated_at)})}),(0,f.jsx)(i.Td,{children:(0,f.jsx)(i.xvT,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:e.status})}),(0,f.jsx)(i.Td,{children:(0,f.jsx)(i.xvT,{color:"gray.600",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:e.collection_name})})]},e.updated_at)}));return(0,f.jsx)(i.xuv,{width:"100%",paddingTop:"0px",height:"100%",children:(0,f.jsx)(i.xJi,{id:"tableContainer",height:"100%",style:{overflowY:"auto"},children:(0,f.jsxs)(i.iA_,{size:"sm",id:"table",position:"relative",children:[(0,f.jsx)(i.hrZ,{id:"tableHeader",position:"sticky",top:"0px",backgroundColor:"white",children:(0,f.jsxs)(i.Tr,{children:[(0,f.jsx)(i.Th,{children:(0,f.jsx)(i.xvT,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Time"})}),(0,f.jsx)(i.Th,{children:(0,f.jsx)(i.xvT,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Status"})}),(0,f.jsx)(i.Th,{children:(0,f.jsx)(i.xvT,{color:"black",fontSize:"xs",lineHeight:"4",fontWeight:"medium",children:"Collection"})})]})}),(0,f.jsx)(i.p3B,{id:"tabelBody",children:s})]})})})},m=function(e){var n=e.eventData,t=(0,i.qY0)(),r=t.isOpen,s=t.onOpen,o=t.onClose,c=(0,u.useState)(!1),a=c[0],l=c[1],d=(0,u.useState)(""),h=d[0],p=d[1],x=function(){l(!1)},j=function(){a&&x(),o()},m=a?"Event detail":"Event log";return void 0===n?null:(0,f.jsxs)(i.xuv,{width:"100%",paddingTop:"0px",height:"100%",children:[(0,f.jsx)(i.xvT,{color:"gray.900",fontSize:"md",fontWeight:"500",mb:1,children:"Event Details"}),(0,f.jsx)(i.xvT,{color:"gray.600",fontSize:"sm",fontWeight:"500",lineHeight:"20px",mb:1,children:n.key}),(0,f.jsx)(i.izJ,{}),(0,f.jsx)(i.xvT,{cursor:"pointer",color:"complimentary.500",fontWeight:"500",fontSize:"sm",onClick:function(){s()},children:"View Log"}),(0,f.jsxs)(i.dys,{isOpen:r,placement:"right",onClose:j,size:"full",autoFocus:!1,children:[(0,f.jsx)(i.P1B,{}),(0,f.jsxs)(i.scA,{style:{width:"50%"},children:[(0,f.jsx)(i.OXI,{style:{paddingBottom:"0px"},children:(0,f.jsxs)(i.kCb,{justifyContent:"space-between",alignItems:"center",height:"40px",children:[(0,f.jsxs)(i.kCb,{alignItems:"center",children:[a?(0,f.jsx)(i.hU,{icon:(0,f.jsx)(i.Rpv,{}),"aria-label":"Close error logs",size:"sm",style:{height:"24px",width:"24px",minWidth:"24px",marginRight:"8px"},onClick:x}):null,(0,f.jsx)(i.xvT,{color:"gray.900",fontSize:"md",lineHeight:"6",fontWeight:"medium",children:m})]}),(0,f.jsx)(i.kCb,{alignItems:"flex-start",height:"100%",children:(0,f.jsx)(i.hU,{icon:(0,f.jsx)(i.LGN,{width:"17px"}),"aria-label":"Stop viewing error message",variant:"unstyled",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},isRound:!0,onClick:j})})]})}),(0,f.jsxs)(i.Ng0,{id:"drawerBody",overflow:"hidden",children:[n&&!a?(0,f.jsx)(v,{eventLogs:n.logs,openErrorPanel:function(e){p(e),l(!0)}}):null,a?(0,f.jsx)(g,{errorMessage:h}):null]})]})]})]})},b=function(e){var n=e.subjectRequest,t=(0,u.useState)(),r=t[0],s=t[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.X6q,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Events and logs"}),(0,f.jsx)(i.izJ,{}),(0,f.jsxs)(i.kCb,{mt:3,children:[(0,f.jsx)(p,{subjectRequest:n,setEventDetails:s}),(0,f.jsx)(m,{eventData:r})]})]})},y=t(90849),O=t(55732),w=t(97865),k=t(34707),C=t.n(k),S=t(9408),P=t(57928),z=t(51365),R=t(6848),_=function(e){return Array.from(new Set(e.filter((function(e){return Object.values(d.Us).includes(e.action_type)})).map((function(e){return e.action_type}))))},q=function(e){var n=e.rules,t=_(n).map((function(e){return(0,j.kC)(e)})).map((function(e){return(0,f.jsx)(i.Vp9,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:e},e)}));return(0,f.jsx)(i.xuv,{children:t})},D=t(34090),E=t(14633);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A=function(e){var n=e.connectorName,t=e.data,r=e.isSubmitting,s=void 0!==r&&r,o=e.onSaveClick,c=(0,i.qY0)(),a=c.isOpen,l=c.onOpen,d=c.onClose,h=(0,u.useRef)(null),p=function(){var e=(0,O.Z)(C().mark((function e(n,r){var i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={connection_key:t.connection_key,privacy_request_id:t.privacy_request_id,body:W({},n)},o(i),d();case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(null===t||void 0===t?void 0:t.checked)&&(0,f.jsx)(i.zxk,{color:"gray.700",fontSize:"xs",h:"24px",onClick:l,variant:"outline",w:"58px",children:"Review"}),!(null!==t&&void 0!==t&&t.checked)&&(0,f.jsx)(i.zxk,{color:"white",bg:"primary.800",fontSize:"xs",h:"24px",onClick:l,w:"127px",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Begin manual input"}),(0,f.jsx)(D.J9,{enableReinitialize:!0,initialValues:W({},t.fields),onSubmit:p,validateOnBlur:!1,validateOnChange:!1,validationSchema:E.Ry().shape({}),children:function(e){return(0,f.jsxs)(i.dys,{isOpen:a,placement:"right",initialFocusRef:h,onClose:d,size:"lg",children:[(0,f.jsx)(i.P1B,{}),(0,f.jsxs)(i.scA,{children:[(0,f.jsx)(i.cCv,{}),(0,f.jsxs)(i.OXI,{color:"gray.900",children:[(0,f.jsx)(i.xvT,{fontSize:"xl",mb:8,children:n}),(0,f.jsx)(i.izJ,{}),(0,f.jsx)(i.xvT,{fontSize:"md",mt:"4",children:"Manual access"}),(0,f.jsx)(i.xuv,{mt:"8px",children:(0,f.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"normal",children:"Please complete the following PII fields that have been collected for the selected subject."})})]}),(0,f.jsx)(i.Ng0,{children:(0,f.jsx)(D.l0,{id:"manual-detail-form",noValidate:!0,children:(0,f.jsx)(i.gCW,{align:"stretch",gap:"16px",children:Object.entries(t.fields).map((function(e,n){var t=(0,w.Z)(e,1)[0];return(0,f.jsx)(i.Ugi,{children:(0,f.jsx)(D.gN,{id:t,name:t,children:function(e){var r=e.field;return(0,f.jsxs)(i.NIc,{alignItems:"baseline",display:"inline-flex",children:[(0,f.jsx)(i.lXp,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:t,w:"50%",children:t}),(0,f.jsx)(i.IIB,W(W({},r),{},{autoComplete:"off",color:"gray.700",placeholder:"Please enter ".concat(t),ref:0===n?h:void 0,size:"sm"}))]})}})},t)}))})})}),(0,f.jsx)(i.zeN,{justifyContent:"flex-start",children:(0,f.jsxs)(i.hE2,{size:"sm",spacing:"8px",variant:"outline",children:[(0,f.jsx)(i.zxk,{onClick:d,variant:"outline",children:"Cancel"}),(0,f.jsx)(i.zxk,{bg:"primary.800",color:"white",form:"manual-detail-form",isLoading:s,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_hover:{bg:"primary.400"},children:"Save"})]})})]})]})}})]})};function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L=function(e){var n=e.connectorName,t=e.data,r=e.isSubmitting,s=void 0!==r&&r,o=e.onSaveClick,c=(0,i.qY0)(),a=c.isOpen,l=c.onOpen,d=c.onClose,h=(0,u.useRef)(null),p=function(){var e=(0,O.Z)(C().mark((function e(n,r){var i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={connection_key:t.connection_key,privacy_request_id:t.privacy_request_id,body:Z({},n)},o(i),d();case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(null===t||void 0===t?void 0:t.checked)&&(0,f.jsx)(i.zxk,{color:"gray.700",fontSize:"xs",h:"24px",onClick:l,variant:"outline",w:"58px",children:"Review"}),!(null!==t&&void 0!==t&&t.checked)&&(0,f.jsx)(i.zxk,{color:"white",bg:"primary.800",fontSize:"xs",h:"24px",onClick:l,w:"127px",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Begin manual input"}),(0,f.jsx)(D.J9,{enableReinitialize:!0,initialValues:Z({},t.fields),onSubmit:p,validateOnBlur:!1,validateOnChange:!1,validationSchema:E.Ry().shape({}),children:function(e){return(0,f.jsxs)(i.dys,{isOpen:a,placement:"right",initialFocusRef:h,onClose:d,size:"lg",children:[(0,f.jsx)(i.P1B,{}),(0,f.jsxs)(i.scA,{children:[(0,f.jsx)(i.cCv,{}),(0,f.jsxs)(i.OXI,{color:"gray.900",children:[(0,f.jsx)(i.xvT,{fontSize:"xl",mb:8,children:n}),(0,f.jsx)(i.izJ,{}),(0,f.jsx)(i.xvT,{fontSize:"md",mt:"4",children:"Manual erasure"}),(0,f.jsx)(i.xuv,{mt:"8px",children:(0,f.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",fontWeight:"normal",children:"Please delete the following PII fields associated with the selected subject if they are available. Once deleted, check the box to confirm the deletion."})})]}),(0,f.jsx)(i.Ng0,{children:(0,f.jsx)(D.l0,{id:"manual-detail-form",noValidate:!0,children:(0,f.jsx)(i.gCW,{align:"stretch",gap:"16px",children:Object.entries(t.fields).map((function(e){var n=(0,w.Z)(e,1)[0];return(0,f.jsx)(i.Ugi,{children:(0,f.jsx)(D.gN,{id:n,name:n,children:function(e){var t=e.field;return(0,f.jsxs)(i.NIc,{alignItems:"baseline",display:"inline-flex",children:[(0,f.jsx)(i.lXp,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:n,w:"50%",children:n}),(0,f.jsx)(i.XZJ,Z(Z({},t),{},{isChecked:!!t.value,onChange:t.onChange,name:n,id:n}))]})}})},n)}))})})}),(0,f.jsx)(i.zeN,{justifyContent:"flex-start",children:(0,f.jsxs)(i.hE2,{size:"sm",spacing:"8px",variant:"outline",children:[(0,f.jsx)(i.zxk,{onClick:d,variant:"outline",children:"Cancel"}),(0,f.jsx)(i.zxk,{bg:"primary.800",color:"white",form:"manual-detail-form",isLoading:s,loadingText:"Submitting",size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_hover:{bg:"primary.400"},children:"Save"})]})})]})]})}})]})};function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F=function(e){var n,t,r,s=e.subjectRequest,o=(0,R.T)(),c=(0,S.VY)(),a=c.errorAlert,l=c.successAlert,h=(0,S.HK)().handleError,p=(0,u.useState)([]),x=p[0],g=p[1],j=(0,u.useState)(!1),v=j[0],m=j[1],b=(0,u.useState)(!1),y=b[0],k=b[1],q=(0,P.W6)(),D=q.data,E=q.isFetching,T=q.isLoading,W=q.isSuccess,I=(0,z.w3)(),Z=(0,w.Z)(I,1)[0],N=_(s.policy.rules),F=(0,z.nL)(),U=(0,w.Z)(F,1)[0],V=(0,z.UR)(),M=(0,w.Z)(V,1)[0],X=(t=U,r=M,(n=N).includes(d.Us.ACCESS)?{ProcessingDetailComponent:A,uploadMutation:t,getUploadedWebhookDataEndpoint:z.$I.endpoints.getUploadedManualAccessWebhookData}:n.includes(d.Us.ERASURE)?{ProcessingDetailComponent:L,uploadMutation:r,getUploadedWebhookDataEndpoint:z.$I.endpoints.getUploadedManualErasureWebhookData}:null),J=X.ProcessingDetailComponent,H=X.uploadMutation,G=X.getUploadedWebhookDataEndpoint,Y=function(){var e=(0,O.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,Z(s.id).unwrap();case 4:l("Manual request has been received. Request now processing."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h(e.t0);case 10:return e.prev=10,m(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,O.Z)(C().mark((function e(n){var t,r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,H(n).unwrap();case 4:t={connection_key:n.connection_key,fields:{}},Object.entries(n.body).forEach((function(e){var n=(0,w.Z)(e,2),r=n[0],i=n[1];t.fields[r]=i||""})),r=x.map((function(e){return e.connection_key===t.connection_key?B(B({},e),{},{checked:!0,fields:B({},t.fields)}):e})),g(r),l("Manual input successfully saved!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(e.t0);case 14:return e.prev=14,k(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){return W&&D.length>0&&0===x.length&&function(){if(!(x.length>0)){var e=[],n=null===D||void 0===D?void 0:D.map((function(e){return e.connection_config.key}));null===n||void 0===n||n.every((function(n){return e.push(o(G.initiate({connection_key:n,privacy_request_id:s.id})))})),Promise.allSettled(e).then((function(e){var n=[];e.forEach((function(e,t){if("fulfilled"===e.status&&e.value.isSuccess&&e.value.data){var r={checked:e.value.data.checked,fields:{},connection_key:e.value.originalArgs.connection_key,privacy_request_id:e.value.originalArgs.privacy_request_id};Object.entries(e.value.data.fields).forEach((function(e){var n=(0,w.Z)(e,2),t=n[0],i=n[1];r.fields[t]=i||""})),n.push(r)}else a("An error occurred while loading manual input data for ".concat(D[t].connection_config.name))})),g(n)}))}}(),function(){}}),[D,x.length,o,a,W,s.id,G]),N.includes(d.Us.ACCESS)||N.includes(d.Us.ERASURE)?(0,f.jsxs)(i.gCW,{align:"stretch",spacing:8,children:[(0,f.jsxs)(i.xuv,{children:[(0,f.jsx)(i.X6q,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Manual Processing"}),(0,f.jsx)(i.izJ,{})]}),(0,f.jsx)(i.xuv,{children:(0,f.jsx)(i.xvT,{color:"gray.700",fontSize:"sm",children:"The following table details the integrations that require manual input from you."})}),(0,f.jsxs)(i.xuv,{children:[(E||T)&&(0,f.jsx)(i.M5Y,{children:(0,f.jsx)(i.$jN,{})}),W&&D?(0,f.jsx)(i.xJi,{children:(0,f.jsxs)(i.iA_,{size:"sm",variant:"unstyled",children:[(0,f.jsx)(i.hrZ,{children:(0,f.jsxs)(i.Tr,{children:[(0,f.jsx)(i.Th,{fontSize:"sm",fontWeight:"semibold",pl:"0",textTransform:"none",children:"Integration Identifier"}),(0,f.jsx)(i.Th,{})]})}),(0,f.jsxs)(i.p3B,{children:[D.length>0&&D.map((function(e){return(0,f.jsxs)(i.Tr,{display:"block",children:[(0,f.jsx)(i.Td,{pl:"0",children:e.connection_config.key}),(0,f.jsx)(i.Td,{children:x.length>0?(0,f.jsx)(J,{connectorName:e.connection_config.name,data:x.find((function(n){return n.connection_key===e.connection_config.key})),isSubmitting:y,onSaveClick:K}):null})]},e.id)})),0===D.length&&(0,f.jsx)(i.Tr,{children:(0,f.jsx)(i.Td,{colSpan:3,pl:"0",children:(0,f.jsx)(i.M5Y,{children:(0,f.jsx)(i.xvT,{children:"You don\u2018t have any Manual Process connections set up yet."})})})})]}),x.length>0&&x.every((function(e){return e.checked}))?(0,f.jsx)(i.$RU,{children:(0,f.jsx)(i.Tr,{children:(0,f.jsx)(i.Th,{pl:"0px",children:(0,f.jsx)(i.zxk,{color:"white",bg:"primary.800",fontSize:"xs",h:"24px",isLoading:v,loadingText:"Completing DSR",onClick:Y,w:"127px",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Complete DSR"})})})}):null]})}):null]})]}):null},U=t(74011),V=function(e){var n=e.daysLeft,t=e.includeText,r=e.status;if(!n||r===U.q.COMPLETE||r===U.q.CANCELED||r===U.q.DENIED||r===U.q.IDENTITY_UNVERIFIED)return null;var s="";switch(!0){case n>=10:s="green.500";break;case n<10&&n>4:s="orange.500";break;case n<5:s="red.400"}var o=t?"".concat(n," days left"):n;return(0,f.jsx)(i.Vp9,{backgroundColor:s,color:"white",fontWeight:"medium",fontSize:"sm",children:o})},M={approved:{bg:"yellow.500",label:"Approved"},complete:{bg:"green.500",label:"Completed"},awaiting_email_send:{bg:"gray.400",label:"Awaiting Email Send"},denied:{bg:"red.500",label:"Denied"},canceled:{bg:"red.600",label:"Canceled"},error:{bg:"red.800",label:"Error"},in_processing:{bg:"orange.500",label:"In Progress"},paused:{bg:"gray.400",label:"Paused"},pending:{bg:"blue.400",label:"New"},identity_unverified:{bg:"red.400",label:"Unverified"},requires_input:{bg:"yellow.400",label:"Requires Input"}},X=function(e){var n=e.status;return(0,f.jsx)(i.Cts,{color:"white",bg:M[n].bg,width:"100%",minWidth:"120px",lineHeight:"18px",textAlign:"center","data-testid":"request-status-badge",children:M[n].label})},J=t(61961),H=t(759);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var Y=(0,i.Gpc)((function(e,n){return(0,f.jsx)(i.zxk,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({ref:n,size:"xs",bg:"white",_loading:{opacity:1,div:{opacity:.4}},_hover:{bg:"gray.100"}},e))}));function K(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?K(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Q=(0,i.Gpc)((function(e,n){var t=e.buttonProps,r=e.children,s=e.onClose,o=e.subjectRequest,c=(0,H.Z)({subjectRequest:o}),a=c.handleApproveRequest,l=c.isLoading,u=(0,i.qY0)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y,$($({ref:n,onClick:u.onOpen,isLoading:l,isDisabled:l},t),{},{"data-testid":"privacy-request-approve-btn",children:r})),(0,f.jsx)(J.Z,{isOpen:u.isOpen,isLoading:l,onClose:function(){u.onClose(),null===s||void 0===s||s()},onApproveRequest:a,subjectRequest:o})]})})),ee=t(15759);function ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(t),!0).forEach((function(n){(0,y.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var re=(0,i.Gpc)((function(e,n){var t=e.buttonProps,r=e.children,s=e.onClose,o=e.subjectRequest,c=(0,H.Z)({subjectRequest:o}),a=c.handleDenyRequest,l=c.isLoading,u=(0,i.qY0)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y,te(te({ref:n,onClick:u.onOpen,isLoading:l,isDisabled:l},t),{},{"data-testid":"privacy-request-deny-btn",children:r})),(0,f.jsx)(ee.Z,{isOpen:u.isOpen,onClose:function(){u.onClose(),null===s||void 0===s||s()},onDenyRequest:a})]})})),ie=t(30199),se=function(e){var n=e.subjectRequest,t=n.id,r=n.status,s=n.policy;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.X6q,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mt:4,mb:4,children:"Request details"}),(0,f.jsx)(i.izJ,{}),(0,f.jsxs)(i.kCb,{alignItems:"center",children:[(0,f.jsx)(i.xvT,{mt:4,mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Request ID:"}),(0,f.jsx)(i.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:1,children:t}),(0,f.jsx)(x.Z,{copyText:t})]}),(0,f.jsxs)(i.kCb,{alignItems:"center",children:[(0,f.jsx)(i.xvT,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Request type:"}),(0,f.jsx)(i.xuv,{mr:1,mb:4,children:(0,f.jsx)(q,{rules:s.rules})})]}),(0,f.jsxs)(i.kCb,{children:[(0,f.jsx)(i.xvT,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Policy key:"}),(0,f.jsx)(i.xuv,{children:(0,f.jsx)(i.Vp9,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:n.policy.key})})]}),(0,f.jsxs)(i.kCb,{alignItems:"center",children:[(0,f.jsx)(i.xvT,{mb:0,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:"Status:"}),(0,f.jsxs)(i.Ugi,{spacing:"8px",children:[(0,f.jsx)(i.kCb,{children:(0,f.jsx)(X,{status:r})}),(0,f.jsxs)(i.hE2,{isAttached:!0,variant:"outline",borderRadius:"md",children:["error"===r&&(0,f.jsx)(ie.Z,{buttonProps:{size:"xs"},subjectRequest:n}),"pending"===r&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Q,{subjectRequest:n,children:"Approve"}),(0,f.jsx)(re,{subjectRequest:n,children:"Deny"})]})]}),(0,f.jsx)(V,{daysLeft:n.days_left,includeText:!0,status:n.status})]})]})]})},oe=function(e){var n=e.data,t=e.revealPII?n:String(n).replace(/./g,"*");return(0,f.jsx)(f.Fragment,{children:t})},ce=function(e){var n=e.revealPII,t=e.onChange;return(0,f.jsx)(i.rsf,{"data-testid":"pii-toggle",colorScheme:"secondary",isChecked:n,onChange:function(e){return t(e.target.checked)}})},ae=function(e){var n=e.subjectRequest,t=n.identity,r=n.identity_verified_at,s=n.custom_privacy_request_fields,o=(0,u.useState)(!1),c=o[0],a=o[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(i.kCb,{direction:"row",justifyContent:"space-between",children:[(0,f.jsx)(i.X6q,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mb:4,children:"Subject identities"}),(0,f.jsxs)(i.kCb,{flexShrink:0,alignItems:"flex-start",children:[(0,f.jsx)(ce,{revealPII:c,onChange:a}),(0,f.jsx)(i.xvT,{fontSize:"xs",ml:2,size:"sm",color:"gray.600",fontWeight:"500",children:"Reveal PII"})]})]}),(0,f.jsx)(i.izJ,{mb:4}),Object.entries(t).filter((function(e){return null!==(0,w.Z)(e,2)[1].value})).map((function(e){var n=(0,w.Z)(e,2),t=n[0],s=n[1],o=s.value,a=s.label;return(0,f.jsxs)(i.kCb,{alignItems:"flex-start",children:[(0,f.jsxs)(i.xvT,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[a,":"]}),(0,f.jsx)(i.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:(0,f.jsx)(oe,{data:o||"",revealPII:c})}),(0,f.jsx)(i.Vp9,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:r?"Verified":"Unverified"})]},t)})),s&&Object.keys(s).length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.X6q,{color:"gray.900",fontSize:"lg",fontWeight:"semibold",mt:4,mb:4,children:"Custom request fields"}),(0,f.jsx)(i.izJ,{mb:4}),Object.entries(s).filter((function(e){return(0,w.Z)(e,2)[1].value})).map((function(e){var n=(0,w.Z)(e,2),t=n[0],r=n[1];return(0,f.jsxs)(i.kCb,{alignItems:"flex-start",children:[(0,f.jsxs)(i.xvT,{mb:4,mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[r.label,":"]}),(0,f.jsx)(i.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:(0,f.jsx)(oe,{data:Array.isArray(r.value)?r.value.join(", "):r.value,revealPII:c})}),(0,f.jsx)(i.Vp9,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:"Unverified"})]},t)}))]})]})},le=function(e){var n=e.data;return(0,f.jsxs)(i.gCW,{align:"stretch",display:"flex-start",spacing:6,children:[(0,f.jsx)(i.xuv,{"data-testid":"privacy-request-details",children:(0,f.jsx)(se,{subjectRequest:n})}),(0,f.jsx)(i.xuv,{children:(0,f.jsx)(ae,{subjectRequest:n})}),"requires_input"===n.status&&(0,f.jsx)(i.xuv,{children:(0,f.jsx)(F,{subjectRequest:n})}),(0,f.jsx)(i.xuv,{children:(0,f.jsx)(b,{subjectRequest:n})})]})},ue=function(){var e,n=(0,s.useRouter)().query.id,t=void 0===n?"":n,r=(0,l.QA)({id:Array.isArray(t)?t[0]:t,verbose:!0},{skip:""===t}),u=r.data,d=r.isLoading;return e=r.isUninitialized||d?(0,f.jsx)(i.M5Y,{children:(0,f.jsx)(i.$jN,{})}):u&&0!==(null===u||void 0===u?void 0:u.items.length)?(0,f.jsx)(le,{data:null===u||void 0===u?void 0:u.items[0]}):(0,f.jsx)(i.xvT,{children:"404 no privacy request found"}),(0,f.jsxs)(o.Z,{title:"Privacy Requests - ".concat(t),children:[(0,f.jsx)(c.Z,{backPath:a.Jw}),(0,f.jsx)(i.X6q,{fontSize:"2xl",fontWeight:"semibold",children:"Privacy Request"}),e]})}},60041:function(e,n,t){"use strict";t.d(n,{Bw:function(){return o},D4:function(){return i},Dy:function(){return a},XD:function(){return l},cz:function(){return u},hE:function(){return c},oK:function(){return s}});var r=t(76649),i=function(e){return"error"in e},s=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},o=function(e){return(0,r.Ln)({status:"number",data:{}},e)},c=function(e){return(0,r.Ln)({detail:"string"},e)},a=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},6554:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/[id]",function(){return t(26514)}])},76649:function(e,n,t){"use strict";t.d(n,{Ln:function(){return r},uX:function(){return o}});const r=(e,n)=>s(e,n),i=Symbol("SOME"),s=(e,n)=>{if("string"==typeof e)return e===typeof n;if(Array.isArray(e))return i in e?e.some((e=>s(e,n))):!!Array.isArray(n)&&(0===e.length||n.every((n=>e.some((e=>s(e,n))))));if("object"!=typeof n||null===n)return!1;const t=n;return Object.entries(e).every((([e,n])=>s(n,t[e])))},o=e=>n=>r(e,n);class c{static narrow(e){return new c((n=>r(e,n)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const n=this.NF,t=e instanceof c?e.NF:e instanceof Function?e:n=>r(e,n);return new c((e=>n(e)&&t(e)))}}new c((e=>!0))}},function(e){e.O(0,[9774,2888,179],(function(){return n=6554,e(e.s=n);var n}));var n=e.O();_N_E=n}]);