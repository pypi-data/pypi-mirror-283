(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4623],{52261:function(e,t,n){"use strict";var r=n(90849),i=n(73679),o=n(90089),a=n(28841),c=n(27378),s=n(24246),l=["nodes","selected","onSelected"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=e.split("."),n=[];return t.forEach((function(e){var t=n.length>0?n[n.length-1]:null;t?n.push("".concat(t,".").concat(e)):n.push(e)})),n},p=function(e,t){return e===t||!!e.startsWith("".concat(t,"."))},h=function e(t,n,r){var i=null!==r&&void 0!==r?r:[];return t.forEach((function(t){t.children&&e(t.children,n,i),p(t.value,n)&&i.push(t)})),i},v=function(e){var t=e.node,n=e.isChecked,r=e.onChecked,i=e.isExpanded,o=e.onExpanded,c=e.isIndeterminate,l=e.isDisabled,u=e.children,d=t.value,f=t.label,p=!!t.children&&t.children.length>0;return(0,s.jsxs)(a.xuv,{children:[(0,s.jsxs)(a.xuv,{display:"flex",justifyContent:"space-between",_hover:{backgroundColor:"gray.100",cursor:"pointer"},onClick:function(){return o(t)},minHeight:8,children:[(0,s.jsx)(a.XZJ,{colorScheme:"complimentary",value:d,isChecked:!c&&n,isIndeterminate:c,isDisabled:l,onChange:function(){return r(t)},mx:2,"data-testid":"checkbox-".concat(f),children:f}),p?(0,s.jsx)(a.hU,{"data-testid":"expand-".concat(f),"aria-label":i?"collapse":"expand",icon:(0,s.jsx)(a.v4q,{boxSize:5}),variant:"ghost",onClick:function(){return o(t)},size:"sm",style:{transform:i?"rotate(180deg)":""}}):null]}),u&&(0,s.jsx)(a.xuv,{ml:5,children:u})]})};t.ZP=function(e){var t=e.nodes,n=e.selected,r=e.onSelected,u=(0,o.Z)(e,l),j=(0,c.useState)([]),b=j[0],x=j[1],m=(0,c.useState)([]),y=m[0],g=m[1];(0,c.useEffect)((function(){var e=n.map((function(e){return f(e)})).reduce((function(e,t){return e.concat(t)}),[]),r=n.map((function(e){return h(t,e)})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.value})),o=Array.from(new Set([].concat((0,i.Z)(e),(0,i.Z)(r))));g(o),x(o)}),[n,t]);var O=function(e){var o=[],a=[];if(b.indexOf(e.value)>=0)o=b.filter((function(t){return!p(t,e.value)})),a=n.filter((function(t){return!p(t,e.value)}));else{var c=h(t,e.value).map((function(e){return e.value}));o=[].concat((0,i.Z)(b),(0,i.Z)(c)),a=[].concat((0,i.Z)(n),[e.value])}x(o),r(a)},C=function(e){y.indexOf(e.value)>=0?g(y.filter((function(t){return!p(t,e.value)}))):g([].concat((0,i.Z)(y),[e.value]))},k=function e(r){if(r.children){var i=b.indexOf(r.value)>=0,o=y.indexOf(r.value)>=0,a=h(t,r.value),l=i&&r.children.length>0&&b.filter((function(e){return e.startsWith("".concat(r.value,"."))})).length+1!==a.length,u=function(e,t){var n=f(t).filter((function(e){return e!==t}));return e.filter((function(e){return n.includes(e)})).length>0}(n,r.value);return(0,s.jsx)(v,{node:r,isChecked:i,onChecked:O,isExpanded:o,onExpanded:C,isDisabled:u,isIndeterminate:l,children:o&&r.children.map((function(t){return(0,s.jsx)(c.Fragment,{children:e(t)},t.value)}))})}return null};return(0,s.jsx)(a.xuv,d(d({},u),{},{children:t.map((function(e){return(0,s.jsx)(a.xuv,{children:k(e)},e.value)}))}))}},92166:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var r=n(28841),i=n(27378),o=n(24246),a=function(e){var t=e.allColumns,n=e.selectedColumns,a=e.onChange,c=(0,i.useMemo)((function(){var e=new Map;return t.forEach((function(t){return e.set(t.name,!!n.find((function(e){return e.name===t.name})))})),e}),[t,n]),s=function(){c.forEach((function(e,t){return c.set(t,!1)})),a([])},l=function(e){var n,r=null!==(n=c.get(e.name))&&void 0!==n&&n;c.set(e.name,!r),a(t.filter((function(e){return c.get(e.name)})))};return(0,o.jsx)(r.v2r,{children:function(e){var i=e.onClose;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.j2t,{as:r.zxk,rightIcon:(0,o.jsx)(r.mCO,{}),variant:"outline",fontWeight:"normal","data-testid":"column-dropdown",children:"Columns"}),(0,o.jsx)(r.qyq,{children:(0,o.jsxs)(r.xuv,{px:2,children:[(0,o.jsxs)(r.xuv,{display:"flex",justifyContent:"space-between",mb:2,children:[(0,o.jsx)(r.zxk,{variant:"outline",size:"xs",onClick:s,"data-testid":"column-clear-btn",children:"Clear"}),(0,o.jsx)(r.zxk,{size:"xs",colorScheme:"primary",onClick:i,"data-testid":"column-done-btn",children:"Done"})]}),(0,o.jsx)(r.cOn,{colorScheme:"complimentary",children:(0,o.jsx)(r.Kqy,{children:t.map((function(e){var t=n.filter((function(t){return t.name===e.name})).length>0;return(0,o.jsx)(r.XZJ,{id:e.name,_hover:{bg:"gray.100"},isChecked:t,onChange:function(){return l(e)},"data-testid":"checkbox-".concat(e.name),children:e.name},e.name)}))})})]})})]})}})}},43212:function(e,t,n){"use strict";n.d(t,{Gn:function(){return a},zR:function(){return o}});var r=n(28841),i=n(24246),o=function(e){var t=e.title,n=e.onDelete;return(0,i.jsxs)(r.OXI,{py:2,display:"flex",alignItems:"center",children:[(0,i.jsx)(r.xvT,{mr:"2",children:t}),n?(0,i.jsx)(r.hU,{"aria-label":"delete",icon:(0,i.jsx)(r.lr0,{}),size:"xs",onClick:n,"data-testid":"delete-btn"}):null]})},a=function(e){var t=e.onClose,n=e.formId,o=e.isSaving;return(0,i.jsxs)(r.zeN,{justifyContent:"flex-start",children:[(0,i.jsx)(r.zxk,{onClick:t,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,i.jsx)(r.zxk,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",form:n,isLoading:o,children:"Save"})]})};t.ZP=function(e){var t=e.header,n=e.description,o=e.isOpen,a=e.onClose,c=e.children,s=e.footer;return(0,i.jsxs)(r.dys,{placement:"right",isOpen:o,onClose:a,size:"lg",children:[(0,i.jsx)(r.P1B,{}),(0,i.jsxs)(r.scA,{"data-testid":"edit-drawer-content",py:2,children:[(0,i.jsx)(r.xuv,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,i.jsx)(r.zxk,{variant:"ghost",onClick:a,"data-testid":"close-drawer-btn",children:(0,i.jsx)(r.LGN,{width:"17px"})})}),t,(0,i.jsxs)(r.Ng0,{children:[n?(0,i.jsx)(r.xvT,{fontSize:"sm",mb:4,children:n}):null,c]}),s]})]})}},51471:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(90849),i=n(28841),o=n(88038),a=n.n(o),c=n(86677),s=(n(27378),n(90768)),l=n(51365),u=n(60709),d=n(24246),f=function(){var e=(0,c.useRouter)();return(0,d.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,d.jsxs)(i.xuv,{children:[(0,d.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,d.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,d.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(u.fz)},children:"Configure"})]}),(0,d.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.children,n=e.title,r=e.padded,o=void 0===r||r,u=e.mainProps,p=(0,s.hz)(),v=(0,c.useRouter)(),j="/privacy-requests"===v.pathname||"/datastore-connection"===v.pathname,b=!(p.flags.privacyRequestsConfiguration&&j),x=(0,l.JE)(void 0,{skip:b}).data,m=(0,l.PW)(void 0,{skip:b}).data,y=p.flags.privacyRequestsConfiguration&&(!x||!m)&&j;return(0,d.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,d.jsxs)(a(),{children:[(0,d.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,d.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)(i.kCb,h(h({as:"main",direction:"column",py:o?6:0,px:o?10:0,h:o?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},u),{},{children:[y?(0,d.jsx)(f,{}):null,t]}))]})}},78624:function(e,t,n){"use strict";n.d(t,{D4:function(){return o.D4},MM:function(){return p},Ot:function(){return l},c6:function(){return d},cj:function(){return v},e$:function(){return c},fn:function(){return s},iC:function(){return h},nU:function(){return f},tB:function(){return u}});var r,i=n(90849),o=n(60041),a="An unexpected error occurred. Please try again.",c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,o.Bw)(e)){if((0,o.hE)(e.data))return e.data.detail;if((0,o.cz)(e.data)){var n,r=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null===r||void 0===r?void 0:r.msg,": ").concat(null===r||void 0===r?void 0:r.loc)}if(409===e.status&&(0,o.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,o.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function s(e){return"object"===typeof e&&null!=e&&"status"in e}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function u(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,o.oK)(e))return{status:e.originalStatus,message:e.data};if((0,o.Bw)(e)){var n=e.status;return{status:n,message:c(e,t.message)}}return t},p=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(d||(d={}));var h=(r={},(0,i.Z)(r,d.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,i.Z)(r,d.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,i.Z)(r,d.COMPASS,{label:"",fullName:""}),r),v=function(e){var t=e.split(".")[0];return t===d.AC?d.AC:t===d.GVL?d.GVL:d.COMPASS}},56069:function(e,t,n){"use strict";n.d(t,{R:function(){return p}});var r=n(90849),i=n(90089),o=n(28841),a=n(79894),c=n.n(a),s=n(24246),l=["backPath"],u=["onClick"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.onClick,n=(0,i.Z)(e,u);return(0,s.jsxs)(o.kCb,f(f({alignItems:"center",mt:-4,mb:3,onClick:t,cursor:"pointer"},n),{},{children:[(0,s.jsx)(o.hU,{"aria-label":"Back",icon:(0,s.jsx)(o.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,s.jsx)(o.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};t.Z=function(e){var t=e.backPath,n=(0,i.Z)(e,l);return(0,s.jsxs)(o.kCb,f(f({alignItems:"center",mb:6},n),{},{children:[(0,s.jsx)(c(),{href:t,passHref:!0,children:(0,s.jsx)(o.hU,{"aria-label":"Back",icon:(0,s.jsx)(o.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,s.jsx)(c(),{href:t,passHref:!0,children:(0,s.jsx)(o.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},24753:function(e,t,n){"use strict";n.d(t,{MA:function(){return u},Vo:function(){return f},t5:function(){return d}});var r=n(90849),i=n(28841),o=n(24246);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},l=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,o.jsx)(s,{children:e});return c(c({},u),{description:t})},f=function(e){var t=(0,o.jsx)(l,{children:e});return c(c({},u),{description:t,status:"error"})}},52562:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var r=function(e){var t=e.dataCategories,n=e.mostLikelyCategories;return null!==t&&void 0!==t&&t.length?t:null!==n&&void 0!==n&&n.length?[n.reduce((function(e,t){var n,r;return(null!==(n=t.confidence)&&void 0!==n?n:0)>(null!==(r=e.confidence)&&void 0!==r?r:0)?t:e})).fides_key]:[]}},2424:function(e,t,n){"use strict";var r=n(90849),i=n(90089),o=n(28841),a=n(24246),c=["name","onClose"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.name,n=e.onClose,r=(0,i.Z)(e,c),s=l({backgroundColor:"primary.400",color:"white","data-testid":"taxonomy-entity-".concat(t),width:"fit-content",size:"sm"},r);return n?(0,a.jsxs)(o.Vp9,l(l({display:"flex",justifyContent:"space-between"},s),{},{children:[(0,a.jsx)(o.Sn0,{children:t}),(0,a.jsx)(o.SD9,{onClick:n,color:"white"})]})):(0,a.jsx)(o.Vp9,l(l({},s),{},{children:t}))}},64929:function(e,t,n){"use strict";n.d(t,{C:function(){return r},P:function(){return i}});var r=function e(t,n){var r;if(null==n&&t.every((function(e){return void 0===e.parent_key})))r=t;else{var i=null!==n&&void 0!==n?n:null;r=t.filter((function(e){return e.parent_key===i}))}return r.map((function(n){var r,i,o=n.fides_key;return{value:n.fides_key,label:""===n.name||null==n.name?n.fides_key:n.name,description:n.description,children:e(t,o),is_default:null!==(r=n.is_default)&&void 0!==r&&r,active:null!==(i=n.active)&&void 0!==i&&i}}))},i=function(e){var t=e.split(".");return 1===t.length?"":t.slice(0,t.length-1).join(".")}},53513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ee}});var r=n(86677),i=n(51471),o=n(56069),a=n(60709),c=n(28841),s=n(27378),l=n(60245),u=n(92166),d=n(90768),f=n(44047),p=n(10612),h=n(55732),v=n(97865),j=n(34707),b=n.n(j),x=n(78624),m=n(24753),y=n(4938),g=n(66334),O=n(90849),C=n(65201);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e,t,n){var r=e.collections.map((function(e,r){return r===n?t:e}));return w(w({},e),{collections:r})},D=function(e,t,n,r){var i=function(e,t,n){var r=e.fields.map((function(e,r){return r===n?t:e}));return w(w({},e),{fields:r})}(e.collections[n],t,r);return P(e,i,n)},S=function(e){return e.classifications.reduce((function(e,t){var n,r;return(null!==(n=e.aggregated_score)&&void 0!==n?n:0)<(null!==(r=t.aggregated_score)&&void 0!==r?r:0)?t:e}))},E=function(e,t,n){return(0,C.ZP)(e,(function(e){var r=new Map(t.collections.map((function(e){return[e.name,e]})));e.collections.forEach((function(e){var t,i=r.get(e.name);if(!n||(null===i||void 0===i?void 0:i.name)===n){var o=new Map(null===i||void 0===i||null===(t=i.fields)||void 0===t?void 0:t.map((function(e){return[e.name,e]})));e.fields.forEach((function(e){if(!(e.data_categories&&e.data_categories.length>0)){var t=o.get(e.name);if(t&&t.classifications.length>0){var n=S(t);e.data_categories=[n.label]}}}))}}))}))},_=function(e,t){var n=e.collections.filter((function(e,n){return n!==t}));return w(w({},e),{collections:n})},Z=n(24246),z=function(){var e=(0,d.hz)(),t=(0,l.v9)(g.n0),n=(0,l.v9)(f.Bt),r=(0,l.v9)(f.lG),i=(0,g.TG)(),o=(0,v.Z)(i,2),a=o[0],u=o[1].isLoading,p=(0,f.MD)(),j=(0,v.Z)(p,2),O=j[0],C=j[1].isLoading,k=u||C,w=(0,c.pmc)(),P=(0,s.useMemo)((function(){var e,t;return null!==(e=null===r||void 0===r||null===(t=r.fields)||void 0===t?void 0:t.reduce((function(e,t){return t.classifications.length>0?e+1:e}),0))&&void 0!==e?e:0}),[r]),D=function(){var i=(0,h.Z)(b().mark((function i(){var o,c,s,l,u;return b().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!k&&t&&n){i.next=2;break}return i.abrupt("return");case 2:return o=E(t,n,e.flags.datasetClassificationUpdates?null===r||void 0===r?void 0:r.name:void 0),i.prev=3,i.next=6,a(o);case 6:if(c=i.sent,!(0,x.D4)(c)){i.next=10;break}return w((0,m.Vo)((0,x.e$)(c.error))),i.abrupt("return");case 10:if(!e.flags.datasetClassificationUpdates){i.next=24;break}if(w((0,m.t5)("Collection classified and approved")),s=0,o.collections.forEach((function(e){e.fields.forEach((function(e){e.data_categories&&0!==e.data_categories.length||(s+=1)}))})),0!==s){i.next=22;break}return i.next=17,O({dataset_fides_key:t.fides_key,status:y.Wg.REVIEWED});case 17:if(l=i.sent,!(0,x.D4)(l)){i.next=21;break}return w((0,m.Vo)((0,x.e$)(l.error))),i.abrupt("return");case 21:w((0,m.t5)("Dataset classified and approved"));case 22:i.next=31;break;case 24:return i.next=26,O({dataset_fides_key:t.fides_key,status:y.Wg.REVIEWED});case 26:if(u=i.sent,!(0,x.D4)(u)){i.next=30;break}return w((0,m.Vo)((0,x.e$)(u.error))),i.abrupt("return");case 30:w((0,m.t5)("Dataset classified and approved"));case 31:i.next=36;break;case 33:i.prev=33,i.t0=i.catch(3),w((0,m.Vo)("".concat(i.t0)));case 36:case"end":return i.stop()}}),i,null,[[3,33]])})));return function(){return i.apply(this,arguments)}}();return n&&r&&n.status===y.Wg.COMPLETE?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(c.m$N.p,{flexGrow:1,textAlign:"center",fontSize:"sm",color:"gray.600",children:[(0,Z.jsx)(c.m$N.span,{fontWeight:"bold",children:P})," ",1===P?"field has":"fields have"," been identified within this"," ",(0,Z.jsx)(c.m$N.span,{fontWeight:"bold",children:r.name})," ","table that are likely to contain personal data."]}),e.flags.datasetClassificationUpdates?(0,Z.jsx)(c.zxk,{size:"sm",variant:"primary",flexShrink:0,onClick:D,isLoading:k,isDisabled:k,"data-testid":"approve-classification-btn",children:"Approve classifications"}):(0,Z.jsx)(c.zxk,{size:"sm",variant:"primary",flexShrink:0,onClick:D,isLoading:k,isDisabled:k,"data-testid":"approve-classification-btn",children:"Approve dataset"})]}):(0,Z.jsx)(c.LZC,{})},A=n(2424),T=function(e){var t=e.attribute,n=e.field,r=e.classifyField;if("data_categories"===t){var i,o=void 0!==r?S(r):void 0,a=void 0!==o?[o.label]:[],s=null!==(i=n.data_categories)&&void 0!==i?i:[],l=s.length>0?s:a;return(0,Z.jsx)(c.ua7,{placement:"right",label:l===a?"Fides has generated these data categories for you. You can override them by modifying the field.":"",children:(0,Z.jsx)(c.xuv,{display:"inline-block",children:l.map((function(e){return(0,Z.jsx)(c.xuv,{mr:2,mb:2,children:(0,Z.jsx)(A.Z,{name:e})},"".concat(n.name,"-").concat(e))}))})})}return(0,Z.jsx)(Z.Fragment,{children:n[t]})},L=n(43212),F=n(34090),I=n(43139),N=n(52562),M={tooltip:"A UI-friendly label for the Dataset."},W={tooltip:"A human-readable description of the Dataset."},R={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all collections in the Dataset."},V={tooltip:"A human-readable description of the collection."},q={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all fields in the collection."},G={tooltip:"A human-readable description of the field."},Y={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to this field."},U=n(38687),B=n(52261),J=n(64929);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){var t=e.dataCategories,n=e.checked,r=e.onChecked,i=e.buttonProps,o=e.buttonLabel,a=(0,s.useMemo)((function(){return(0,J.C)(t)}),[t]),l={variant:"outline",fontWeight:"normal",size:"sm",borderRadius:"sm",textAlign:"left",_hover:{backgroundColor:"transparent"},_active:{backgroundColor:"transparent"},rightIcon:(0,Z.jsx)(c.mCO,{}),width:"100%"},u=null!==i&&void 0!==i?i:l,d=null!==o&&void 0!==o?o:"Select data categories";return(0,Z.jsxs)(c.v2r,{closeOnSelect:!0,children:[(0,Z.jsx)(c.j2t,X(X({as:c.zxk},u),{},{"data-testid":"data-category-dropdown",children:d})),(0,Z.jsx)(c.qyq,{children:(0,Z.jsxs)(c.xuv,{maxHeight:"50vh",minWidth:"300px",overflowY:"scroll",children:[(0,Z.jsxs)(c.xuv,{position:"sticky",top:0,zIndex:1,backgroundColor:"white",pt:1,children:[(0,Z.jsx)(c.__7,{children:(0,Z.jsxs)(c.xuv,{display:"flex",justifyContent:"space-between",px:2,mb:2,children:[(0,Z.jsx)(c.sNh,{as:c.zxk,variant:"outline",size:"xs",onClick:function(){return r([])},mr:2,width:"auto",closeOnSelect:!1,"data-testid":"data-category-clear-btn",children:"Clear"}),(0,Z.jsx)(c.xvT,{mr:2,children:"Data Categories"}),(0,Z.jsx)(c.sNh,{as:c.zxk,size:"xs",colorScheme:"primary",color:"white",_hover:{backgroundColor:"primary.600"},width:"auto","data-testid":"data-category-done-btn",children:"Done"})]})}),(0,Z.jsx)(c.RaW,{})]}),(0,Z.jsx)(c.xuv,{px:2,"data-testid":"data-category-checkbox-tree",children:(0,Z.jsx)(B.ZP,{nodes:a,selected:n,onSelected:r})})]})})]})},Q=function(e){var t=e.dataCategories,n=e.mostLikelyCategories,r=e.checked,i=e.onChecked,o=e.tooltip,a=r.slice().sort((function(e,t){return e.localeCompare(t)}));return(0,Z.jsxs)(c.rjZ,{templateColumns:"1fr 3fr",children:[(0,Z.jsx)(c.lXp,{children:"Data Categories"}),n?(0,Z.jsxs)(c.xuv,{display:"flex",alignItems:"center",children:[(0,Z.jsx)(c.xuv,{mr:"2",width:"100%",children:(0,Z.jsx)(c.P$4,{dataCategories:t,mostLikelyCategories:n,checked:r,onChecked:i})}),(0,Z.jsx)(U.Z,{label:o})]}):(0,Z.jsxs)(c.Kqy,{children:[(0,Z.jsxs)(c.xuv,{display:"flex",alignItems:"center",children:[(0,Z.jsx)(c.xuv,{mr:"2",width:"100%",children:(0,Z.jsx)(K,{dataCategories:t,checked:r,onChecked:i})}),(0,Z.jsx)(U.Z,{label:o})]}),(0,Z.jsx)(c.Kqy,{"data-testid":"selected-categories",children:a.map((function(e){return(0,Z.jsx)(A.Z,{name:e,onClose:function(){var t;t=e,i(r.filter((function(e){return e!==t})))}},e)}))})]})]})};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te="edit-collection-or-field-form",ne=function(e){var t,n=e.values,r=e.onSubmit,i=e.dataType,o={description:null!==(t=n.description)&&void 0!==t?t:"",data_categories:n.data_categories},a=(0,l.v9)(p.qb).filter((function(e){return e.active})),u=(0,l.v9)(f.t6),d=(0,s.useMemo)((function(){if(a&&u){var e=new Map(a.map((function(e){return[e.fides_key,e]})));return u.classifications.map((function(t){var n=t.label;return ee({fides_key:n,confidence:t.aggregated_score},e.get(n))}))}}),[a,u]),h=(0,s.useState)((function(){return(0,N.I)({dataCategories:o.data_categories,mostLikelyCategories:d})})),v=h[0],j=h[1],b="collection"===i?V.tooltip:G.tooltip,x="collection"===i?q.tooltip:Y.tooltip;return(0,Z.jsx)(F.J9,{initialValues:o,onSubmit:function(e){var t=ee(ee({},e),{data_categories:v});r(t)},children:(0,Z.jsx)(F.l0,{id:te,children:(0,Z.jsxs)(c.Kqy,{children:[(0,Z.jsx)(I.j0,{name:"description",label:"Description",tooltip:b,"data-testid":"description-input"}),(0,Z.jsx)(Q,{dataCategories:a,mostLikelyCategories:d,checked:v,onChecked:j,tooltip:x})]})})})};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe,ae=function(e){var t=e.field,n=e.isOpen,r=e.onClose,i=(0,l.v9)(g.n0),o=(0,l.v9)(g.gR),a=(0,l.v9)(g.mZ),s=(0,g.TG)(),u=(0,v.Z)(s,1)[0],d=(0,c.qY0)(),f=d.isOpen,p=d.onOpen,h=d.onClose;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(L.ZP,{isOpen:n,onClose:r,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,Z.jsx)(L.zR,{title:"Field Name: ".concat(t.name),onDelete:p}),footer:(0,Z.jsx)(L.Gn,{onClose:r,formId:te}),children:(0,Z.jsx)(ne,{values:t,onSubmit:function(e){if(i&&void 0!==o&&void 0!==a){var n=ie(ie({},t),e),c=D(i,n,o,a);u(c),r()}},dataType:"field"})}),(0,Z.jsx)(c.cVQ,{isOpen:f,onClose:h,onConfirm:function(){if(i&&void 0!==o&&void 0!==a){var e=function(e,t,n){var r=e.collections[t],i=r.fields.filter((function(e,t){return t!==n})),o=w(w({},r),{fields:i});return P(e,o,t)}(i,o,a);u(e),r()}},title:"Delete Field",message:(0,Z.jsxs)(c.xvT,{children:["You are about to permanently delete the field named"," ",(0,Z.jsx)(c.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})};!function(e){e.DATASET="dataset",e.COLLECTION="collection",e.FIELD="field"}(oe||(oe={}));var ce=function(e){var t=e.columns,n=(0,l.I0)(),r=(0,l.v9)(g.pD),i=(0,l.v9)(g.FJ),o=(0,l.v9)(g.U3),a=(0,l.v9)(f.a$),s=function(e){n((0,g.EQ)(e)),n((0,g.JY)(oe.FIELD))};return(0,Z.jsxs)(c.xuv,{children:[(0,Z.jsxs)(c.iA_,{size:"sm","data-testid":"dataset-fields-table",children:[(0,Z.jsx)(c.hrZ,{children:(0,Z.jsx)(c.Tr,{children:t.map((function(e){return(0,Z.jsx)(c.Th,{pl:0,"data-testid":"column-".concat(e.name),children:e.name},e.name)}))})}),(0,Z.jsx)(c.p3B,{children:(null!==r&&void 0!==r?r:[]).map((function(e,n){return(0,Z.jsx)(c.Tr,{_hover:{bg:"gray.50"},cursor:"pointer",onClick:function(){return s(n)},tabIndex:0,onKeyPress:function(e){"Enter"===e.key&&s(n)},"data-testid":"field-row-".concat(e.name),children:t.map((function(t){return(0,Z.jsx)(c.Td,{pl:0,children:(0,Z.jsx)(T,{field:e,classifyField:a.get(e.name),attribute:t.attribute})},"".concat(t.name,"-").concat(e.name))}))},e.name)}))})]}),i?(0,Z.jsx)(ae,{isOpen:o===oe.FIELD,onClose:function(){n((0,g.EQ)(void 0)),n((0,g.JY)(void 0))},field:i}):null]})},se=function(){var e,t=(0,l.v9)(f.Bt),n=null!==(e=null===t||void 0===t?void 0:t.status)&&void 0!==e?e:y.Wg.REVIEWED,r=(0,s.useMemo)((function(){var e,n;return null!==(e=null===t||void 0===t||null===(n=t.collections)||void 0===n?void 0:n.reduce((function(e,t){return e+t.fields.reduce((function(e,t){return t.classifications.length>0?e+1:e}),0)}),0))&&void 0!==e?e:0}),[t]),i=0===r?"Fides did not identify any fields that are likely to contain personal data, but there may be some.":1===r?"Fides identified a field that is likely to contain personal data.":"Fides identified ".concat(r," fields that are likely to contain personal data.");return(0,Z.jsx)(c.gCW,{align:"left",mb:6,children:n===y.Wg.COMPLETE?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(c.Ugi,{children:[(0,Z.jsx)(c.X6q,{fontSize:"2xl",children:"Dataset classification ready for review"}),(0,Z.jsx)(c.scM,{fontSize:"2xl"})]}),(0,Z.jsxs)(c.xvT,{fontSize:"sm",color:"gray.600",maxW:"720px",children:[i," For each table, please review the recommended data categories. You can accept the recommendation or update any field before approving."]})]}):(0,Z.jsx)(c.X6q,{fontSize:"2xl",children:"Dataset"})})};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e){var t=e.collection,n=e.isOpen,r=e.onClose,i=(0,l.v9)(g.n0),o=(0,l.v9)(g.gR),a=(0,g.TG)(),s=(0,v.Z)(a,1)[0],u=(0,c.pmc)(),d=(0,c.qY0)(),f=d.isOpen,p=d.onOpen,j=d.onClose,x=function(){var e=(0,h.Z)(b().mark((function e(n){var a,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||void 0===o){e.next=13;break}return a=ue(ue({},t),n),c=P(i,a,o),e.prev=3,e.next=6,s(c);case 6:u((0,m.t5)("Successfully modified collection")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),u((0,m.Vo)(e.t0));case 12:r();case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,h.Z)(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||void 0===o){e.next=14;break}return t=_(i,o),e.prev=2,e.next=5,s(t);case 5:u((0,m.t5)("Successfully deleted collection")),n=i.collections.length>0?0:void 0,(0,g.Fy)(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),u((0,m.Vo)(e.t0));case 13:r();case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(L.ZP,{isOpen:n,onClose:r,description:"Collections are an array of objects that describe the Dataset's collections. Provide additional context to this collection by filling out the fields below.",header:(0,Z.jsx)(L.zR,{title:"Collection Name: ".concat(t.name),onDelete:p}),footer:(0,Z.jsx)(L.Gn,{onClose:r,formId:te}),children:(0,Z.jsx)(ne,{values:t,onSubmit:x,dataType:"collection"})}),(0,Z.jsx)(c.cVQ,{isOpen:f,onClose:j,onConfirm:y,title:"Delete Collection",message:(0,Z.jsxs)(c.xvT,{children:["You are about to permanently delete the collection named"," ",(0,Z.jsx)(c.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})};function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he="edit-field-drawer",ve=function(e){var t,n,r,i=e.values,o=e.onSubmit,a={name:null!==(t=i.name)&&void 0!==t?t:"",description:null!==(n=i.description)&&void 0!==n?n:"",data_categories:i.data_categories},u=(0,l.v9)(p.qb),d=(0,s.useState)(null!==(r=a.data_categories)&&void 0!==r?r:[]),f=d[0],h=d[1];return(0,Z.jsx)(F.J9,{initialValues:a,onSubmit:function(e){var t=pe(pe({},e),{data_categories:f});o(t)},children:(0,Z.jsx)(F.l0,{id:he,children:(0,Z.jsxs)(c.Kqy,{spacing:"3",children:[(0,Z.jsx)(I.j0,{name:"name",label:"Name",tooltip:M.tooltip,"data-testid":"name-input"}),(0,Z.jsx)(I.j0,{name:"description",label:"Description",tooltip:W.tooltip,"data-testid":"description-input"}),(0,Z.jsx)(Q,{dataCategories:u,checked:f,onChecked:h,tooltip:R.tooltip})]})})})};function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=function(e){var t=e.dataset,n=e.isOpen,i=e.onClose,o=(0,g.TG)(),a=(0,v.Z)(o,1)[0],s=(0,g.QY)(),l=(0,v.Z)(s,1)[0],u=(0,r.useRouter)(),d=(0,c.pmc)(),f=(0,c.qY0)(),p=f.isOpen,j=f.onOpen,y=f.onClose,O=function(){var e=(0,h.Z)(b().mark((function e(n){var r,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=be(be({},t),n),e.prev=1,e.next=4,a(r);case 4:o=e.sent,(0,x.D4)(o)?d((0,m.Vo)((0,x.e$)(o.error))):d((0,m.t5)("Successfully modified dataset")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d((0,m.Vo)(e.t0));case 11:i();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,h.Z)(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fides_key,e.next=3,l(n);case 3:r=e.sent,(0,x.D4)(r)?d((0,m.Vo)((0,x.e$)(r.error))):d((0,m.t5)("Successfully deleted dataset")),(0,g.Zl)(void 0),u.push("/dataset"),i();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(L.ZP,{isOpen:n,onClose:i,description:"A Dataset takes a database schema (tables and columns) and adds Fides privacy categorizations. Provide additional context to this dataset by filling out the fields below.",header:(0,Z.jsx)(L.zR,{title:"Dataset Name: ".concat(t.name),onDelete:j}),footer:(0,Z.jsx)(L.Gn,{onClose:i,formId:he}),children:(0,Z.jsx)(ve,{values:t,onSubmit:O})}),(0,Z.jsx)(c.cVQ,{isOpen:p,onClose:y,onConfirm:C,title:"Delete Dataset",message:(0,Z.jsxs)(c.xvT,{children:["You are about to permanently delete the dataset named"," ",(0,Z.jsx)(c.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name}),". Are you sure you would like to continue?"]})})]})},me=n(90089),ye=n(79894),ge=n.n(ye),Oe=["children","isDisabled","onClick"];function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=function(e){var t=e.children,n=e.isDisabled,r=e.onClick,i=(0,me.Z)(e,Oe);return(0,Z.jsx)(c.sNh,ke(ke({isDisabled:n,_hover:{backgroundColor:"gray.100"},fontSize:"sm",onClick:r},i),{},{children:t}))},Pe=function(e){var t=e.onModifyCollection,n=e.onModifyDataset;return(0,Z.jsxs)(c.v2r,{size:"sm",children:[(0,Z.jsx)(c.j2t,{as:c.zxk,variant:"outline","data-testid":"more-actions-btn",children:(0,Z.jsx)(c.nXP,{})}),(0,Z.jsxs)(c.qyq,{children:[(0,Z.jsxs)(c.kSQ,{title:"Collections",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,Z.jsx)(c.RaW,{}),(0,Z.jsx)(we,{isDisabled:!0,children:"Add a collection"}),(0,Z.jsx)(we,{onClick:t,"data-testid":"modify-collection",children:"Modify collection"})]}),(0,Z.jsxs)(c.kSQ,{title:"Datasets",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,Z.jsx)(c.RaW,{}),(0,Z.jsx)(we,{children:(0,Z.jsx)(ge(),{href:"/dataset",children:"Select new dataset"})}),(0,Z.jsx)(we,{isDisabled:!0,children:"Classify this dataset"}),(0,Z.jsx)(we,{onClick:n,"data-testid":"modify-dataset",children:"Modify dataset"})]})]})]})},De=[{name:"Field Name",attribute:"name"},{name:"Description",attribute:"description"},{name:"Personal Data Categories",attribute:"data_categories"}],Se=function(e){var t=e.fidesKey,n=(0,l.I0)(),r=function(e){var t=(0,g.oM)(e),n=t.data,r=t.isLoading,i=(0,d.hz)(),o=(0,f.Tc)(e,{skip:!i.plus}).isLoading;return(0,p.MO)(),{isLoading:r||o,dataset:n}}(t),i=r.dataset,o=r.isLoading,a=(0,l.v9)(g.fQ),h=(0,l.v9)(g.Jb),v=(0,l.v9)(g.U3),j=(0,s.useState)(De),b=j[0],x=j[1];(0,p.MO)(),(0,s.useEffect)((function(){i&&n((0,g.Zl)(i.fides_key))}),[n,i]),(0,s.useEffect)((function(){return function(){n((0,g.Zl)(void 0))}}),[]);return o?(0,Z.jsx)(c.$jN,{}):i?(0,Z.jsxs)(c.xuv,{children:[(0,Z.jsx)(se,{}),(0,Z.jsxs)(c.Ugi,{mb:4,children:[(0,Z.jsx)(c.PhF,{onChange:function(e){n((0,g.Fy)(e.target.selectedIndex))},width:"fit-content",flexShrink:0,"data-testid":"collection-select",children:(null!==a&&void 0!==a?a:[]).map((function(e){return(0,Z.jsx)("option",{value:e.name,children:e.name},e.name)}))}),(0,Z.jsx)(z,{}),(0,Z.jsx)(c.xuv,{children:(0,Z.jsx)(u.s,{allColumns:De,selectedColumns:b,onChange:x})}),(0,Z.jsx)(Pe,{onModifyCollection:function(){return n((0,g.JY)(oe.COLLECTION))},onModifyDataset:function(){return n((0,g.JY)(oe.DATASET))}})]}),(0,Z.jsx)(ce,{columns:b}),h?(0,Z.jsx)(de,{collection:h,isOpen:v===oe.COLLECTION,onClose:function(){return n((0,g.JY)(void 0))}}):null,i?(0,Z.jsx)(xe,{dataset:i,isOpen:v===oe.DATASET,onClose:function(){return n((0,g.JY)(void 0))}}):null]}):(0,Z.jsx)("div",{children:"Dataset not found"})},Ee=function(){var e=(0,r.useRouter)().query.id;if(!e)return(0,Z.jsx)(i.Z,{title:"Dataset",children:"Dataset not found"});var t=Array.isArray(e)?e[0]:e;return(0,Z.jsxs)(i.Z,{title:"Dataset - ".concat(e),children:[(0,Z.jsx)(o.Z,{backPath:a.$m}),(0,Z.jsx)(Se,{fidesKey:t})]})}},60041:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return i},Dy:function(){return s},XD:function(){return l},cz:function(){return u},hE:function(){return c},oK:function(){return o}});var r=n(76649),i=function(e){return"error"in e},o=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},a=function(e){return(0,r.Ln)({status:"number",data:{}},e)},c=function(e){return(0,r.Ln)({detail:"string"},e)},s=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},87736:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[id]",function(){return n(53513)}])},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return a}});const r=(e,t)=>o(e,t),i=Symbol("SOME"),o=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>o(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>o(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>o(t,n[e])))},a=e=>t=>r(e,t);class c{static narrow(e){return new c((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof c?e.NF:e instanceof Function?e:t=>r(e,t);return new c((e=>t(e)&&n(e)))}}new c((e=>!0))}},function(e){e.O(0,[9774,2888,179],(function(){return t=87736,e(e.s=t);var t}));var t=e.O();_N_E=t}]);