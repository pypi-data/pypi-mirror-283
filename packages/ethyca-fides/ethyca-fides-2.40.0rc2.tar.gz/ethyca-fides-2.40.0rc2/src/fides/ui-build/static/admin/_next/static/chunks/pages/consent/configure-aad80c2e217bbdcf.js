(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{65535:function(e,n,t){"use strict";t.d(n,{ZS:function(){return a},a4:function(){return r}});var s=t(80406),i=t(28703).u.injectEndpoints({endpoints:function(e){return{getPurposes:e.query({query:function(){return"purposes"}})}}}),r=i.useGetPurposesQuery,o={purposes:{},special_purposes:{}},a=(0,s.P1)(i.endpoints.getPurposes.select(),(function(e){return e.data||o}))},56566:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var s=t(28841),i=t(27378),r=t(51471),o=t(90849),a=t(92222),u=t(59003),c=t(90768),l=t(49938),p=t(86677),d=t(90089),f=t(24246),x=["resetFilters","isOpen","onClose","children"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=function(e,n){var t=e.filter((function(e){return e.isChecked}));return t.length>0?"".concat(n,"=").concat(t.map((function(e){return e.value})).join("&".concat(n,"="))):void 0},C=function(e){var n=e.value,t=e.displayText,i=e.isChecked,r=e.onCheckboxChange;return(0,f.jsx)(s.XZJ,{value:n,height:"20px",mb:"25px",isChecked:i,onChange:function(e){var t=e.target;r(n,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,f.jsx)(s.xvT,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:t})},n)},b=function(e){var n=e.options,t=e.header,r=e.onCheckboxChange,o=e.columns,a=void 0===o?3:o,u=e.numDefaultOptions,c=void 0===u?15:u,l=(0,i.useState)(!1),p=l[0],d=l[1],x=p?n:n.slice(0,c),g=n.length>c;return(0,f.jsxs)(s.Qdk,{border:"0px",padding:"12px 8px 8px 12px",children:[(0,f.jsx)(s.X6q,{height:"56px",children:(0,f.jsxs)(s.KFZ,{height:"100%",children:[(0,f.jsx)(s.xuv,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:t}),(0,f.jsx)(s.XEm,{})]})}),(0,f.jsxs)(s.Hk3,{id:"panel-".concat(t),children:[(0,f.jsx)(s.MIq,{columns:a,children:x.map((function(e){return(0,f.jsx)(C,h(h({},e),{},{onCheckboxChange:r}),e.value)}))}),!p&&g?(0,f.jsx)(s.zxk,{size:"sm",variant:"ghost",onClick:function(){d(!0)},children:"View more"}):null,p&&g?(0,f.jsx)(s.zxk,{size:"sm",variant:"ghost",onClick:function(){d(!1)},children:"View less"}):null]})]})},v=function(e){var n=e.heading,t=e.children;return(0,f.jsxs)(s.xuv,{padding:"12px 8px 8px 12px",maxHeight:600,children:[n?(0,f.jsx)(s.X6q,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:n}):null,t]})},m=function(e){var n=e.resetFilters,t=e.isOpen,i=e.onClose,r=e.children,o=(0,d.Z)(e,x);return(0,f.jsxs)(s.u_l,h(h({isOpen:t,onClose:i,isCentered:!0,size:"2xl"},o),{},{children:[(0,f.jsx)(s.ZAr,{}),(0,f.jsxs)(s.hzk,{children:[(0,f.jsx)(s.xBx,{children:"Filters"}),(0,f.jsx)(s.olH,{}),(0,f.jsx)(s.izJ,{}),(0,f.jsx)(s.fef,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:r}),(0,f.jsx)(s.mzw,{children:(0,f.jsxs)(s.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,f.jsx)(s.zxk,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Reset filters"}),(0,f.jsx)(s.zxk,{colorScheme:"primary",size:"sm",onClick:i,flexGrow:1,children:"Done"})]})})]})]}))},O=t(60709),y=t(36523),k=t(73679),P=t(6848),w=t(65535),_=t(75846);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var D=function(e){var n=e.isOpen,t=e.isTcfEnabled,i=e.onClose,r=e.resetFilters,o=e.purposeOptions,a=e.onPurposeChange,u=e.dataUseOptions,c=e.onDataUseChange,l=e.legalBasisOptions,p=e.onLegalBasisChange,d=e.consentCategoryOptions,x=e.onConsentCategoryChange;return(0,f.jsx)(m,{isOpen:n,onClose:i,resetFilters:r,children:(0,f.jsx)(s.UQy,{children:(0,f.jsxs)(v,{children:[t?(0,f.jsx)(b,{options:o,onCheckboxChange:a,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,f.jsx)(b,{options:u,onCheckboxChange:c,header:"Data uses"}),t?(0,f.jsx)(b,{options:l,onCheckboxChange:p,header:"Legal basis"}):null,t?null:(0,f.jsx)(b,{options:d,onCheckboxChange:x,header:"Consent categories"})]})})})},T=t(97865),E=t(34090),F=t(43139),M=t(44047),R=function(e){var n=e.isOpen,t=e.onClose,i=e.fidesKey,r=(0,M.ho)(i),o=r.data,a=r.isLoading;return(0,f.jsxs)(s.u_l,{isOpen:n,onClose:t,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,f.jsx)(s.ZAr,{}),(0,f.jsxs)(s.hzk,{maxWidth:"800px",children:[(0,f.jsx)(s.xBx,{children:"Vendor"}),(0,f.jsx)(s.fef,{children:a?(0,f.jsx)(s.kCb,{width:"100%",height:"324px",alignItems:"center",justifyContent:"center",children:(0,f.jsx)(s.$jN,{})}):(0,f.jsx)(E.J9,{initialValues:o,enableReinitialize:!0,onSubmit:function(){},children:function(e){var n=e.values;return(0,f.jsxs)(E.l0,{children:[(0,f.jsx)(s.xuv,{mb:6,children:(0,f.jsx)(F.j0,{label:"Vendor Name",variant:"stacked",name:"name",disabled:!0})}),Object.entries((null===n||void 0===n?void 0:n.purposes)||{}).length>0?(0,f.jsx)(F.__,{children:" Purposes "}):null,(0,f.jsx)(E.F2,{name:"purposes",render:function(){return(0,f.jsx)(s.UQy,{allowMultiple:!0,children:Object.entries(n.purposes).map((function(e,n){var t=(0,T.Z)(e,1)[0];return(0,f.jsx)(s.Qdk,{children:function(e){var n=e.isExpanded;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(s.KFZ,{backgroundColor:n?"gray.50":"unset",children:[(0,f.jsx)(s.xuv,{flex:"1",textAlign:"left",children:t}),(0,f.jsx)(s.XEm,{})]}),(0,f.jsxs)(s.Hk3,{backgroundColor:"gray.50",children:[(0,f.jsx)(s.xuv,{my:4,children:(0,f.jsx)(F.VT,{label:"Data Uses",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].data_uses")})}),(0,f.jsx)(F.VT,{label:"Legal Basis",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].legal_bases")})]})]})}},n)}))})}}),(0,f.jsx)(s.xuv,{my:4,children:(0,f.jsx)(F.VT,{label:"Features",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"features"})}),(0,f.jsx)(F.VT,{label:"Data Categories",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"data_categories"})]})}})}),(0,f.jsxs)(s.mzw,{children:[(0,f.jsxs)(s.zxk,{variant:"outline",size:"sm",onClick:t,children:["Close"," "]}),(0,f.jsx)(s.LZC,{})]})]})]})};function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var I=(0,a.Cl)(),U={items:[],total:0,page:1,size:25,pages:1},L=function(){var e=(0,c.hz)(),n=e.tcf,t=e.dictionaryService,r=(0,M.x8)().isLoading,o=function(){var e=(0,s.qY0)();return{isOpen:e.isOpen,onOpen:e.onOpen,onClose:e.onClose}}(),d=o.isOpen,x=o.onOpen,g=o.onClose,h=(0,p.useRouter)(),C=(0,i.useState)(),b=C[0],v=C[1],m=function(){var e=(0,s.qY0)(),n=e.isOpen,t=e.onClose,r=e.onOpen;(0,_.fd)();var o=(0,P.C)(_.U3);(0,w.a4)();var a=(0,P.C)(w.ZS),u=(0,i.useState)([]),c=u[0],l=u[1],p=(0,i.useState)([]),d=p[0],f=p[1],x=(0,i.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),g=x[0],h=x[1],j=(0,i.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]),C=j[0],b=j[1];(0,i.useEffect)((function(){0===d.length&&f(o.map((function(e){return{value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1}})))}),[o,d,f]),(0,i.useEffect)((function(){0===c.length&&l([].concat((0,k.Z)(Object.entries(a.purposes).map((function(e){return{value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1}}))),(0,k.Z)(Object.entries(a.special_purposes).map((function(e){return{value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}})))))}),[a,c,f]);var v=function(e,n,t,s){s(t.map((function(t){return t.value===e?z(z({},t),{},{isChecked:n}):t})))};return{isOpen:n,onClose:t,onOpen:r,resetFilters:function(){f((function(e){return e.map((function(e){return z(z({},e),{},{isChecked:!1})}))})),h((function(e){return e.map((function(e){return z(z({},e),{},{isChecked:!1})}))})),l((function(e){return e.map((function(e){return z(z({},e),{},{isChecked:!1})}))})),b((function(e){return e.map((function(e){return z(z({},e),{},{isChecked:!1})}))}))},purposeOptions:c,onPurposeChange:function(e,n){v(e,n,c,l)},dataUseOptions:d,onDataUseChange:function(e,n){v(e,n,d,f)},legalBasisOptions:g,onLegalBasisChange:function(e,n){v(e,n,g,h)},consentCategoryOptions:C,onConsentCategoryChange:function(e,n){v(e,n,C,b)}}}(),S=m.isOpen,T=m.onOpen,E=m.onClose,F=m.resetFilters,Z=m.purposeOptions,L=m.onPurposeChange,B=m.dataUseOptions,N=m.onDataUseChange,H=m.legalBasisOptions,X=m.onLegalBasisChange,q=m.consentCategoryOptions,A=m.onConsentCategoryChange,G=(0,i.useMemo)((function(){return j(B,"data_uses")}),[B]),Q=(0,i.useMemo)((function(){return j(H,"legal_bases")}),[H]),K=(0,i.useMemo)((function(){var e=Z.filter((function(e){return e.value.includes("normal")})).map((function(e){return V(V({},e),{},{value:e.value.split(".")[1]})}));return j(e,"purposes")}),[Z]),W=(0,i.useMemo)((function(){var e=Z.filter((function(e){return e.value.includes("special")})).map((function(e){return V(V({},e),{},{value:e.value.split(".")[1]})}));return j(e,"special_purposes")}),[Z]),J=(0,i.useMemo)((function(){return j(q,"consent_category")}),[q]),Y=(0,l.oi)(),$=Y.PAGE_SIZES,ee=Y.pageSize,ne=Y.setPageSize,te=Y.onPreviousPageClick,se=Y.isPreviousPageDisabled,ie=Y.onNextPageClick,re=Y.isNextPageDisabled,oe=Y.startRange,ae=Y.endRange,ue=Y.pageIndex,ce=Y.setTotalPages,le=Y.resetPageIndexToDefault,pe=(0,i.useState)(),de=pe[0],fe=pe[1],xe=(0,M.de)({pageIndex:ue,pageSize:ee,dataUses:G,search:de,legalBasis:Q,purposes:K,specialPurposes:W,consentCategories:J}),ge=xe.isFetching,he=xe.isLoading,je=xe.data,Ce=(0,i.useMemo)((function(){return je||U}),[je]),be=Ce.items,ve=Ce.total,me=Ce.pages;(0,i.useEffect)((function(){ce(me)}),[me,ce]);var Oe=(0,i.useMemo)((function(){return[I.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,f.jsx)(l.G3,{value:e.getValue()})},header:function(e){return(0,f.jsx)(l.Rr,V({value:"Vendor"},e))}}),I.accessor((function(e){return e.data_uses}),{id:"tcf_purpose",cell:function(e){return(0,f.jsx)(l.CI,{plSuffix:"purposes",singSuffix:"purpose",count:e.getValue()})},header:function(e){return(0,f.jsx)(l.Rr,V({value:"TCF purpose"},e))}}),I.accessor((function(e){return e.data_uses}),{id:"data_uses",cell:function(e){return(0,f.jsx)(l.CI,{plSuffix:"data uses",singSuffix:"data use",count:e.getValue()})},header:function(e){return(0,f.jsx)(l.Rr,V({value:"Data use"},e))}}),I.accessor((function(e){return e.legal_bases}),{id:"legal_bases",cell:function(e){return(0,f.jsx)(l.CI,{plSuffix:"bases",singSuffix:"basis",count:e.getValue()})},header:function(e){return(0,f.jsx)(l.Rr,V({value:"Legal basis"},e))}}),I.accessor((function(e){return e.consent_categories}),{id:"consent_categories",cell:function(e){return(0,f.jsx)(l.CI,{plSuffix:"categories",singSuffix:"category",count:e.getValue()})},header:function(e){return(0,f.jsx)(l.Rr,V({value:"Categories"},e))}}),I.accessor((function(e){return e.cookies}),{id:"cookies",cell:function(e){return(0,f.jsx)(l.CI,{plSuffix:"cookies",singSuffix:"cookie",count:e.getValue()})},header:function(e){return(0,f.jsx)(l.Rr,V({value:"Cookies"},e))}})]}),[]),ye=(0,u.b7)({columns:Oe,data:be,state:{columnVisibility:{tcf_purpose:n,data_uses:n,legal_bases:n,consent_categories:!n,cookies:!n}},getCoreRowModel:(0,a.sC)(),columnResizeMode:"onChange",enableColumnResizing:!0});return he||r?(0,f.jsx)(l.I4,{rowHeight:36,numRows:15}):(0,f.jsxs)(s.kCb,{flex:1,direction:"column",overflow:"auto",children:[d&&b?(0,f.jsx)(R,{isOpen:d,fidesKey:b,onClose:g}):null,(0,f.jsxs)(l.Q$,{children:[(0,f.jsx)(l.HO,{globalFilter:de,setGlobalFilter:function(e){le(),fe(e)},placeholder:"Search"}),(0,f.jsx)(D,{isOpen:S,isTcfEnabled:n,onClose:E,resetFilters:F,purposeOptions:Z,onPurposeChange:L,dataUseOptions:B,onDataUseChange:N,legalBasisOptions:H,onLegalBasisChange:X,consentCategoryOptions:q,onConsentCategoryChange:A}),(0,f.jsxs)(s.Ugi,{alignItems:"center",spacing:4,children:[(0,f.jsx)(y.Z,{buttonLabel:"Add vendors",buttonVariant:"outline",onButtonClick:t?function(){h.push(O.Gg)}:void 0}),(0,f.jsx)(s.zxk,{onClick:T,"data-testid":"filter-multiple-systems-btn",size:"xs",variant:"outline",children:"Filter"})]})]}),(0,f.jsx)(l.ZK,{tableInstance:ye,onRowClick:function(e){v(e.fides_key),x()}}),(0,f.jsx)(l.s8,{totalRows:ve,pageSizes:$,setPageSize:ne,onPreviousPageClick:te,isPreviousPageDisabled:se||ge,onNextPageClick:ie,isNextPageDisabled:re||ge,startRange:oe,endRange:ae})]})},B=function(e){var n=e.title,t=e.description;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.xuv,{mb:4,children:(0,f.jsx)(s.X6q,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:n})}),(0,f.jsx)(s.kCb,{children:(0,f.jsx)(s.xvT,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:t})})]})},N=function(){return(0,f.jsxs)(r.Z,{title:"Configure consent",children:[(0,f.jsx)(B,{title:"Manage your vendors",description:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"}),(0,f.jsx)(L,{})]})}},54727:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return t(56566)}])}},function(e){e.O(0,[146,9938,589,6523,9774,2888,179],(function(){return n=54727,e(e.s=n);var n}));var n=e.O();_N_E=n}]);