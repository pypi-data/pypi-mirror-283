(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{51471:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(90849),i=r(28841),s=r(88038),o=r.n(s),a=r(86677),c=(r(27378),r(90768)),u=r(51365),l=r(60709),d=r(24246),f=function(){var e=(0,a.useRouter)();return(0,d.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,d.jsxs)(i.xuv,{children:[(0,d.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,d.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,d.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(l.fz)},children:"Configure"})]}),(0,d.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t=e.children,r=e.title,n=e.padded,s=void 0===n||n,l=e.mainProps,p=(0,c.hz)(),h=(0,a.useRouter)(),m="/privacy-requests"===h.pathname||"/datastore-connection"===h.pathname,j=!(p.flags.privacyRequestsConfiguration&&m),y=(0,u.JE)(void 0,{skip:j}).data,g=(0,u.PW)(void 0,{skip:j}).data,b=p.flags.privacyRequestsConfiguration&&(!y||!g)&&m;return(0,d.jsxs)(i.kCb,{"data-testid":r,direction:"column",h:"100vh",children:[(0,d.jsxs)(o(),{children:[(0,d.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,d.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)(i.kCb,v(v({as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},l),{},{children:[b?(0,d.jsx)(f,{}):null,t]}))]})}},78624:function(e,t,r){"use strict";r.d(t,{D4:function(){return s.D4},MM:function(){return p},Ot:function(){return u},c6:function(){return d},cj:function(){return h},e$:function(){return a},fn:function(){return c},iC:function(){return v},nU:function(){return f},tB:function(){return l}});var n,i=r(90849),s=r(60041),o="An unexpected error occurred. Please try again.",a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var r,n=null===(r=e.data.detail)||void 0===r?void 0:r[0];return"".concat(null===n||void 0===n?void 0:n.msg,": ").concat(null===n||void 0===n?void 0:n.loc)}if(409===e.status&&(0,s.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function c(e){return"object"===typeof e&&null!=e&&"status"in e}function u(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:o};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){var r=e.status;return{status:r,message:a(e,t.message)}}return t},p=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(d||(d={}));var v=(n={},(0,i.Z)(n,d.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,i.Z)(n,d.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,i.Z)(n,d.COMPASS,{label:"",fullName:""}),n),h=function(e){var t=e.split(".")[0];return t===d.AC?d.AC:t===d.GVL?d.GVL:d.COMPASS}},9408:function(e,t,r){"use strict";r.d(t,{HK:function(){return s},VY:function(){return n.V},O3:function(){return a}});var n=r(36653),i=r(78624),s=function(){var e=(0,n.V)().errorAlert;return{handleError:function(t){var r="An unexpected error occurred. Please try again.";(0,i.Ot)(t)?r=t.data.detail:(0,i.tB)(t)&&(r=t.data.detail[0].msg),e(r)}}},o=r(27378),a=function(e){var t=(0,o.useRef)(void 0);return(0,o.useEffect)((function(){var r=function(r){var n;null!==(n=t.current)&&void 0!==n&&n.contains(r.target)||e()};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}}),[t,e]),{ref:t}}},36653:function(e,t,r){"use strict";r.d(t,{V:function(){return c}});var n=r(90849),i=r(28841),s=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(){var e=(0,i.pmc)();return{errorAlert:function(t,r,n){var o=a(a({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"error",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[r&&(0,s.jsx)(i.CdC,{children:r}),(0,s.jsx)(i.XaZ,{children:t})]}),(0,s.jsx)(i.PZ7,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,o):e(o)},successAlert:function(t,r,n){var o=a(a({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[r&&(0,s.jsx)(i.CdC,{children:r}),(0,s.jsx)(i.XaZ,{children:t})]}),(0,s.jsx)(i.PZ7,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,o):e(o)}}}},56069:function(e,t,r){"use strict";r.d(t,{R:function(){return p}});var n=r(90849),i=r(90089),s=r(28841),o=r(79894),a=r.n(o),c=r(24246),u=["backPath"],l=["onClick"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.onClick,r=(0,i.Z)(e,l);return(0,c.jsxs)(s.kCb,f(f({alignItems:"center",mt:-4,mb:3,onClick:t,cursor:"pointer"},r),{},{children:[(0,c.jsx)(s.hU,{"aria-label":"Back",icon:(0,c.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,c.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};t.Z=function(e){var t=e.backPath,r=(0,i.Z)(e,u);return(0,c.jsxs)(s.kCb,f(f({alignItems:"center",mb:6},r),{},{children:[(0,c.jsx)(a(),{href:t,passHref:!0,children:(0,c.jsx)(s.hU,{"aria-label":"Back",icon:(0,c.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,c.jsx)(a(),{href:t,passHref:!0,children:(0,c.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},24330:function(e,t,r){"use strict";r.d(t,{DE:function(){return a},MP:function(){return i},qX:function(){return o},rE:function(){return s}});var n=r(4938),i=new Map([[n.q2.APPROVED,"Approved"],[n.q2.CANCELED,"Canceled"],[n.q2.COMPLETE,"Completed"],[n.q2.DENIED,"Denied"],[n.q2.ERROR,"Error"],[n.q2.IN_PROCESSING,"In Progress"],[n.q2.PENDING,"New"],[n.q2.PAUSED,"Paused"],[n.q2.IDENTITY_UNVERIFIED,"Unverified"],[n.q2.REQUIRES_INPUT,"Requires input"]]),s=new Map([[n.Us.ACCESS,"Access"],[n.Us.ERASURE,"Erasure"],[n.Us.CONSENT,"Consent"],[n.Us.UPDATE,"Update"]]),o={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},a={local:"local",s3:"s3"}},70810:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(55732),i=r(97865),s=r(34707),o=r.n(s),a=r(28841),c=r(27378),u=r(78624),l=r(9408),d=r(51471),f=r(56069),p=r(60709),v=r(24330),h=r(51365),m=r(34090),j=r(43139),y=r(24246),g=function(e){var t,r,s,d,f,p=e.storageDetails,g=(0,c.useState)(""),b=g[0],x=g[1],O=(0,h.gC)(),w=(0,i.Z)(O,1)[0],_=(0,h.cf)(),k=(0,i.Z)(_,1)[0],C=(0,l.HK)().handleError,P=(0,l.VY)().successAlert,E={type:v.DE.s3,auth_method:null!==(t=null===p||void 0===p||null===(r=p.details)||void 0===r?void 0:r.auth_method)&&void 0!==t?t:"",bucket:null!==(s=null===p||void 0===p||null===(d=p.details)||void 0===d?void 0:d.bucket)&&void 0!==s?s:"",format:null!==(f=null===p||void 0===p?void 0:p.format)&&void 0!==f?f:""},S=function(){var e=(0,n.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({type:v.DE.s3,details:{auth_method:t.auth_method,bucket:t.bucket},format:t.format});case 2:r=e.sent,(0,u.D4)(r)?C(r.error):(x(t.auth_method),P("S3 storage credentials successfully updated."));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,n.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({details:{aws_access_key_id:t.aws_access_key_id,aws_secret_access_key:t.aws_secret_access_key},type:v.DE.s3});case 2:r=e.sent,(0,u.D4)(r)?C(r.error):P("S3 storage secrets successfully updated.");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,y.jsx)(a.Kqy,{children:(0,y.jsx)(m.J9,{initialValues:E,onSubmit:S,enableReinitialize:!0,children:function(e){var t=e.isSubmitting,r=e.handleReset;return(0,y.jsxs)(m.l0,{children:[(0,y.jsxs)(a.Kqy,{mt:5,spacing:5,children:[(0,y.jsx)(j.AP,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,y.jsx)(j.AP,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,y.jsx)(j.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,y.jsx)(a.zxk,{onClick:function(){return r()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,y.jsx)(a.zxk,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===b?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.izJ,{mt:5}),(0,y.jsx)(a.X6q,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,y.jsx)(a.Kqy,{children:(0,y.jsx)(m.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:D,children:function(e){var t=e.isSubmitting,r=e.handleReset;return(0,y.jsxs)(m.l0,{children:[(0,y.jsxs)(a.Kqy,{mt:5,spacing:5,children:[(0,y.jsx)(j.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,y.jsx)(j.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,y.jsxs)(a.xuv,{mt:10,children:[(0,y.jsx)(a.zxk,{onClick:function(){return r()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,y.jsx)(a.zxk,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},b=function(){var e=(0,l.VY)().successAlert,t=(0,l.HK)().handleError,r=(0,c.useState)(""),s=r[0],m=r[1],j=(0,h.PW)().data,b=(0,h.Au)({type:s}).data,x=(0,h.gC)(),O=(0,i.Z)(x,2),w=O[0],_=O[1].isLoading,k=(0,h.L)(),C=(0,i.Z)(k,1)[0];(0,c.useEffect)((function(){j&&m(j.type)}),[j]);var P=function(){var r=(0,n.Z)(o().mark((function r(n){var i,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n!==v.DE.local){r.next=5;break}return r.next=3,w({type:n,details:{},format:"json"});case 3:i=r.sent,(0,u.D4)(i)?t(i.error):e("Configured storage details successfully.");case 5:return r.next=7,C({storage:{active_default_storage_type:n}});case 7:s=r.sent,(0,u.D4)(s)?t(s.error):m(n);case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,y.jsxs)(d.Z,{title:"Configure Privacy Requests - Storage",children:[(0,y.jsx)(f.Z,{backPath:p.fz}),(0,y.jsx)(a.X6q,{mb:5,fontSize:"2xl",fontWeight:"semibold",children:"Configure storage"}),(0,y.jsxs)(a.xuv,{display:"flex",flexDirection:"column",width:"50%",children:[(0,y.jsx)(a.xuv,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,y.jsxs)(a.xuv,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,y.jsx)(a.xvT,{as:"span",color:"complimentary.500",children:"Local"})," ","and"," ",(0,y.jsx)(a.xvT,{as:"span",color:"complimentary.500",children:"S3"})," ","storage methods."]}),(0,y.jsx)(a.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,y.jsx)(a.FXm,{isDisabled:_,onChange:P,value:s,"data-testid":"privacy-requests-storage-selection",colorScheme:"secondary",p:3,children:(0,y.jsxs)(a.Kqy,{direction:"row",children:[(0,y.jsx)(a.Y8K,{value:"local","data-testid":"option-local",mr:5,children:"Local"},"local"),(0,y.jsx)(a.Y8K,{value:"s3","data-testid":"option-s3",children:"S3"},"s3")]})}),"s3"===s&&b?(0,y.jsx)(g,{storageDetails:b}):null]})]})},x=function(){return(0,y.jsx)(b,{})}},60041:function(e,t,r){"use strict";r.d(t,{Bw:function(){return o},D4:function(){return i},Dy:function(){return c},XD:function(){return u},cz:function(){return l},hE:function(){return a},oK:function(){return s}});var n=r(76649),i=function(e){return"error"in e},s=function(e){return(0,n.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},o=function(e){return(0,n.Ln)({status:"number",data:{}},e)},a=function(e){return(0,n.Ln)({detail:"string"},e)},c=function(e){return(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,n.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},23663:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return r(70810)}])},76649:function(e,t,r){"use strict";r.d(t,{Ln:function(){return n},uX:function(){return o}});const n=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>s(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>s(e,t))))));if("object"!=typeof t||null===t)return!1;const r=t;return Object.entries(e).every((([e,t])=>s(t,r[e])))},o=e=>t=>n(e,t);class a{static narrow(e){return new a((t=>n(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,r=e instanceof a?e.NF:e instanceof Function?e:t=>n(e,t);return new a((e=>t(e)&&r(e)))}}new a((e=>!0))}},function(e){e.O(0,[9774,2888,179],(function(){return t=23663,e(e.s=t);var t}));var t=e.O();_N_E=t}]);