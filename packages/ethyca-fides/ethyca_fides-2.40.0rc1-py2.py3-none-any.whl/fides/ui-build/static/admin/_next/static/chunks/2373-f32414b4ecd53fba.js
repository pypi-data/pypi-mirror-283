(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2373],{44204:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(90849),s=n(90089),i=n(28841),a=n(24246),o=["label","isDisabled"],c=["data","border"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=e.label,n=e.isDisabled,r=(0,s.Z)(e,o);return(0,a.jsx)(i.OK9,{"data-testid":"tab-".concat(t),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:r.fontSize,fontWeight:"500",color:"gray.500",isDisabled:n||!1,children:t})};t.Z=function(e){var t=e.data,n=e.border,r=void 0===n?"partial":n,o=(0,s.Z)(e,c);return(0,a.jsxs)(i.mQc,d(d({colorScheme:"complimentary"},o),{},{children:[(0,a.jsx)(i.tdY,{width:"partial"===r?"max-content":void 0,children:t.map((function(e){return(0,a.jsx)(u,{label:e.label,isDisabled:e.isDisabled,fontSize:o.fontSize},e.label)}))}),(0,a.jsx)(i.nPR,{children:t.map((function(e){return(0,a.jsx)(i.x45,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},e.label)}))})]}))}},2458:function(e,t,n){"use strict";var r=n(90849),s=n(28841),i=n(24246);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.isOpen,n=e.onClose,r=e.onConfirm,a=e.onCancel,c=e.title,l=e.message,d=e.cancelButtonText,u=e.cancelButtonThemingProps,h=e.continueButtonText,p=e.continueButtonThemingProps,f=e.isLoading,m=e.returnFocusOnClose,x=e.isCentered,j=e.testId,b=void 0===j?"confirmation-modal":j,g=e.icon;return(0,i.jsxs)(s.u_l,{isOpen:t,onClose:n,size:"lg",returnFocusOnClose:null===m||void 0===m||m,isCentered:x,children:[(0,i.jsx)(s.ZAr,{}),(0,i.jsxs)(s.hzk,{textAlign:"center",p:6,"data-testid":b,children:[g?(0,i.jsx)(s.M5Y,{mb:2,children:g}):null,c?(0,i.jsx)(s.xBx,{fontWeight:"medium",pb:0,children:c}):null,l?(0,i.jsx)(s.fef,{children:l}):null,(0,i.jsx)(s.mzw,{children:(0,i.jsxs)(s.MIq,{columns:2,width:"100%",children:[(0,i.jsx)(s.zxk,o(o({variant:"outline",mr:3,onClick:function(){a&&a(),n()},"data-testid":"cancel-btn",isDisabled:f},u),{},{children:d||"Cancel"})),(0,i.jsx)(s.zxk,o(o({colorScheme:"primary",onClick:r,"data-testid":"continue-btn",isLoading:f},p),{},{children:h||"Continue"}))]})})]})]})}},56069:function(e,t,n){"use strict";n.d(t,{R:function(){return p}});var r=n(90849),s=n(90089),i=n(28841),a=n(79894),o=n.n(a),c=n(24246),l=["backPath"],d=["onClick"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.onClick,n=(0,s.Z)(e,d);return(0,c.jsxs)(i.kCb,h(h({alignItems:"center",mt:-4,mb:3,onClick:t,cursor:"pointer"},n),{},{children:[(0,c.jsx)(i.hU,{"aria-label":"Back",icon:(0,c.jsx)(i.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,c.jsx)(i.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};t.Z=function(e){var t=e.backPath,n=(0,s.Z)(e,l);return(0,c.jsxs)(i.kCb,h(h({alignItems:"center",mb:6},n),{},{children:[(0,c.jsx)(o(),{href:t,passHref:!0,children:(0,c.jsx)(i.hU,{"aria-label":"Back",icon:(0,c.jsx)(i.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,c.jsx)(o(),{href:t,passHref:!0,children:(0,c.jsx)(i.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},13861:function(e,t,n){"use strict";n.d(t,{R:function(){return S},Z:function(){return C}});var r=n(28841),s=n(27378),i=n(33571),a=n.n(i),o=n(24246),c=function(e){var t=e.columns,n=e.items,s=e.renderItem,i=(0,r.yo_)(n,t);return(0,o.jsx)(r.xuv,{children:i.map((function(e,n,i){var c=i.length;return(0,o.jsx)(r.xuv,{className:a()["grid-row"],borderBottomWidth:c>1&&n===c-1&&e.length===t?"0.5px":void 0,children:(0,o.jsx)(r.MIq,{columns:t,children:e.map((function(e){return(0,o.jsx)(r.xuv,{className:a()["grid-item"],children:s(e)},JSON.stringify(e))}))})},JSON.stringify(e))}))})},l=n(44845),d=n(55732),u=n(97865),h=n(34707),p=n.n(h),f=n(79894),m=n.n(f),x=n(86677),j=n(6848),b=n(2458),g=n(60709),y=n(63238),v=n(4938),w=n(78624),O=n(24753),P=n(51860),k=function(e){var t=e.system,n=(0,r.qY0)(),s=n.isOpen,i=n.onOpen,a=n.onClose,c=(0,r.pmc)(),l=(0,j.T)(),h=(0,x.useRouter)(),f=(0,P.DW)(),k=(0,u.Z)(f,1)[0],S=function(){var e=(0,d.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t.fides_key);case 2:n=e.sent,(0,w.D4)(n)?c((0,O.Vo)((0,w.e$)(n.error))):c((0,O.t5)("Successfully deleted system")),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=""===t.name||null==t.name?t.fides_key:t.name;return(0,o.jsxs)(r.xuv,{display:"flex","data-testid":"system-".concat(t.fides_key),children:[(0,o.jsx)(m(),{href:"".concat(g.So,"/configure/").concat(t.fides_key),passHref:!0,children:(0,o.jsxs)(r.xuv,{flexGrow:1,p:4,"data-testid":"system-box",_hover:{cursor:"pointer"},children:[(0,o.jsx)(r.X6q,{as:"h2",fontSize:"16px",mb:2,children:C}),(0,o.jsx)(r.xuv,{color:"gray.600",fontSize:"14px",children:(0,o.jsx)(r.xvT,{children:t.description})})]})}),(0,o.jsxs)(r.v2r,{children:[(0,o.jsx)(r.j2t,{as:r.hU,icon:(0,o.jsx)(r.nXP,{}),"aria-label":"more actions",variant:"unstyled",size:"sm","data-testid":"more-btn",m:1}),(0,o.jsxs)(r.qyq,{children:[(0,o.jsx)(r.sNh,{onClick:function(){l((0,P.db)(t)),h.push("".concat(g.So,"/configure/").concat(t.fides_key))},"data-testid":"edit-btn",children:"Edit"}),(0,o.jsx)(y.ZP,{scopes:[v.Sh.SYSTEM_DELETE],children:(0,o.jsx)(r.sNh,{onClick:i,"data-testid":"delete-btn",children:"Delete"})})]})]}),(0,o.jsx)(b.Z,{isOpen:s,onClose:a,onConfirm:S,title:"Delete ".concat(C),message:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.xvT,{children:["You are about to permanently delete the system"," ",(0,o.jsx)(r.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:C}),"."]}),(0,o.jsx)(r.xvT,{children:"Are you sure you would like to continue?"})]})})]})},S=function(e,t){var n,r;return(null===(n=e.name)||void 0===n?void 0:n.toLocaleLowerCase().includes(t.toLocaleLowerCase()))||(null===(r=e.description)||void 0===r?void 0:r.toLocaleLowerCase().includes(t.toLocaleLowerCase()))},C=function(e){var t=e.systems,n=(0,s.useState)(""),i=n[0],a=n[1],d=(0,s.useMemo)((function(){return t?t.filter((function(e){return S(e,i)})):[]}),[t,i]);return t&&t.length?(0,o.jsxs)(r.xuv,{"data-testid":"system-management",children:[(0,o.jsx)(r.xuv,{mb:4,"data-testid":"system-filters",children:(0,o.jsx)(l.Z,{search:i,onChange:a,maxWidth:"30vw",placeholder:"Search system name or description","data-testid":"system-search",withIcon:!0})}),(0,o.jsx)(c,{columns:3,items:d,renderItem:function(e){return(0,o.jsx)(k,{system:e})}})]}):(0,o.jsx)("div",{"data-testid":"empty-state",children:"No systems registered."})}},72086:function(e,t,n){"use strict";var r=n(28841),s=(n(27378),n(51471)),i=n(56069),a=n(60709),o=n(24246);t.Z=function(e){var t=e.children;return(0,o.jsxs)(s.Z,{title:"User Management",children:[(0,o.jsx)(i.Z,{backPath:a.e3}),(0,o.jsx)(r.X6q,{fontSize:"2xl",fontWeight:"semibold",children:"User Management"}),t]})}},27153:function(e,t,n){"use strict";n.d(t,{Z:function(){return de}});var r=n(90849),s=n(90089),i=n(28841),a=n(75834),o=n(24246),c=function(){return(0,o.jsxs)(i.xuv,{children:[(0,o.jsx)(i.xuv,{pb:4,fontSize:"18px",fontWeight:"semibold",children:"Role Description"}),(0,o.jsx)(i.gCW,{spacing:4,children:a.K.map((function(e){return(0,o.jsxs)(i.xuv,{width:"100%",padding:4,borderRadius:"md",backgroundColor:"blue.50",fontSize:"14px",children:[(0,o.jsx)(i.xuv,{fontWeight:"semibold",children:e.label}),(0,o.jsx)(i.xuv,{color:"gray.500",children:e.description})]},e.roleKey)}))})]})},l=n(6848),d=n(44204),u=n(4938),h=n(63238),p=n(55732),f=n(97865),m=n(34707),x=n.n(m),j=n(34090),b=n(79894),g=n.n(b),y=n(27378),v=n(78624),w=n(2458),O=n(60709),P=n(38687),k=n(24753),S=n(44845),C=n(48466),_=n(13861),z=n(73679),Z=n(96156),D=n(30002),E=function(e){var t=e.assignedSystems,n=e.onAssignedSystemChange,r=(0,l.C)(D.Ux);if((0,D.d6)(r,{skip:!r}),0===t.length)return null;return(0,o.jsxs)(i.iA_,{size:"sm","data-testid":"assign-systems-delete-table",children:[(0,o.jsx)(i.hrZ,{children:(0,o.jsxs)(i.Tr,{children:[(0,o.jsx)(i.Th,{children:"System"}),(0,o.jsx)(i.Th,{})]})}),(0,o.jsx)(i.p3B,{children:t.map((function(e){return(0,o.jsxs)(i.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,o.jsx)(i.Td,{children:e.name}),(0,o.jsx)(i.Td,{textAlign:"end",children:(0,o.jsx)(i.hU,{background:"gray.50","aria-label":"Unassign system from user",icon:(0,o.jsx)(Z.l,{}),variant:"outline",size:"sm",onClick:function(){return function(e){n(t.filter((function(t){return t.fides_key!==e.fides_key})))}(e)},"data-testid":"unassign-btn"})})]},e.fides_key)}))})]})},T=function(e){var t=e.allSystems,n=e.assignedSystems,r=e.onChange,s=function(e){var t=!!n.find((function(t){return t.fides_key===e.fides_key}));r(t?n.filter((function(t){return t.fides_key!==e.fides_key})):[].concat((0,z.Z)(n),[e]))};return(0,o.jsx)(i.xuv,{overflowY:"auto",maxHeight:"300px",children:(0,o.jsxs)(i.iA_,{size:"sm","data-testid":"assign-systems-table",maxHeight:"50vh",overflowY:"scroll",children:[(0,o.jsx)(i.hrZ,{position:"sticky",top:0,background:"white",zIndex:1,children:(0,o.jsxs)(i.Tr,{children:[(0,o.jsx)(i.Th,{children:"System"}),(0,o.jsx)(i.Th,{children:"Assign"})]})}),(0,o.jsx)(i.p3B,{children:t.map((function(e){var t=!!n.find((function(t){return t.fides_key===e.fides_key}));return(0,o.jsxs)(i.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,o.jsx)(i.Td,{children:e.name}),(0,o.jsx)(i.Td,{children:(0,o.jsx)(i.rsf,{isChecked:t,onChange:function(){return s(e)},"data-testid":"assign-switch"})})]},e.fides_key)}))})]})})},R=function(e){var t=e.isOpen,n=e.onClose,r=e.assignedSystems,s=e.onAssignedSystemChange,a=(0,C.K3)().data,c=(0,y.useState)(""),l=c[0],d=c[1],u=(0,y.useState)(r),h=u[0],f=u[1],m=function(){var e=(0,p.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(h),n();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=!a||0===a.length,b=(0,y.useMemo)((function(){return a?a.filter((function(e){return(0,_.R)(e,l)})):[]}),[a,l]),g=(0,y.useMemo)((function(){var e=new Set(h.map((function(e){return e.fides_key})));return b.every((function(t){return e.has(t.fides_key)}))}),[b,h]);return(0,o.jsxs)(i.u_l,{isOpen:t,onClose:n,size:"2xl",children:[(0,o.jsx)(i.ZAr,{}),(0,o.jsxs)(i.hzk,{p:8,"data-testid":"confirmation-modal",children:[(0,o.jsxs)(i.xBx,{fontWeight:"medium",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,o.jsx)(i.xvT,{children:"Assign systems"}),(0,o.jsxs)(i.Cts,{bg:"green.500",color:"white",px:1,children:["Assigned to ",r.length," systems"]})]}),(0,o.jsx)(i.fef,{"data-testid":"assign-systems-modal-body",children:j?(0,o.jsx)(i.xvT,{children:"No systems found"}):(0,o.jsxs)(i.Kqy,{spacing:4,children:[(0,o.jsxs)(i.kCb,{justifyContent:"space-between",children:[(0,o.jsx)(i.xvT,{fontSize:"sm",flexGrow:1,fontWeight:"medium",children:"Assign systems in your organization to this user"}),(0,o.jsx)(i.xuv,{children:(0,o.jsxs)(i.NIc,{display:"flex",alignItems:"center",children:[(0,o.jsx)(i.lXp,{fontSize:"sm",htmlFor:"assign-all-systems",mb:"0",children:"Assign all systems"}),(0,o.jsx)(i.rsf,{size:"sm",id:"assign-all-systems",isChecked:g,onChange:function(e){if(e.target.checked&&a)f(b);else{var t=a?a.filter((function(e){return!b.includes(e)})):[];f(t)}},"data-testid":"assign-all-systems-toggle"})]})})]}),(0,o.jsx)(S.Z,{search:l,onChange:d,placeholder:"Search for systems","data-testid":"system-search",withIcon:!0}),(0,o.jsx)(T,{allSystems:b,assignedSystems:h,onChange:f})]})}),(0,o.jsx)(i.mzw,{justifyContent:"flex-start",children:(0,o.jsxs)(i.hE2,{size:"sm",children:[(0,o.jsx)(i.zxk,{variant:"outline",mr:2,onClick:n,"data-testid":"cancel-btn",children:"Cancel"}),j?null:(0,o.jsx)(i.zxk,{colorScheme:"primary",onClick:m,"data-testid":"confirm-btn",children:"Confirm"})]})})]})]})},A=function(e){var t=e.label,n=e.roleKey,r=e.isSelected,s=e.isDisabled,a=e.assignedSystems,c=e.onAssignedSystemChange,l=(0,j.u6)().setFieldValue,d=(0,i.qY0)(),h=s?"You do not have sufficient permissions to assign this role.":void 0;return r?(0,o.jsxs)(i.Kqy,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",p:4,backgroundColor:"gray.50","aria-selected":"true",spacing:4,"data-testid":"selected",children:[(0,o.jsxs)(i.kCb,{alignItems:"center",justifyContent:"space-between",children:[(0,o.jsx)(i.xvT,{fontSize:"md",fontWeight:"semibold",children:t}),(0,o.jsx)(i.StI,{})]}),n!==u.A7.APPROVER?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.kCb,{alignItems:"center",children:[(0,o.jsx)(i.xvT,{fontSize:"sm",fontWeight:"semibold",mr:1,children:"Assigned systems"}),(0,o.jsx)(P.Z,{label:"Assigned systems refer to those systems that have been specifically allocated to a user for management purposes. Users assigned to a system possess full edit permissions and are listed as the Data Steward for the respective system."})]}),(0,o.jsx)(i.zxk,{disabled:s,title:h,colorScheme:"primary",size:"xs",width:"fit-content",onClick:d.onOpen,"data-testid":"assign-systems-btn",children:"Assign systems +"}),(0,o.jsx)(E,{assignedSystems:a,onAssignedSystemChange:c}),d.isOpen?(0,o.jsx)(R,{isOpen:d.isOpen,onClose:d.onClose,assignedSystems:a,onAssignedSystemChange:c}):null]}):null]}):(0,o.jsx)(i.zxk,{onClick:function(){l("roles",[n])},justifyContent:"start",variant:"outline",height:"inherit",p:4,"data-testid":"role-option-".concat(t),title:h,disabled:s,children:t})};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var q={roles:[]},U=function(){var e,t=(0,i.pmc)(),n=(0,l.C)(D.Ux);(0,D.d6)(n,{skip:!n});var s=(0,i.qY0)(),c=s.isOpen,d=s.onOpen,m=s.onClose,b=(0,l.C)(D.R$),S=(0,y.useState)(b),C=S[0],_=S[1],z=(0,D.G$)(),Z=(0,f.Z)(z,1)[0];(0,y.useEffect)((function(){_(b)}),[b]);var E=(0,D.gU)(null!==n&&void 0!==n?n:"",{skip:!n}),T=E.data,R=E.isLoading,U=(0,D.lD)(),W=(0,f.Z)(U,1)[0],V=function(){var e=(0,p.Z)(x().mark((function e(r){var s,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&m(),n){e.next=3;break}return e.abrupt("return");case 3:return s=r.roles.includes(u.A7.APPROVER),e.next=6,W({user_id:n,payload:{roles:r.roles}});case 6:if(i=e.sent,!(0,v.D4)(i)){e.next=10;break}return t((0,k.Vo)((0,v.e$)(i.error))),e.abrupt("return");case 10:if(s){e.next=18;break}return a=C.map((function(e){return e.fides_key})),e.next=14,Z({userId:n,fidesKeys:a});case 14:if(o=e.sent,!(0,v.D4)(o)){e.next=18;break}return t((0,k.Vo)((0,v.e$)(o.error))),e.abrupt("return");case 18:t((0,k.t5)("Permissions updated"));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,p.Z)(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(!(C.length>0&&t.roles.includes(u.A7.APPROVER))){e.next=6;break}d(),e.next=8;break;case 6:return e.next=8,V(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=(0,h.Tg)([u.Sh.USER_PERMISSION_ASSIGN_OWNERS]);if(!n)return null;if(R)return(0,o.jsx)(i.$jN,{});if(!N&&null!==T&&void 0!==T&&null!==(e=T.roles)&&void 0!==e&&e.includes(u.A7.OWNER))return(0,o.jsx)(i.xvT,{"data-testid":"insufficient-access",children:"You do not have sufficient access to change this user's permissions."});var B=null!==T&&void 0!==T&&T.roles?{roles:T.roles}:q;return(0,o.jsx)(j.J9,{onSubmit:L,initialValues:B,enableReinitialize:!0,children:function(e){var t=e.values,n=e.isSubmitting,s=e.dirty;return(0,o.jsxs)(j.l0,{children:[(0,o.jsxs)(i.Kqy,{spacing:7,children:[(0,o.jsxs)(i.Kqy,{spacing:3,"data-testid":"role-options",children:[(0,o.jsxs)(i.kCb,{alignItems:"center",children:[(0,o.jsx)(i.xvT,{fontSize:"sm",fontWeight:"semibold",mr:1,children:"User role"}),(0,o.jsx)(P.Z,{label:"A user's role in the organization determines what parts of the UI they can access and which functions are available to them."})]}),a.K.map((function(e){var n=t.roles.indexOf(e.roleKey)>=0;return(0,o.jsx)(A,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isSelected:n,isDisabled:e.roleKey===u.A7.OWNER&&!N,assignedSystems:C,onAssignedSystemChange:_},e),e.roleKey)}))]}),(0,o.jsxs)(i.hE2,{size:"sm",children:[(0,o.jsx)(g(),{href:O.e3,passHref:!0,children:(0,o.jsx)(i.zxk,{variant:"outline",children:"Cancel"})}),(0,o.jsx)(i.zxk,{colorScheme:"primary",type:"submit",isLoading:n,disabled:!s&&C===b,"data-testid":"save-btn",children:"Save"})]})]}),(0,o.jsx)(w.Z,{isOpen:c,onClose:m,onConfirm:function(){return V(t)},title:"Change role to Approver",testId:"downgrade-to-approver-confirmation-modal",continueButtonText:"Yes",message:(0,o.jsx)(i.xvT,{children:"Switching to an approver role will remove all assigned systems. Do you wish to proceed?"})})]})}})},W=n(78098),V=n(14633),L=n(43139),N=n(57044),B=n(28703).u.injectEndpoints({endpoints:function(e){return{getEmailInviteStatus:e.query({query:function(){return{url:"/messaging/email-invite/status"}},providesTags:function(){return["Email Invite Status"]}})}}}).useGetEmailInviteStatusQuery,K=n(45802),Y=n(33167);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=V.Ry().shape({password:N.a.label("Password"),passwordConfirmation:V.Z_().required().oneOf([V.iH("password")],"Passwords must match").label("Password confirmation")}),$={password:"",passwordConfirmation:""},G=function(e){var t=function(e){var t=(0,i.qY0)(),n=(0,i.pmc)(),r=(0,D.ls)(),s=(0,f.Z)(r,1)[0],a=function(){var r=(0,p.Z)(x().mark((function r(i){var a;return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s({id:e,new_password:i.password});case 2:a=r.sent,(0,Y.isErrorResult)(a)?n((0,k.Vo)((0,v.e$)(a.error))):(n((0,k.t5)("Successfully reset user's password. Please inform the user of their new password.")),t.onClose());case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return F(F({},t),{},{handleResetPassword:a})}(e.id),n=t.handleResetPassword,r=t.isOpen,s=t.onClose,a=t.onOpen;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.zxk,{variant:"outline",size:"sm",onClick:a,"data-testid":"reset-password-btn",children:"Reset password"}),(0,o.jsxs)(i.u_l,{isCentered:!0,isOpen:r,onClose:s,children:[(0,o.jsx)(i.ZAr,{}),(0,o.jsx)(i.hzk,{children:(0,o.jsx)(j.J9,{initialValues:$,validationSchema:H,onSubmit:n,children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid;return(0,o.jsxs)(j.l0,{children:[(0,o.jsx)(i.xBx,{children:"Reset Password"}),(0,o.jsx)(i.olH,{}),(0,o.jsx)(i.fef,{children:(0,o.jsxs)(i.Kqy,{direction:"column",spacing:4,children:[(0,o.jsx)(i.xvT,{mb:2,children:"Choose a new password for this user."}),(0,o.jsx)(L.j0,{name:"password",label:"Password",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol."}),(0,o.jsx)(L.j0,{name:"passwordConfirmation",label:"Confirm Password",placeholder:"********",type:"password",tooltip:"Must match above password."})]})}),(0,o.jsx)(i.mzw,{children:(0,o.jsxs)(i.hE2,{size:"sm",spacing:"2",width:"100%",children:[(0,o.jsx)(i.zxk,{onClick:s,variant:"outline",width:"50%",children:"Cancel"}),(0,o.jsx)(i.zxk,{colorScheme:"primary",disabled:!n||!r,isLoading:t,type:"submit",width:"50%","data-testid":"submit-btn",children:"Change Password"})]})})]})}})})]})]})};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e){var t=function(e){var t=(0,i.qY0)(),n=(0,i.pmc)(),r=(0,y.useState)(""),s=r[0],a=r[1],o=(0,y.useState)(""),c=o[0],l=o[1],d=(0,D.ev)(),u=(0,f.Z)(d,2),h=u[0],m=u[1].isLoading,j=!!(e&&c&&s),b=function(){var r=(0,p.Z)(x().mark((function r(){return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:j&&h({id:e,old_password:s,new_password:c}).unwrap().then((function(){n((0,k.t5)("Password updated")),t.onClose()}));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return X(X({},t),{},{changePasswordValidation:j,handleChange:function(e){"oldPassword"===e.target.name?a(e.target.value):l(e.target.value)},handleChangePassword:b,isLoading:m,newPasswordValue:c,oldPasswordValue:s})}(e.id),n=t.changePasswordValidation,r=t.handleChange,s=t.handleChangePassword,a=t.isLoading,c=t.isOpen,l=t.newPasswordValue,d=t.oldPasswordValue,u=t.onClose,h=t.onOpen;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.zxk,{variant:"outline",size:"sm",onClick:h,"data-testid":"update-password-btn",children:"Update password"}),(0,o.jsxs)(i.u_l,{isCentered:!0,isOpen:c,onClose:u,children:[(0,o.jsx)(i.ZAr,{}),(0,o.jsxs)(i.hzk,{children:[(0,o.jsx)(i.xBx,{children:"Update Password"}),(0,o.jsx)(i.olH,{}),(0,o.jsx)(i.fef,{pb:6,children:(0,o.jsxs)(i.Kqy,{direction:"column",spacing:"15px",children:[(0,o.jsx)(i.NIc,{children:(0,o.jsx)(i.IIB,{isRequired:!0,name:"oldPassword",onChange:r,placeholder:"Old Password",type:"password",value:d,"data-testid":"input-oldPassword"})}),(0,o.jsx)(i.NIc,{children:(0,o.jsx)(i.IIB,{isRequired:!0,name:"newPassword",onChange:r,placeholder:"New Password",type:"password",value:l,"data-testid":"input-newPassword"})})]})}),(0,o.jsxs)(i.mzw,{children:[(0,o.jsx)(i.zxk,{bg:"white",marginRight:"10px",onClick:u,size:"sm",variant:"solid",width:"50%",children:"Cancel"}),(0,o.jsx)(i.zxk,{bg:"primary.800",color:"white",disabled:!n,isLoading:a,mr:3,onClick:s,size:"sm",type:"submit",variant:"solid",width:"50%","data-testid":"submit-btn",children:"Change Password"})]})]})]})]})},ee=function(){var e=(0,l.C)(D.Ux),t=(0,l.C)(K.dy),n=!!t&&t.id===e;return(0,o.jsx)(i.xuv,{children:e?(0,o.jsxs)(i.Ugi,{children:[n?(0,o.jsx)(Q,{id:e}):null,(0,o.jsx)(h.ZP,{scopes:[u.Sh.USER_PASSWORD_RESET],children:(0,o.jsx)(G,{id:e})})]}):null})},te=["password"];function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se={username:"",first_name:"",email_address:"",last_name:"",password:""},ie=V.Ry().shape({username:V.Z_().required().label("Username"),email_address:V.Z_().email().required().label("Email address"),first_name:V.Z_().label("First name"),last_name:V.Z_().label("Last name"),password:N.a.label("Password")}),ae=function(e){var t=e.onSubmit,n=e.initialValues,r=e.canEditNames,a=(0,i.pmc)(),c=(0,l.T)(),d=(0,i.qY0)(),u=(0,l.C)(D.ZC),h=B().data,f=null===h||void 0===h?void 0:h.enabled,m=!u,b=!m&&!r,y=m&&!f,w=function(){var e=(0,p.Z)(x().mark((function e(n){var r,i,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.password,r=(0,s.Z)(n,te),i=y?n:r,e.next=4,t(i);case 4:if(o=e.sent,!(0,v.D4)(o)){e.next=8;break}return a((0,k.Vo)((0,v.e$)(o.error))),e.abrupt("return");case 8:a((0,k.t5)("".concat(m?"User created. By default, new users are set to the Viewer role. To change the role, please go to the Permissions tab.":"User updated."))),o&&o.data&&c((0,D.Vv)(o.data.id));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=y?ie:ie.omit(["password"]);return(0,o.jsx)(j.J9,{onSubmit:w,initialValues:null!==n&&void 0!==n?n:se,validationSchema:P,children:function(e){var t=e.dirty,n=e.isSubmitting,r=e.isValid;return(0,o.jsx)(j.l0,{children:(0,o.jsxs)(i.Kqy,{maxW:["xs","xs","100%"],width:"100%",spacing:7,children:[(0,o.jsxs)(i.Kqy,{spacing:6,maxWidth:"55%",children:[(0,o.jsxs)(i.kCb,{children:[(0,o.jsxs)(i.xvT,{display:"flex",alignItems:"center",fontSize:"sm",fontWeight:"semibold",children:["Profile"," ",(null===u||void 0===u?void 0:u.disabled)&&(0,o.jsx)(i.Cts,{bg:"green.500",color:"white",paddingLeft:"2",marginLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"invite-sent-badge",children:"Invite sent"})]}),(0,o.jsx)(i.xuv,{marginLeft:"auto",children:(0,o.jsxs)(i.Ugi,{children:[(0,o.jsx)(ee,{}),m?null:(0,o.jsxs)(i.xuv,{children:[(0,o.jsx)(i.hU,{"aria-label":"delete",icon:(0,o.jsx)(Z.l,{}),variant:"outline",size:"sm",onClick:d.onOpen,"data-testid":"delete-user-btn"}),(0,o.jsx)(W.Z,re({user:u},d))]})]})})]}),(0,o.jsx)(L.j0,{name:"username",label:"Username",variant:"block",placeholder:"Enter new username",disabled:!m,isRequired:!0}),(0,o.jsx)(L.j0,{name:"email_address",label:"Email address",variant:"block",placeholder:"Enter email of user",isRequired:!0}),(0,o.jsx)(L.j0,{name:"first_name",label:"First Name",variant:"block",placeholder:"Enter first name of user",disabled:b}),(0,o.jsx)(L.j0,{name:"last_name",label:"Last Name",variant:"block",placeholder:"Enter last name of user",disabled:b}),y?(0,o.jsx)(L.j0,{name:"password",label:"Password",variant:"block",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol.",isRequired:!0}):null]}),(0,o.jsxs)(i.hE2,{size:"sm",children:[(0,o.jsx)(g(),{href:O.e3,passHref:!0,children:(0,o.jsx)(i.zxk,{variant:"outline",mr:3,children:"Cancel"})}),(0,o.jsx)(i.zxk,{type:"submit",bg:"primary.800",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},colorScheme:"primary",disabled:!t||!r,isLoading:n,"data-testid":"save-user-btn",children:"Save"})]})]})})}})},oe=["onSubmit","initialValues"];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e){var t=e.onSubmit,n=e.initialValues,r=(0,s.Z)(e,oe),a=(0,l.C)(D.Ux);(0,D.Fk)(a,{skip:!a});var p=(0,h.Tg)([u.Sh.USER_PERMISSION_UPDATE]),f=!a||!p,m=[{label:"Profile",content:(0,o.jsx)(ae,le({onSubmit:t,initialValues:n},r))},{label:"Permissions",content:(0,o.jsxs)(i.kCb,{gap:"97px",children:[(0,o.jsx)(i.xuv,{w:{base:"100%",md:"50%",xl:"50%"},children:(0,o.jsx)(U,{})}),(0,o.jsx)(i.xuv,{position:"absolute",top:"96px",right:6,height:"calc(100% + 100px)",overflowY:"scroll",padding:6,w:"35%",borderLeftWidth:"1px",children:(0,o.jsx)(c,{})})]}),isDisabled:f}];return(0,o.jsx)(d.Z,{data:m})}},33167:function(e,t,n){"use strict";n.d(t,{isAPIError:function(){return r.Bw},isErrorResult:function(){return r.D4}});var r=n(60041)},33571:function(e){e.exports={"grid-row":"BorderGrid_grid-row__gzSVf","grid-item":"BorderGrid_grid-item__7gUTW"}}}]);