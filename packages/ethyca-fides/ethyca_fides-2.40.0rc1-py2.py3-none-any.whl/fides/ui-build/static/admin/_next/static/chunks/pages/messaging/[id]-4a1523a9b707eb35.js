(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3663],{77239:function(e,t,n){"use strict";n.r(t);var r=n(55732),s=n(97865),u=n(34707),i=n.n(u),a=n(78624),o=n(28841),c=n(86677),l=n(51471),p=n(60709),d=n(24753),f=n(16436),m=n(88744),x=n(33167),h=n(24246);t.default=function(){var e=(0,o.pmc)(),t=(0,c.useRouter)(),n=t.query.id,u=(0,f.gQ)(n),g=u.data,v=u.isLoading,b=(0,f.pS)(),_=(0,s.Z)(b,1)[0],j=(0,f.ew)(),w=(0,s.Z)(j,1)[0],y=function(){var t=(0,r.Z)(i().mark((function t(r){var s,u,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={is_enabled:r.is_enabled,content:{subject:r.content.subject,body:r.content.body},properties:[]},null===(s=r.properties)||void 0===s||s.forEach((function(e){var t;return null===(t=u.properties)||void 0===t?void 0:t.push(e.id)})),t.next=4,_({templateId:n,template:u});case 4:if(o=t.sent,!(0,x.isErrorResult)(o)){t.next=8;break}return e((0,d.Vo)((0,a.e$)(o.error))),t.abrupt("return");case 8:e((0,d.t5)("Messaging template updated successfully"));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=(0,o.qY0)(),C=k.isOpen,E=k.onOpen,N=k.onClose,Z=function(){var s=(0,r.Z)(i().mark((function r(){var s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w(n);case 2:if(s=r.sent,!(0,x.isErrorResult)(s)){r.next=6;break}return e((0,d.Vo)((0,a.e$)(s.error))),r.abrupt("return");case 6:e((0,d.t5)("Messaging template deleted successfully")),t.push(p.q);case 8:case"end":return r.stop()}}),r)})));return function(){return s.apply(this,arguments)}}();return g?v?(0,h.jsx)(o.$jN,{}):(0,h.jsxs)(l.Z,{title:"Configure Message",children:[(0,h.jsxs)(o.xuv,{"data-testid":"add-messaging-template",children:[(0,h.jsx)(o.X6q,{marginBottom:2,fontSize:"2xl",children:"Configure message"}),(0,h.jsxs)(o.xuv,{maxWidth:"720px",children:[(0,h.jsx)(o.xvT,{fontSize:"sm",children:"Configure this message"}),(0,h.jsx)(o.xuv,{padding:2,children:(0,h.jsx)(m.Z,{template:g,handleSubmit:y,handleDelete:E})})]})]}),(0,h.jsx)(o.cVQ,{isOpen:C,onClose:N,onConfirm:Z,title:"Delete message template",message:(0,h.jsx)(o.xvT,{children:"You are about to permanently delete this template message. Are you sure you would like to continue?"})})]}):null}},87439:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/messaging/[id]",function(){return n(77239)}])}},function(e){e.O(0,[6586,457,9774,2888,179],(function(){return t=87439,e(e.s=t);var t}));var t=e.O();_N_E=t}]);