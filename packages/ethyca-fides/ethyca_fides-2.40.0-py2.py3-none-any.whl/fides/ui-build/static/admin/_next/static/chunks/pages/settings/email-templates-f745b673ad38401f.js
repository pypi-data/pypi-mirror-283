(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4966],{51471:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(90849),i=n(28841),s=n(88038),a=n.n(s),o=n(86677),u=(n(27378),n(90768)),c=n(51365),l=n(60709),d=n(24246),p=function(){var e=(0,o.useRouter)();return(0,d.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,d.jsxs)(i.xuv,{children:[(0,d.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,d.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,d.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(l.fz)},children:"Configure"})]}),(0,d.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.children,n=e.title,r=e.padded,s=void 0===r||r,l=e.mainProps,f=(0,u.hz)(),m=(0,o.useRouter)(),y="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,b=!(f.flags.privacyRequestsConfiguration&&y),v=(0,c.JE)(void 0,{skip:b}).data,h=(0,c.PW)(void 0,{skip:b}).data,j=f.flags.privacyRequestsConfiguration&&(!v||!h)&&y;return(0,d.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,d.jsxs)(a(),{children:[(0,d.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,d.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)(i.kCb,g(g({as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},l),{},{children:[j?(0,d.jsx)(p,{}):null,t]}))]})}},86054:function(e,t,n){"use strict";var r=n(90849),i=n(90089),s=n(28841),a=n(38687),o=n(24246),u=["title","tooltip","children"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.title,n=e.tooltip,r=e.children,c=(0,i.Z)(e,u);return(0,o.jsxs)(s.xuv,l(l({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},c),{},{children:[(0,o.jsxs)(s.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,n?(0,o.jsx)(s.xvT,{as:"span",mx:1,children:(0,o.jsx)(a.Z,{label:n})}):void 0]}),(0,o.jsx)(s.Kqy,{p:6,spacing:6,children:r})]}))}},78624:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},MM:function(){return f},Ot:function(){return c},c6:function(){return d},cj:function(){return m},e$:function(){return o},fn:function(){return u},iC:function(){return g},nU:function(){return p},tB:function(){return l}});var r,i=n(90849),s=n(60041),a="An unexpected error occurred. Please try again.",o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n,r=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null===r||void 0===r?void 0:r.msg,": ").concat(null===r||void 0===r?void 0:r.loc)}if(409===e.status&&(0,s.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function u(e){return"object"===typeof e&&null!=e&&"status"in e}function c(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var d,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){var n=e.status;return{status:n,message:o(e,t.message)}}return t},f=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(d||(d={}));var g=(r={},(0,i.Z)(r,d.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,i.Z)(r,d.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,i.Z)(r,d.COMPASS,{label:"",fullName:""}),r),m=function(e){var t=e.split(".")[0];return t===d.AC?d.AC:t===d.GVL?d.GVL:d.COMPASS}},24753:function(e,t,n){"use strict";n.d(t,{MA:function(){return l},Vo:function(){return p},t5:function(){return d}});var r=n(90849),i=n(28841),s=n(24246);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=e.children;return(0,s.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",t]})},c=function(e){var t=e.children;return(0,s.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,s.jsx)(u,{children:e});return o(o({},l),{description:t})},p=function(e){var t=(0,s.jsx)(c,{children:e});return o(o({},l),{description:t,status:"error"})}},16436:function(e,t,n){"use strict";n.d(t,{KC:function(){return c},Vw:function(){return l},ew:function(){return d},gQ:function(){return o},jM:function(){return i},lE:function(){return s},ms:function(){return a},pS:function(){return u},vm:function(){return p}});var r=n(28703).u.injectEndpoints({endpoints:function(e){return{getMessagingTemplates:e.query({query:function(){return{url:"messaging/templates"}},providesTags:function(){return["Messaging Templates"]}}),getSummaryMessagingTemplates:e.query({query:function(e){return{method:"GET",url:"messaging/templates/summary",params:e}},providesTags:function(){return["Property-Specific Messaging Templates"]}}),updateMessagingTemplates:e.mutation({query:function(e){return{url:"messaging/templates",method:"PUT",body:e}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),getMessagingTemplateById:e.query({query:function(e){return{url:"/messaging/templates/".concat(e)}},providesTags:function(){return["Property-Specific Messaging Templates"]}}),putMessagingTemplateById:e.mutation({query:function(e){var t=e.templateId,n=e.template;return{url:"/messaging/templates/".concat(t),method:"PUT",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),patchMessagingTemplateById:e.mutation({query:function(e){var t=e.templateId,n=e.template;return{url:"/messaging/templates/".concat(t),method:"PATCH",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),getMessagingTemplateDefault:e.query({query:function(e){return{url:"/messaging/templates/default/".concat(e)}}}),createMessagingTemplateByType:e.mutation({query:function(e){var t=e.templateType,n=e.template;return{url:"/messaging/templates/".concat(t),method:"POST",body:n}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}}),deleteMessagingTemplateById:e.mutation({query:function(e){return{url:"/messaging/templates/".concat(e),method:"DELETE"}},invalidatesTags:function(){return["Property-Specific Messaging Templates"]}})}}}),i=r.useGetMessagingTemplatesQuery,s=r.useUpdateMessagingTemplatesMutation,a=r.useGetSummaryMessagingTemplatesQuery,o=r.useGetMessagingTemplateByIdQuery,u=r.usePutMessagingTemplateByIdMutation,c=r.useGetMessagingTemplateDefaultQuery,l=r.useCreateMessagingTemplateByTypeMutation,d=r.useDeleteMessagingTemplateByIdMutation,p=r.usePatchMessagingTemplateByIdMutation},97318:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(28841),i=n(51471),s=n(90849),a=n(55732),o=n(97865),u=n(34707),c=n.n(u),l=n(34090),d=n(86054),p=n(43139),f=n(78624),g=n(24753),m=n(16436),y=n(24246);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.emailTemplates,n=(0,m.lE)(),i=(0,o.Z)(n,2),u=i[0],b=i[1].isLoading,h=(0,r.pmc)(),j=function(){var e=(0,a.Z)(c().mark((function e(t,n){var r,i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){if((0,f.D4)(e)){var r=(0,f.e$)(e.error,"An unexpected error occurred while editing the email templates. Please try again.");h((0,g.Vo)(r))}else h((0,g.t5)("Email templates saved.")),n.resetForm({values:t})},i=Object.entries(t).map((function(e){var t=(0,o.Z)(e,2);return{type:t[0],content:t[1].content}})),e.next=4,u(i);case 4:s=e.sent,r(s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=t.reduce((function(e,t){return v(v({},e),{},(0,s.Z)({},t.type,{label:t.label,content:t.content}))}),{});return(0,y.jsx)(l.J9,{enableReinitialize:!0,initialValues:O,onSubmit:j,children:function(){return(0,y.jsxs)(l.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[Object.entries(O).map((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];return(0,y.jsx)(r.xuv,{py:3,children:(0,y.jsxs)(d.Z,{title:i.label,children:[(0,y.jsx)(p.j0,{label:"Message subject",name:"".concat(n,".content.subject"),variant:"stacked"}),(0,y.jsx)(p.Ks,{label:"Message body",name:"".concat(n,".content.body"),variant:"stacked",resize:!0})]})},n)})),(0,y.jsx)(r.kCb,{justifyContent:"right",width:"100%",paddingTop:2,children:(0,y.jsx)(r.zxk,{size:"sm",type:"submit",colorScheme:"primary",isLoading:b,children:"Save"})})]})}})},j=function(){var e=(0,m.jM)(),t=e.data;return e.isLoading?(0,y.jsx)(i.Z,{title:"Email templates",children:(0,y.jsx)(r.$jN,{})}):(0,y.jsx)(i.Z,{title:"Email templates",children:(0,y.jsxs)(r.xuv,{"data-testid":"email-templates",children:[(0,y.jsx)(r.X6q,{marginBottom:2,fontSize:"2xl",children:"Email templates"}),(0,y.jsxs)(r.xuv,{maxWidth:"720px",children:[(0,y.jsx)(r.xvT,{fontSize:"sm",children:"When privacy requests are submitted, Fides emails the data subject to confirm their identity and keep them updated on the status of the request. The templates below allow you to configure the subject and body of the email to suit your business needs. To change the appearance of the email, you may use the editors within your messaging provider (e.g. Mailgun, SendGrid, Twilio)."}),(0,y.jsx)(r.xuv,{padding:2,children:(0,y.jsx)(h,{emailTemplates:t})})]})]})})}},60041:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return i},Dy:function(){return u},XD:function(){return c},cz:function(){return l},hE:function(){return o},oK:function(){return s}});var r=n(76649),i=function(e){return"error"in e},s=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},a=function(e){return(0,r.Ln)({status:"number",data:{}},e)},o=function(e){return(0,r.Ln)({detail:"string"},e)},u=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},c=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},18193:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/email-templates",function(){return n(97318)}])},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return a}});const r=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>s(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>s(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>s(t,n[e])))},a=e=>t=>r(e,t);class o{static narrow(e){return new o((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof o?e.NF:e instanceof Function?e:t=>r(e,t);return new o((e=>t(e)&&n(e)))}}new o((e=>!0))}},function(e){e.O(0,[9774,2888,179],(function(){return t=18193,e(e.s=t);var t}));var t=e.O();_N_E=t}]);