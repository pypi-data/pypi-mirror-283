# This file is autogenerated by maturin v0.14.17
# To update, run
#
#    maturin generate-ci github -o .github/workflows/pypi_publish.yml
#
name: UpdateCargo

on:
  push:
    branches:
      - main
      - master
    tags:
      - '*'
  pull_request:
  workflow_dispatch:

permissions: write-all
  #contents: write-all

jobs:
  # Preliminary job to update Cargo files
  update-cargo:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      # Install or update cargo-edit
      - name: Install cargo-edit
        run: |
          cargo install --force cargo-edit

      # Add cargo binaries to PATH
      - name: Add cargo binaries to PATH
        run: echo "$HOME/.cargo/bin" >> $GITHUB_PATH

      # Update Cargo.toml Version
      - name: Update Cargo.toml Version
        run: |
          chmod +x Update_Cargo_version.sh
          ./Update_Cargo_version.sh

      - name: Push changes
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # Accessing the secret
        run: |
          git config --local user.email "playgroundmr0@gmail.com"
          git config --local user.name "playground-mr0"
          git add .
          git commit -m "Automated commit"
          git push origin $GITHUB_REF
 
