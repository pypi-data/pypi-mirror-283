(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[8498],{28498:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(63612),a=n(31529),i=n(93345),o=n(60162),s=n.n(o),d=n(16361),l=n(13428),u=n(13567),g=n(31652),h=n(60038),y=n(64751),c=n(41740),f=n(63065),m=n(24242);const b=(0,a.debounce)((({visibleRange:e,chunkSizes:t,data:n,widgetName:r,onQueryRangesChanged:a})=>{if(!t)return;const i={};let o=!1;Object.entries(t).forEach((([a,s])=>{if(void 0===s)throw new Error(`Undefined chunkSize for the axis "${a}" in the lazy loading configuration of "${r}". This is not supported.\nEncountered widgetPlugin.lazyLoading.chunkSizes = ${JSON.stringify(t,void 0,2)}`);const l=d.axisIds[a],u=n.axes.find((e=>e.id===l)),g=u?.range,h=e[a].from,y=e[a].to;if(!g||g.entireAxis)i[l]={from:0,to:s-1};else if(h>=g.from&&y<=g.to)i[l]={from:g.from,to:g.to};else{const e=h+Math.floor((y-h)/2),t=Math.max(0,Math.min(g.axisLength-s,e-Math.ceil(s/2))),n=Math.min(t+s,g.axisLength);i[l]={from:t,to:n},o=o||t!==g.from||n!==g.to}})),o&&a(i)}),300),p=e=>{const{data:t,widgetState:n,onQueryRangesChanged:a}=e,o=n.switchedTo??n.widgetKey,[s]=(0,y.useWidgetPlugins)([o]),d=s?.lazyLoading?.chunkSizes,l=(0,f.useWidgetName)(n),u=(0,i.useCallback)((e=>b({visibleRange:e,chunkSizes:d,data:t,widgetName:l,onQueryRangesChanged:a})),[d,t,l,a]);return(0,r.Y)(m.p,{...e,onVisibleRangeChanged:u})};var w=n(91206),C=n(30805);const S=e=>e,v=(0,i.memo)((e=>{(0,w.useCallOnLoadedAfterFirstProperRender)(e);const{queryResult:t,onSelectionChange:n,widgetState:a}=e,{widgetKey:o}=e.widgetState,[s]=(0,y.useWidgetPlugins)([o]),l=(0,f.useWidgetName)(a);(0,i.useMemo)((()=>{(0,u.h)(l,a.style?.measures)}),[a.style?.measures,l]);const[m]=(0,g.W0)([s?.cell]),[b]=(0,h.n6)([s?.cellStyle]),v=(0,i.useCallback)((b?.withCellStyle??S)(m?.Cell??c.Y),[m,b]);v.displayName="WithCellStyle";const x=(0,f.useFilters)(a),k=(0,i.useMemo)((()=>Object.values(x).some((e=>e.some((({dimensionName:e})=>"Measures"===e))))),[x]);if((0,f.isMappingEmpty)(a.mapping)&&!k)return(0,r.Y)(C.M,{size:e.widgetState.style?.size,style:e.style,reason:"noQuery"});if(!t.isLoading&&t.error){if((0,d.isQueryErrorOfType)(t.error,"QueryTimeoutException"))throw new d.QueryTimeoutError(t.error);throw new d.MdxError(t.error)}return(0,r.Y)(f.WidgetLoadingOverlay,{isLoading:t.isLoading,children:t.data&&t.data.cells.length>0?(0,r.Y)(p,{Cell:v,containerStyle:e.style,data:t.data,isRowHeaderTree:e.isRowHeaderTree,onChange:e.onChange,onSelectionChange:n,widgetState:e.widgetState,onQueryRangesChanged:e.onQueryRangesChanged}):(0,r.Y)(C.M,{size:e.widgetState.style?.size,style:e.style,reason:0===t.data?.cells.length?"noData":"noQuery"})})}),((e,t)=>{if((0,f.isWidgetInDashboard)(t)!==(0,f.isWidgetInDashboard)(e))return!1;if((0,f.isWidgetInDashboard)(t)&&(0,f.isWidgetInDashboard)(e)){const{dashboardState:n,...r}=(0,a.omit)(e,"onDashboardChange"),{dashboardState:i,...o}=(0,a.omit)(t,"onDashboardChange"),d=(0,l.W)(n,e.pageKey),u=(0,l.W)(i,t.pageKey);return s()(r,o)&&n.filters===i.filters&&d?.filters===u?.filters&&n.queryContext===i.queryContext&&d?.queryContext===u?.queryContext}return s()(e,t)}))},60162:e=>{e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),d=0;d<i.length;d++){var l=i[d];if(!s(l))return!1;var u=e[l],g=t[l];if(!1===(a=n?n.call(r,u,g,l):void 0)||void 0===a&&u!==g)return!1}return!0}}}]);