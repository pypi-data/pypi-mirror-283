/*! For license information please see 8277.574fd3d82c15158e6f6d.js.LICENSE.txt */
"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[8277,3612,1231,8850,3159,658],{98277:(e,r,t)=>{t.r(r),t.d(r,{canOpenDrillthroughOnSelection:()=>f,getDrillthroughWidgetFilters:()=>b,pluginMenuItemOpenDrillthrough:()=>_});var n=t(63612),i=t(93345),o=t(12166),a=t(52476),s=t(16361),l=t(83666),u=t(90519),c=t(32767),m=t(66138),d=t(57637),h=t(63065);function f(e){return void 0!==e&&!(e.axes&&e.axes.length>0)&&void 0!==e.cells&&1===e.cells.length&&void 0!==e.cells[0].value}var g=t(46689),p=t(72262);function y(e,r){const{dimensionName:t,hierarchyName:n}=e;return r.some((e=>(0,p.q)(e,{dimensionName:t,hierarchyName:n})))}function b({sourceWidgetFilters:e,tuple:r}){return[...(e||[]).filter((e=>!y(e,r))),...r.map((({dimensionName:e,hierarchyName:r,namePath:t})=>({type:"members",dimensionName:e,hierarchyName:r,members:[t]})))]}const _={key:"open-drillthrough",useMenuItem:e=>{const{selection:r,widgetState:t}=e,{cube:p}=(0,h.useCube)(t),{formatMessage:_}=(0,o.useIntl)(),x=(0,l.g)(),v=(0,i.useMemo)((()=>{if(f(r))return r.cells[0].tuple.filter((e=>"Measures"===e.dimensionName||!(0,s.isTotal)((0,m.q)(e,p),e)))}),[p,r]),C=(0,i.useMemo)((()=>{if(v){const e=v.filter((e=>"Measures"!==e.dimensionName));return _({id:"aui.plugins.menu-item.open-drillthrough.openDrillthrough"},{member:e.length>0?(0,s.getTupleCaption)(e,{captionForTotals:_({id:"aui.total"}),cube:p,separator:", ",hasOnlyCaptionForLeafLevels:!0}):void 0})}}),[_,v,p]),D=(0,i.useCallback)((async()=>{if(x&&C&&v&&(0,a.M)(e)){const r=(0,u.z)(e.dashboardState.pagesOrder),n=e.dashboardState.pagesOrder.indexOf(x),i=e.dashboardState.pages[x];if(void 0===t.query.mdx)return;const o=function({name:e,sourceWidget:r,sourceWidgetPage:t,tuple:n,cube:i}){const o=b({sourceWidgetFilters:r.filters,tuple:n}),a={mdx:(0,h.getDefaultMdxDrillthrough)(i.name)};r.query.mdx&&r.query.mdx.withClause&&(a.mdx.select.withClause=r.query.mdx.withClause);const s=(t.filters||[]).filter((e=>!y(e,n)));return{name:e,content:{0:{...g._.initialState,shouldUseDefaultColumns:!0,query:a,serverKey:r.serverKey,initialCubeName:i.name,filters:o}},layout:{direction:"column",children:[{leafKey:"0",size:1}]},filters:s}}({name:C,sourceWidget:t,sourceWidgetPage:i,tuple:v,cube:p}),a=(0,c.H)(e.dashboardState,{page:o,key:r,index:n+1});e.onDashboardChange(a),e.onActivePageChange(r)}}),[x,p,C,e,v,t]);if((0,a.M)(e)&&v&&t.query.mdx)return{icon:(0,n.Y)(d.IconDrillthrough,{}),label:C,onClick:D}},translations:{"en-US":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {on {member}}\n          }"},"fr-FR":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {sur {member}}\n          }"}}}},63612:(e,r,t)=>{t.d(r,{FD:()=>s,FK:()=>o,Y:()=>a});var n=t(63159),i=t(56801),o=(t(93345),t(77619),t(4674),t(19278),t(33525),n.Fragment);function a(e,r,t){return i.h.call(r,"css")?n.jsx(i.E,(0,i.c)(e,r),t):n.jsx(e,r,t)}function s(e,r,t){return i.h.call(r,"css")?n.jsxs(i.E,(0,i.c)(e,r),t):n.jsxs(e,r,t)}},81245:(e,r,t)=>{var n=t(93345),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var n,o={},u=null,c=null;for(n in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,n)&&!l.hasOwnProperty(n)&&(o[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===o[n]&&(o[n]=r[n]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:s.current}}r.Fragment=o,r.jsx=u,r.jsxs=u},63159:(e,r,t)=>{e.exports=t(81245)}}]);