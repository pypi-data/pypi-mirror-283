import{m as e,r as s,n as t,o as a,p as o,j as n,f as i,q as r,v as l,w as d,x as c,D as m,y as x,B as h,z as b,E as p,F as j,G as u,t as y,H as f,I as k,J as g}from"./index-i3D-D4iB.js";import{R as w,u as v,A as N,a as C,C as I}from"./useMarimoWebSocket-CeDjFpkf.js";const T=({appConfig:r})=>{const{setCells:l}=e();s.useEffect((()=>(w.INSTANCE.start(t),()=>{w.INSTANCE.stop()})),[]);const{connection:d}=v({autoInstantiate:!0,setCells:l,sessionId:i()}),c=a(o);return n.jsxs(N,{connectionState:d.state,isRunning:c,width:r.width,children:[n.jsx(C,{connection:d,className:"sm:pt-8"}),n.jsx(I,{appConfig:r,mode:"read"})]})},A=()=>{if(!r())return null;const e=l();return e?n.jsxs("div",{className:"px-4 py-2 bg-[var(--sky-2)] border-b border-[var(--sky-7)] text-md text-[var(--sky-11)] font-semibold flex justify-between items-center gap-4 no-print",children:[n.jsxs("span",{children:["This is a static Python notebook built using"," ",n.jsx("a",{href:"https://github.com/marimo-team/marimo",target:"_blank",className:"underline",children:"marimo"}),".",n.jsx("br",{}),"Some interactive features may not work, see ways to run or edit this."]}),n.jsx("span",{className:"flex-shrink-0",children:n.jsx(S,{code:e})})]}):null},S=({code:e})=>{let s=d()||"notebook.py";const t=s.lastIndexOf("/");-1!==t&&(s=s.slice(t+1));const a=window.location.href,o=c({code:e});return n.jsxs(m,{children:[n.jsx(x,{asChild:!0,children:n.jsx(h,{"data-testid":"static-notebook-dialog-trigger",variant:"secondary",children:"Run or edit this notebook"})}),n.jsxs(b,{children:[n.jsxs(p,{children:[n.jsx(j,{children:s}),n.jsxs(u,{className:"pt-4 text-md text-left",children:["This is a static notebook built using"," ",n.jsx("a",{href:"https://github.com/marimo-team/marimo",target:"_blank",className:"text-link hover:underline",children:"marimo"}),". marimo is an open-source next-generation Python notebook.",n.jsx("hr",{className:"my-3"}),"In order to edit this notebook, you will need to download the code locally, install marimo, and run the following in your terminal:",n.jsxs("div",{className:"font-mono text-sm bg-[var(--sky-2)] rounded-md my-3 p-2 border border-[var(--sky-7)]",children:["pip install marimo",n.jsx("br",{}),"marimo edit ",s]}),!a.endsWith(".html")&&n.jsxs(n.Fragment,{children:["or",n.jsxs("div",{className:"font-mono text-sm bg-[var(--sky-2)] rounded-md my-3 p-2 border border-[var(--sky-7)] break-all",children:["marimo edit ",window.location.href]})]}),n.jsx("hr",{className:"my-3"}),"You may also be able to run this notebook entirely in the browser via WebAssembly at:"," ",n.jsxs("a",{href:o,target:"_blank",className:"text-link hover:underline",children:[o.slice(0,40),"..."]}),n.jsx("br",{}),n.jsxs("div",{className:"text-sm text-muted-foreground pt-2",children:[n.jsx("strong",{children:"Note:"})," This feature is experimental and may not work for all notebooks. Additionally, some dependencies may not be available in the browser."]})]})]}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsxs(h,{"data-testid":"copy-static-notebook-dialog-button",variant:"secondary",onClick:()=>{window.navigator.clipboard.writeText(e),y({title:"Copied to clipboard"})},children:[n.jsx(f,{className:"w-4 h-4 mr-1"}),"Copy code"]}),n.jsxs(h,{"data-testid":"download-static-notebook-dialog-button",variant:"secondary",onClick:()=>{k(new Blob([e],{type:"text/plain"}),s)},children:[n.jsx(g,{className:"w-4 h-4 mr-1"}),"Download code"]})]})]})]})},E=e=>n.jsxs(n.Fragment,{children:[n.jsx(A,{}),n.jsx(T,{appConfig:e.appConfig})]});export{E as default};
